TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                            .MLIB   "HHMACS.LIB"
       2                            .FILE   "HHDTST.ASM"
       3                            .WIDTH  132
       4                            .OPTION B,D,L,T
       5                            .MNOLIST
       6                    
       7                    **************************************************************************
       8                    *                                                                        *
       9                    *       COPYRIGHT (C) 1994 MIDWAY MANUFACTURING COMPANY.                 *
      10                    *                      ALL RIGHTS RESERVED.                              *
      11                    *                                                                        *
      12                    **************************************************************************
      13                    
      14                            .INCLUDE        "HH.INC"
      15                            .INCLUDE        "HHSTRING.H"
      16                            .INCLUDE        "IMGTBL.GLO"
      17                            .include        "hhdtst.e"
      18                            .include        "hhadj.g"
      19                            .include        "hhram.g"
      20                            .include        "hhcmos.g"
      21                            .include        "hh.g"
      22                            .include        "hhmenu.g"
      23                            .include        "hhdutl.g"
      24                            .include        "hhd.g"
      25                            .include        "hhmisc.g"
      26                            .include        "hhproc.g"
      27                    ;MJL Start
      28                            .include        "hhpic.g"
      29                            .include        "hhsnd.g"
      30                    ;MJL End
      31                            .include        "hhcoin.g"
      32                    
      33                    ; end of include files
      34                    
      35                    **************************************************************************
      36                    *                                                                        *
      37                    *       DEFS AND REFS                                                    *
      38                    *                                                                        *
      39                    **************************************************************************
      40                    
      41                            .DEF    SWITCHTEST, CONV_PLOT, DIPTEST, COLORBAR
      42                    
      43                    *DIAGNOSTIC SOUND EQUATES
      44              005e  CMOS_ERROR_SND  .EQU    5EH
      45              005e  CPU_ERROR_SND   .EQU    5EH
      46              0083  DIP_SND         .EQU    83H
      47              0082  SWITCH_SND      .EQU    82H
      48                    **************************************************************************
      49                    *                                                                        *
      50                    *                       SOME RAM FOR YOU                                 *
      51                    *                                                                        *
      52                    **************************************************************************
      53 00000000                   .BSS    SWSET1,32               ; FOR SWITCH TEST
      54 00000020                   .BSS    SWSET2,32
      55 00000040                   .BSS    SWPREV1,32
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    2

      56 00000060                   .BSS    SWPREV2,32
      57                    
      58 00000080                   .BSS    DIPVAL,16
      59 00000090                   .BSS    DIP1ST,16
      60                    
      61 000000a0                   .BSS    FORCEDIP,16             ; FOR FORCING THE USE OF THE DIP
      62 000000b0                   .bss    xxxx,16         ;fill space to 32 bits
      63 000000c0                   .BSS    CERRORS,32
      64 000000e0                   .BSS    CPASSES,32
      65                    
      66 00000100                   .bss    _snd_status,32
      67 00000120                   .bss    _b6_save,32             ; Temporary register fer me
      68 00000140                   .bss    _temporary,32           ; Another temp fer me
      69 00000160                   .bss    _snd_diag_code,16       ; Temporary storage for sound diag code
      70 00000170                   .bss    _snd_chip_count,16      ; Temporary register fer me
      71 00000180                   .bss    _pic_raw,128            ; Stuff fer the PIC
      72 00000200                   .bss    _pic_temp,64
      73                    
      74                    **************************************************************************
      75                    *                                                                        *
      76                    *       USEFUL MACROS                                                    *
      77                    *                                                                        *
      78                    **************************************************************************
      79                    BUT_MAC .MACRO  X,Y,RADIUS,COLOR,MASK,SHIFT,EXTEND
      80                            .WORD   :X:
      81                            .WORD   :Y:
      82                            .WORD   :RADIUS:
      83                            .LONG   :COLOR:
      84                            .LONG   :MASK:
      85                            .WORD   :SHIFT:
      86                            .WORD   :EXTEND:
      87                            .ENDM
      88                    
      89                    STR_MAC .MACRO  X,Y,STRING,COLOR,DIR
      90                            .WORD   :X:
      91                            .WORD   :Y:
      92                            .LONG   :STRING:
      93                            .WORD   :COLOR:
      94                            .WORD   :DIR:
      95                            .ENDM
      96                    
      97                    SW_MAC  .MACRO  X,Y,STRING,COLOR,DIR,MASK
      98                            .WORD   :X:
      99                            .WORD   :Y:
     100                            .LONG   :STRING:
     101                            .WORD   :COLOR:
     102                            .WORD   :DIR:
     103                            .LONG   :MASK:
     104                            .ENDM
     105                    
     106                    VECMAC  .MACRO  COLOR,X1,Y1,X2,Y2
     107                            .WORD   :COLOR:
     108                            .WORD   :X1:
     109                            .WORD   :Y1:
     110                            .WORD   :X2:
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    3

     111                            .WORD   :Y2:
     112                            .ENDM
     113                    
     114                    DOTMAC  .MACRO  COLOR,X,Y
     115                            .WORD   :COLOR:
     116                            .WORD   :X:
     117                            .WORD   :Y:
     118                            .ENDM
     119                    
     120                    RECTMAC .MACRO  COLOR,X,Y,W,H
     121                            .WORD   :W:
     122                            .WORD   :H:
     123                            .WORD   :X:
     124                            .WORD   :Y:
     125                            .WORD   :COLOR:
     126                            .ENDM
     127                    
     128                    CHIPMAC .MACRO  NUM,X1,Y1,X2,Y2,X3,Y3,STRING,DIR,X4,Y4,STUFFED
     129                            .WORD   :NUM:
     130                            .WORD   :X1:
     131                            .WORD   :Y1:
     132                            .WORD   :X2:
     133                            .WORD   :Y2:
     134                            .WORD   :X3:
     135                            .WORD   :Y3:
     136                            .LONG   :STRING:
     137                            .WORD   :DIR:
     138                            .WORD   :X4:
     139                            .WORD   :Y4:
     140                            .WORD   :STUFFED:
     141                            .ENDM
     142                    
     143                    
     144              0000  CMNUM           EQU     0
     145              0010  CMLOC           EQU     CMNUM+16
     146              0010  CMXLOC          EQU     CMLOC
     147              0020  CMYLOC          EQU     CMLOC+16
     148              0030  CMSIZE          EQU     CMLOC+32
     149              0030  CMXSIZE         EQU     CMSIZE
     150              0040  CMYSIZE         EQU     CMSIZE+16
     151              0050  CMOFFSET        EQU     CMSIZE+32
     152              0070  CMSTRING        EQU     CMOFFSET+32
     153              0090  CMDIR           EQU     CMSTRING+32
     154              00a0  CMPINLOC        EQU     CMDIR+16
     155              00c0  CMSTUFFED       EQU     CMPINLOC+32
     156              00d0  CMEND           EQU     CMSTUFFED+16
     157                    
     158                    
     159                    **************************************************************************
     160                    *                                                                        *
     161                    * RAM_CHIP: MACRO DEFINES A RAM CHIP RECORD.                             *
     162                    *                                                                        *
     163                    *       CHIP_NO    -- CHIP NUMBER                                        *
     164                    *       WIDTH      -- CHIP CELL SIZE IN BITS (MUST BE > 0)               *
     165                    *       INTERLEAVE -- DISTANCE BETWEEN ADJACENT CELLS ON CHIP (IN BITS)  *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    4

     166                    *       START_ADDR -- ADDRESS OF FIRST CELL ON CHIP                      *
     167                    *       END_ADDR   -- ADDRESS OF LAST CELL ON CHIP                       *
     168                    *                                                                        *
     169                    **************************************************************************
     170                    
     171                    RAM_CHIP .MACRO TAB_LINK,CHIP_NO, WIDTH, INTERLEAVE, START_ADDR, END_ADDR
     172                    
     173                             .WORD  :WIDTH:
     174                             .WORD  :INTERLEAVE:
     175                             .WORD  :CHIP_NO:
     176                             .LONG  :START_ADDR:
     177                             .LONG  :END_ADDR:
     178                            .LONG   :TAB_LINK:
     179                             .ENDM
     180                    
     181              0000  RAM_WDTH EQU    000H                ; OFFSETS INTO RAM CHIP RECORD
     182              0010  RAM_ITLV EQU    010H
     183              0020  RAM_NMBR EQU    020H
     184              0030  RAM_SADR EQU    030H
     185              0050  RAM_EADR EQU    050H
     186              0070  RAM_LINK        EQU     070H
     187              0090  RAM_SIZE EQU    090H
     188                    
     189              0000  ROM_CKSM        EQU     000H
     190              0010  ROM_MAP         EQU     010H
     191              0020  ROM_WDTH        EQU     020H                ; OFFSETS INTO ROM CHIP RECORD
     192              0030  ROM_ITLV        EQU     030H
     193              0040  ROM_NMBR        EQU     040H
     194              0050  ROM_SADR        EQU     050H
     195              0070  ROM_EADR        EQU     070H
     196              0090  ROM_LINK        EQU     090H
     197              00b0  ROM_SIZE        EQU     0b0H
     198                    
     199              8000  dog_count       equ     8000h   ;every 32k
     200                    
     201                    **************************************************************************
     202                    *                                                                        *
     203                    * ROM_CHIP: MACRO DEFINES A ROM CHIP RECORD.                             *
     204                    *                                                                        *
     205                    *       CHIP_NO    -- CHIP NUMBER                                        *
     206                    *       WIDTH      -- CHIP CELL SIZE IN BITS (MUST BE > 0)               *
     207                    *       INTERLEAVE -- DISTANCE BETWEEN ADJACENT CELLS ON CHIP (IN BITS)  *
     208                    *       START_ADDR -- ADDRESS OF FIRST CELL ON CHIP                      *
     209                    *       END_ADDR   -- ADDRESS OF LAST CELL ON CHIP                       *
     210                    *       CHECK_SUM  -- DATAIO CHECK SUM FOR CHIP                          *
     211                    *                                                                        *
     212                    **************************************************************************
     213                    
     214                    ROM_CHIP $macro TAB_LINK,CHIP_NO, WIDTH, INTERLEAVE, START_ADDR, END_ADDR, CHECK_SUM, MAP
     215                    
     216                            .WORD   :CHECK_SUM:
     217                            .word   :MAP:
     218                            .WORD  :WIDTH:
     219                            .WORD  :INTERLEAVE:
     220                            .WORD  :CHIP_NO:
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    5

     221                            .LONG  :START_ADDR:
     222                            .LONG  :END_ADDR:
     223                            .LONG   :TAB_LINK:
     224                    
     225                             $ENDM
     226                    
     227                    
     228          5a5a5a5a  RANDOM_SEED EQU 5A5A5A5Ah              ; RAM TESTS: PSEUDO-RANDOM SEQUENCE
     229              001f  ZERO_EXTEND EQU 1Fh                    ; PARAMETERS
     230              0020  SIGN_EXTEND EQU 20h
     231                    
     232 00000000                   .TEXT
     233 00000000                   .EVEN
     234                    
     235 00000000           FREAD_SW1_CNS:
     236 00000000     058e          MOVE    A14,@WDOG_BONE,W
         00000010 01860030  
     237                            
     238 00000030     05a0          move    @SWITCH,a0
         00000040 01860000  
     239 00000060     05ae          move    @COINS,a14
         00000070 01860030  
     240 00000090     260e          sll     16,a14
     241 000000a0     efc0          movy    a14,a0
     242 000000b0                   FRET    b6
     243                    
     244 000000c0           FREAD_SW2_DIP:
     245 000000c0     058e          MOVE    A14,@WDOG_BONE,W
         000000d0 01860030  
     246                    
     247 000000f0     05aa          move    @SWITCH2,a10  
         00000100 01860010  
     248 00000120     05ae          move    @DIPSWITCH,a14
         00000130 01860020  
     249 00000150     260e          sll     16,a14
     250 00000160     efca          movy    a14,a10
     251 00000170                   FRET    b6
     252                    
     253                    **************************************************************************
     254                    *                                                                        *
     255                    *       POWERCMOS                                                        *
     256                    *                                                                        *
     257                    *       CHECK THE CMOS AND DO A LOT OF OTHER STUFF -- SHOW THE           *
     258                    *       POWER UP MESSAGES                                                *
     259                    *                                                                        *
     260                    *       ENTRY                                                            *
     261                    *               NOTHING                                                  *
     262                    *                                                                        *
     263                    *       EXIT                                                             *
     264                    *               NOTHING                                                  *
     265                    *                                                                        *
     266                    **************************************************************************
     267                    
     268 00000180           POWERCMOS:
     269 00000180     0360          DINT
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    6

     270 00000190     09c1          MOVI    SYSCINIT,A1
         000001a0     2880  
     271 000001b0     0581          move    a1,@SYSCTRL,W
         000001c0 01b00000  
     272                    
     273 000001e0     57ce          CLR     A14
     274 000001f0     078e          MOVE    A14,@DMAGOREG,L
         00000200 01a00000  
     275 00000220     078e          MOVE    A14,@DMAGOREG,L
         00000230 01a00000  
     276                    
     277                    *INITIALIZE IO REGISTERS
     278 00000250     09f0          MOVI    INITDATA,B0
         00000260 00000000! 
     279 00000280     09f7          MOVI    IDATALEN,B7
         00000290 00000000! 
     280                    
     281 000002b0     09f2          movi    HESYNC,b2
         000002c0 c0000000  
     282 000002e0     2f77          srl     5,b7
     283 000002f0           _t1
     284 000002f0     9a12          move    *b0+,*b2+,L
     285 00000300     3c57          dsjs    b7,_t1
     286 00000310     09ee          movi    0fffch,a14
         00000320 0000fffc  
     287 00000340     058e          move    a14,@DPYSTRT,W
         00000350 c0000090  
     288                    
     289 00000370     57ad          CLR     A13                     ; USED TO DECIDE WHETHER PAUSE OR NOT
     290 00000380                   FCALL   INITCOLR,B5             ; FIX UP THE COLORS
     291 000003c0                   FCALL   DSCRCLR,B6              ; MAKE SURE OF SCREEN
     292 00000400     09e0          MOVI    ROM_NAME,A0
         00000410 00000000! 
     293 00000430                   FCALL   STRINGCENTER,B6         ; GET WIDTH OF STRING
     294 00000470     0b21          ADDI    [30,0],A1
         00000480 001e0000  
     295 000004a0     5642          CLR     A2
     296 000004b0     09c3          MOVI    COLOR_YELLOW,A3
         000004c0     0505  
     297 000004d0                   FCALL   STRING,B6
     298                    
     299                    
     300                    ;MJL Start
     301 00000510     0d5f          calla   _read_pic_data
         00000520 00000000! 
     302                    
     303                    
     304 00000540     09e0          movi    sndrevprompt,a0         ; sound revision prompt
         00000550 00018190' 
     305 00000570                   FCALL   STRINGCENTER,b6
     306 000005b0     0b21          addi    [120,0],a1
         000005c0 00780000  
     307 000005e0     5642          clr     a2
     308 000005f0     09c3          movi    COLOR_PURPLE,a3
         00000600     0606  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    7

     309 00000610                   FCALL   STRING,b6
     310 00000650     0580          move    a0,@WDOG_BONE,W
         00000660 01860030  
     311 00000680     09e0          movi    COIN_COUNTERS,a0
         00000690 01860010  
     312 000006b0     09c1          movi    030h,a1                         ; yank down the reset
         000006c0     0030  
     313 000006d0     8020          move    a1,*a0,W
     314 000006e0     09c1          movi    10000,a1                        ; hold it fer a while
         000006f0     2710  
     315 00000700     3c21          dsjs    a1,$
     316 00000710     09c1          movi    020h,a1                         ; let it go
         00000720     0020  
     317 00000730     8020          move    a1,*a0,W
     318 00000740     09c1          movi    10000,a1
         00000750     2710  
     319 00000760     3c21          dsjs    a1,$
     320 00000770     4c24          move    a1,a4
     321 00000780     0d5f          calla   SEND_RAW_SOUND
         00000790 00000000! 
     322                    
     323 000007b0     0580          move    a0,@WDOG_BONE,W
         000007c0 01860030  
     324 000007e0     09e1          movi    2500000,a1                      ; wait fer a while
         000007f0 002625a0  
     325 00000810           _swait_lp
     326 00000810     0580          move    a0,@WDOG_BONE,W
         00000820 01860030  
     327 00000840     3c81          dsjs    a1,_swait_lp
     328 00000850     09c4          movi    999,a4                  ; send revision request sound call
         00000860     03e7  
     329 00000870     0d5f          calla   SEND_RAW_SOUND
         00000880 00000000! 
     330 000008a0     09e2          movi    1000000,a2
         000008b0 000f4240  
     331 000008d0           _sndrev_loop
     332 000008d0     05e0          movb    a0,@WDOG_BONE
         000008e0 01860030  
     333 00000900     05a1          move    @SOUNDIRQ,a1,W
         00000910 01860040  
     334 00000930     1ea1          btst    B_SDAV,a1               ; got a response ?
     335 00000940     ca13          jrz     _snd_response           ; br = yes
     336 00000950     3d22          dsjs    a2,_sndrev_loop
     337 00000960           _snd_timeout
     338 00000960     09e0          movi    sndtimeout,a0           ; if we get here we never got a response
         00000970 000182d0' 
     339 00000990                   FCALL   STRINGCENTER,b6         ; tell operator about it
     340 000009d0     0b21          addi    [135,0],a1
         000009e0 00870000  
     341 00000a00     5642          clr     a2
     342 00000a10     09c3          movi    COLOR_RED,a3
         00000a20     0101  
     343 00000a30                   FCALL   STRING,b6
     344 00000a70     c05d          jruc    _sndrev_done            ; then we be done
     345 00000a80           _snd_response
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    8

     346 00000a80     05a0          move    @SOUND,a0,W
         00000a90 01680000  
     347 00000ab0     0580          move    a0,@_snd_chip_count,W   ; put up sound revision
         00000ac0 00000170- 
     348 00000ae0     4c01          move    a0,a1
     349 00000af0     0b81          andi    0ffh,a1
         00000b00 ffffff00  
     350 00000b20     0b41          cmpi    0ffh,a1
         00000b30     ff00  
     351 00000b40     cae1          jrz     _snd_timeout
     352 00000b50     0b81          andi    0f0h,a1
         00000b60 ffffff0f  
     353 00000b80     0b41          cmpi    0d0h,a1
         00000b90     ff2f  
     354 00000ba0     ca04          jrz     _proto_version
     355 00000bb0     09e4          movi    sndreleaseprompt,a4
         00000bc0 00018280' 
     356 00000be0     c003          jruc    _do_snd_version
     357 00000bf0           _proto_version
     358 00000bf0     09e4          movi    sndprotoprompt,a4
         00000c00 00018240' 
     359 00000c20           _do_snd_version
     360 00000c20     0d5f          calla   copy_rom_string
         00000c30 00000000! 
     361 00000c50     05a0          move    @_snd_chip_count,a0,W
         00000c60 00000170- 
     362                    
     363 00000c80     0b80          andi    3fh,a0          ;rev 3.9 possible bigges
         00000c90 ffffffc0  
     364 00000cb0     4c0e          move    a0,a14
     365 00000cc0     0b8e          andi    0fh,a14
         00000cd0 fffffff0  
     366 00000cf0     480e          cmp     a0,a14
     367 00000d00     ca1c          jrz     _sgrv           ;if it is one number, it is single rev
     368 00000d10     2b80          sra     4,a0
     369 00000d20     0b80          andi    0fh,a0
         00000d30 fffffff0  
     370 00000d50     19e1          movk    15,a1
     371 00000d60     0d5f          calla   dec_to_asc
         00000d70 00000000! 
     372 00000d90     0d5f          calla   concat_string
         00000da0 00000000! 
     373 00000dc0     09c0          movi    '.',a0
         00000dd0     002e  
     374 00000de0     05e0          movb    a0,@message_buffer2
         00000df0 00000000! 
     375 00000e10     5600          clr     a0
     376 00000e20     05e0          movb    a0,@message_buffer2+8
         00000e30 00000008! 
     377 00000e50     0d3f          callr   concat_string
         00000e60     ff19! 
     378 00000e70     05a0          move    @_snd_chip_count,a0,W
         00000e80 00000170- 
     379                    
     380 00000ea0     0b80          andi    0fh,a0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    9

         00000eb0 fffffff0  
     381 00000ed0     19e1  _sgrv   movk    15,a1
     382 00000ee0     0d5f          calla   dec_to_asc
         00000ef0 00000000! 
     383 00000f10     0d5f          calla   concat_string
         00000f20 00000000! 
     384 00000f40     09e0          movi    message_buffer,a0
         00000f50 00000000! 
     385 00000f70                   FCALL   STRINGCENTER,b6
     386 00000fb0     0b21          addi    [135,0],a1
         00000fc0 00870000  
     387 00000fe0     5642          clr     a2
     388 00000ff0     09c3          movi    COLOR_WHITE,a3
         00001000     0202  
     389 00001010                   FCALL   STRING,b6
     390 00001050           _sndrev_done
     391                    
     392 00001050     09e0          movi    gamesnprompt,a0         ; put up game serial number
         00001060 00018410' 
     393 00001080                   FCALL   STRINGCENTER,b6
     394 000010c0     0b21          addi    [160,0],a1
         000010d0 00a00000  
     395 000010f0     5642          clr     a2
     396 00001100     09c3          movi    COLOR_PURPLE,a3
         00001110     0606  
     397 00001120                   FCALL   STRING,b6
     398 00001160     07a0          move    @_serial_number,a0,L    ; serial number put here by _get_serial_number
         00001170 00000000! 
     399 00001190     09e1          movi    1000000,a1
         000011a0 000f4240  
     400 000011c0     0d5f          calla   dec_to_asc
         000011d0 00000000! 
     401 000011f0     0d5f          calla   copy_string
         00001200 00000000! 
     402 00001220     09e0          movi    message_buffer,a0
         00001230 00000000! 
     403 00001250                   FCALL   STRINGCENTER,b6
     404 00001290     0b21          addi    [175,0],a1
         000012a0 00af0000  
     405 000012c0     5642          clr     a2
     406 000012d0     09c3          movi    COLOR_WHITE,a3
         000012e0     0202  
     407 000012f0                   FCALL   STRING,b6
     408                    
     409                    ;MJL End
     410                    
     411 00001330     0d5f          CALLA   CMOS_VAL                ; CHECKSUM AUDITS/ADJUSTMENTS
         00001340 00000000! 
     412 00001360     ca46          JREQ    CMOSOK
     413                    
     414 00001370     0d5f          CALLA   FAC_SET                 ; BUMMER, BABY!  RESET TO FACTORY
         00001380 00000000! 
     415 000013a0     0d5f          CALLA   BLASTMESS
         000013b0 00000000! 
     416 000013d0     0d5f          CALLA   CLR_AUD
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   10

         000013e0 00000000! 
     417 00001400     0d5f          CALLA   RES_ALL                 ; RESET HIGH SCORES
         00001410 00000000! 
     418                    
     419 00001430     182d          MOVK    1,A13                   ; FLAG ERROR
     420 00001440     0d5f          CALLA   CMOS_VAL                ; TRY AGAIN
         00001450 00000000! 
     421 00001470     ca23          JREQ    CMOSB1
     422 00001480     09e0          MOVI    CMOS_BAD,A0
         00001490 00002a50' 
     423 000014b0                   FCALL   STRINGCENTER,B6
     424 000014f0     0b21          ADDI    [50,0],A1
         00001500 00320000  
     425 00001520     5642          CLR     A2
     426 00001530     09c3          MOVI    COLOR_RED,A3
         00001540     0101  
     427 00001550                   FCALL   STRING,B6
     428 00001590     09e0          MOVI    CMOS_UNFAC,A0
         000015a0 00002d30' 
     429 000015c0                   FCALL   STRINGCENTER,B6
     430 00001600     0b21          ADDI    [65,0],A1
         00001610 00410000  
     431 00001630     5642          CLR     A2
     432 00001640     09c3          MOVI    COLOR_RED,A3
         00001650     0101  
     433 00001660                   FCALL   STRING,B6
     434 000016a0     c023          JRUC    CMOS1
     435 000016b0           CMOSB1
     436 000016b0     09e0          MOVI    CMOS_FACRES,A0
         000016c0 000027b0' 
     437 000016e0                   FCALL   STRINGCENTER,B6
     438 00001720     0b21          ADDI    [50,0],A1
         00001730 00320000  
     439 00001750     5642          CLR     A2
     440 00001760     09c3          MOVI    COLOR_RED,A3
         00001770     0101  
     441 00001780                   FCALL   STRING,B6
     442 000017c0     c011          JRUC    CMOS1
     443 000017d0           CMOSOK
     444 000017d0     09e0          MOVI    CMOS_OK,A0
         000017e0 00002e50' 
     445 00001800                   FCALL   STRINGCENTER,B6
     446 00001840     0b21          ADDI    [50,0],A1
         00001850 00320000  
     447 00001870     5642          CLR     A2
     448 00001880     09c3          MOVI    COLOR_GREEN,A3
         00001890     0707  
     449 000018a0                   FCALL   STRING,B6
     450                    
     451 000018e0           CMOS1
     452 000018e0     09c0          MOVI    AUD_ONTIME,A0
         000018f0     0013  
     453 00001900     5621          CLR     A1
     454 00001910     0d5f          CALLA   STORE_AUDIT
         00001920 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   11

     455 00001940           CTA2
     456                    ;       MOVI    CMOS_ALL,A0
     457                    ;       FCALL   STRINGCENTER,B6
     458                    ;       ADDI    [90,0],A1
     459                    ;       CLR     A2
     460                    ;       MOVI    COLOR_GREEN,A3
     461                    ;       FCALL   STRING,B6
     462                    
     463                    ;mdp    CALLA   INIT_HSR                ; RESET THE HIGHSCORE COUNTER
     464                    ;
     465                    ;       BY HERE, THE CMOS SHOULD BE FIXED UP AS GOOD AS POSSIBLE -- NOTE
     466                    ;       THAT IF CMOS IS BUSTED, THE GUY IS FUCKED FOR COINAGE
     467                    ;
     468                    ;       WITH SOME THOUGHT THAT MIGHT BE FIXABLE
     469                    ;
     470 00001940           CMOS2
     471 00001940     0d3f          CALLR   READ_DIP
         00001950     0b56  
     472 00001960     0b80          ANDI    DPUSECMOS,A0
         00001970 fffffffe  
     473 00001990     cb14          JRNZ    CMOS3                   ; BR = USING CMOS COINAGE
     474                    
     475                    *LOAD COINAGE FROM DIPSWITCH
     476 000019a0     09e0          MOVI    CMOS_DIP,A0
         000019b0 00002bd0' 
     477 000019d0                   FCALL   STRINGCENTER,B6
     478 00001a10     0b21          ADDI    [110,0],A1
         00001a20 006e0000  
     479 00001a40     5642          CLR     A2
     480 00001a50     09c3          MOVI    COLOR_WHITE,A3
         00001a60     0202  
     481 00001a70                   FCALL   STRING,B6
     482 00001ab0     0d3f          callr   set_dip_coinage        
         00001ac0     007f  
     483 00001ad0     c011          jruc    CMOS4
     484                    
     485 00001ae0           CMOS3
     486                    ;
     487                    ;       USING CMOS HERE
     488                    ;
     489 00001ae0     09e0          MOVI    CMOS_CMOS,A0
         00001af0 00002c90' 
     490 00001b10                   FCALL   STRINGCENTER,B6
     491 00001b50     0b21          ADDI    [110,0],A1
         00001b60 006e0000  
     492 00001b80     5642          CLR     A2
     493 00001b90     09c3          MOVI    COLOR_WHITE,A3
         00001ba0     0202  
     494 00001bb0                   FCALL   STRING,B6
     495 00001bf0           CMOS4
     496                    ;       CALLR   PLOTCOINAGE             ; PLOT SOME COINAGE
     497 00001bf0     05a0          move    @COINS,a0,W             ; check slam switch
         00001c00 01860030  
     498 00001c20     0b80          andi    SLAM_BIT,a0
         00001c30 fffffff7  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   12

     499 00001c50     cb12          JRNZ    CMOSRET
     500 00001c60     09e0          MOVI    CMOS_TILT,A0            ; get here if slam switch low
         00001c70 00002ae0' 
     501 00001c90                   FCALL   STRINGCENTER,B6
     502 00001cd0     0b21          ADDI    [205,0],A1
         00001ce0 00cd0000  
     503 00001d00     5642          CLR     A2
     504 00001d10     09c3          MOVI    COLOR_RED,A3
         00001d20     0101  
     505 00001d30                   FCALL   STRING,B6
     506 00001d70     182d          MOVK    1,A13                   ; FLAG ERROR
     507 00001d80           CMOSRET
     508 00001d80     4dad          MOVE    A13,A13
     509 00001d90     ca3f          JRZ     CTMP0
     510 00001da0     09c0          MOVI    CMOS_ERROR_SND,A0
         00001db0     005e  
     511                    ;       MOVE    A0,@SOUND,W
     512 00001dc0     09e0          MOVI    CMOS_WAIT,A0
         00001dd0 00002900' 
     513 00001df0                   FCALL   STRINGCENTER,B6
     514 00001e30     0b21          ADDI    [230,0],A1
         00001e40 00e60000  
     515 00001e60     5642          CLR     A2
     516 00001e70     09c3          MOVI    COLOR_RED,A3
         00001e80     0101  
     517 00001e90                   FCALL   STRING,B6
     518 00001ed0     07a0          move    @SWITCH,a0,L
         00001ee0 01860000  
     519 00001f00     0b80          andi    70707070h,a0
         00001f10 8f8f8f8f  
     520 00001f30     0780          move    a0,@SWSET1,L
         00001f40 00000000- 
     521 00001f60     05a1          move    @COINS,a1,W
         00001f70 01860030  
     522 00001f90     0b81          andi    664h,a1
         00001fa0 fffff99b  
     523 00001fc0     0581          move    a1,@SWSET2,W
         00001fd0 00000020- 
     524 00001ff0           CTMP1
     525 00001ff0     0580          move    a0,@WDOG_BONE,W
         00002000 01860030  
     526 00002020     07a0          move    @SWITCH,a0,L    ; break out of loop on any button press
         00002030 01860000  
     527 00002050     0b80          andi    70707070h,a0
         00002060 8f8f8f8f  
     528 00002080     07a1          move    @SWSET1,a1,L
         00002090 00000000- 
     529 000020b0     4801          cmp     a0,a1
     530 000020c0     cb16          jrne    CTMP2
     531 000020d0     05a1          move    @COINS,a1,W
         000020e0 01860030  
     532 00002100     0b81          andi    664h,a1
         00002110 fffff99b  
     533 00002130     05a0          move    @SWSET2,a0,W
         00002140 00000020- 
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   13

     534 00002160     4801          CMP     A0,A1
     535 00002170     cae7          JREQ    CTMP1
     536 00002180     c00a          JRUC    CTMP2
     537 00002190           CTMP0
     538 00002190                   PAUSE   200000H,B6,a0
     539                    
     540                    ;       movi    200h,a0
     541                    ;ctmp_wait
     542                    ;       move    a0,@WDOG_BONE           ;reset
     543                    ;       pause   1000h,b6
     544                    ;       dsjs    a0,ctmp_wait
     545                    
     546                    
     547 00002230           CTMP2
     548                    ;MJL Start
     549 00002230     07b5          move    @_serial_number,b5,L
         00002240 00000000! 
     550 00002260     07b6          move    @_man_date,b6,L
         00002270 00000000! 
     551                    ;MJL End
     552 00002290     c080          JAUC    PCMOSRET
         000022a0 00000000! 
     553                    
     554                    
     555                    
     556                    **************************************************************************
     557                    *                                                                                            *
     558                    * set_dip_coinage - setup coinage according to the dipswitches               *
     559                    *                                                                                            *
     560                    **************************************************************************
     561 000022c0           set_dip_coinage:
     562 000022c0     0d3f          callr   READ_DIP
         000022d0     0abe  
     563 000022e0     0b80          andi    DPUSECMOS,a0            ; using cmos coinage ?
         000022f0 fffffffe  
     564 00002310     cb48          jrne    sdc_x                   ; yes, ignore dipswitch setting
     565                    
     566 00002320     0d3f          CALLR   READ_DIP
         00002330     0ab8  
     567 00002340     4c02          MOVE    A0,A2
     568 00002350     0b80          ANDI    DPCOUNTRY,A0
         00002360 ffffffcf  
     569 00002380     2f80          SRL     SR_DPCOUNTRY,A0         ; 
     570 00002390     24a0          sll     5,a0                    ; Long word table
     571 000023a0     0b20          ADDI    DIPCOINTAB,A0
         000023b0 00000000! 
     572 000023d0     8601          MOVE    *A0,A1,L                ; POINTER TO RIGHT COIN TABLE
     573 000023e0     0b82          ANDI    DPCOINAGE,A2
         000023f0 fffffff1  
     574 00002410     0b42          CMPI    DPCOINAGE,A2            ; CHECK FOR FREEPLAY
         00002420     fff1  
     575 00002430     ca2f          JRZ     CMOS21
     576 00002440     2fe2          SRL     SR_DPCOINAGE,A2         ; 
     577 00002450     2482          sll     4,a2                    ; Word table
     578 00002460     4041          ADD     A2,A1
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   14

     579 00002470     8421          MOVE    *A1,A1,W                ; WHICH COIN TABLE TO USE
     580                    
     581 00002480     09c0          movi    ADJPRICE,a0
         00002490     0001  
     582 000024a0     0d5f          calla   GET_ADJ                 ;get the coin select number being used.
         000024b0 00000000! 
     583 000024d0     4801          cmp     a0,a1                   ;did we change coin modes
     584 000024e0     ca06          jreq    sdc_samec
     585 000024f0     0d5f          calla   NO_CREDS                ;clear credits
         00002500 00000000! 
     586 00002520     0d5f          calla   CRED_P                  ;link-out!
         00002530 00000000! 
     587 00002550           sdc_samec
     588                    
     589 00002550     09c0          MOVI    ADJPRICE,A0             ; MASTER PRICING
         00002560     0001  
     590 00002570     0d5f          CALLA   PUT_ADJ                 ; STUFF IT IN CMOS
         00002580 00000000! 
     591 000025a0     09c0          MOVI    ADJFREPL,A0
         000025b0     0014  
     592 000025c0     5621          CLR     A1                      ; MAKE SURE NO FREEPLAY
     593 000025d0     0d5f          CALLA   PUT_ADJ
         000025e0 00000000! 
     594 00002600           CMOS20
     595 00002600     09c0          MOVI    ADJ1ST6,A0              ;MAKE THEM UNTOUCHED PLEASE
         00002610     0017  
     596 00002620     1821          MOVK    1,A1
     597 00002630     0d5f          CALLA   PUT_ADJ
         00002640 00000000! 
     598                    
     599 00002660     0d5f          calla   F_ADC_S                 ; checksum the adjustments
         00002670 00000000! 
     600                    
     601 00002690     0d5f          CALLA   GET_CSPT
         000026a0 00000000! 
     602 000026c0     0d5f          CALLA   SET_COIN_ADJ            ; SET THE ADJUSTMENTS UP IN CMOS
         000026d0 00000000! 
     603                    
     604 000026f0     0d5f          CALLA   F_ADC_S                 ;CHECKSUM THE ADJUSTMENTS
         00002700 00000000! 
     605 00002720     c007          JRUC    sdc_x
     606                    
     607 00002730           CMOS21
     608 00002730     09c0          MOVI    ADJFREPL,A0
         00002740     0014  
     609 00002750     1821          MOVK    1,A1                    ; FREEPLAY, DUDE!
     610 00002760     0d5f          CALLA   PUT_ADJ
         00002770 00000000! 
     611 00002790     c0e6          JRUC    CMOS20
     612 000027a0           sdc_x
     613 000027a0     0960          rets
     614                    
     615                    
     616 000027b0           CMOS_FACRES
     617 000027b0       43          .STRING "CMOS INVALID -- FACTORY SETTINGS RESTORED",0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   15

     618 00002900                   .EVEN
     619 00002900           CMOS_WAIT
     620 00002900       45          .STRING "ERRORS DETECTED -- ANY BUTTON TO CONTINUE",0
     621 00002a50                   .EVEN
     622 00002a50           CMOS_BAD
     623 00002a50       43          .STRING "CMOS CHIP U49 BAD",0
     624 00002ae0                   .EVEN
     625                    
     626                    
     627 00002ae0           CMOS_TILT
     628 00002ae0       57          .STRING "WARNING -- SLAM SWITCH CLOSED",0
     629 00002bd0                   .EVEN
     630                    
     631 00002bd0           CMOS_DIP
     632 00002bd0       55          .STRING "USING DIPSWITCH COINAGE",0
     633 00002c90                   .EVEN
     634                    
     635 00002c90           CMOS_CMOS
     636 00002c90       55          .STRING "USING CMOS COINAGE",0
     637 00002d30                   .EVEN
     638                    
     639 00002d30           CMOS_UNFAC
     640 00002d30       55          .STRING "UNABLE TO RESTORE FACTORY SETTINGS",0
     641 00002e50                   .EVEN
     642                    
     643 00002e50           CMOS_OK
     644 00002e50       43          .STRING "CMOS OK",0
     645 00002e90                   .EVEN
     646                    
     647 00002e90           CMOS_ALL
     648 00002e90       41          .STRING "ALL TIME HIGH SCORES RESET",0
     649 00002f70                   .EVEN
     650                    
     651 00002f70           CMOS_ABAD
     652 00002f70       55          .STRING "UNABLE TO RESET ALLTIME HIGHSCORE TABLE",0
     653 000030b0                   .EVEN
     654 000030b0           CMOS_TBAD
     655 000030b0       55          .STRING "UNABLE TO RESET DAILY HIGHSCORE TABLE",0
     656 000031e0                   .EVEN
     657                    
     658                    **************************************************************************
     659                    *                                                                        *
     660                    *       PLOTCOINAGE                                                      *
     661                    *                                                                        *
     662                    *       PLOT OUT THE CURRENT COINAGE ON THE SCREEN                       *
     663                    *                                                                        *
     664                    *       ENTRY                                                            *
     665                    *               NOTHING                                                  *
     666                    *                                                                        *
     667                    *       EXIT                                                             *
     668                    *               NOTHING                                                  *
     669                    *                                                                        *
     670                    **************************************************************************
     671                    ****PLOTCOINAGE:
     672                    ****    .IF     PRINTER
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   16

     673                    ****    RETS
     674                    ****    .ELSE
     675                    ****    MOVI    ADJFREPL,A0
     676                    ****    CALLA   GET_ADJ
     677                    ****    JRNZ    PCFREE
     678                    ****PC1
     679                    ****    MOVI    ADJPRICE,A0
     680                    ****    CALLA   GET_ADJ                 ; GET THE CURRENT PRICING
     681                    ****        CALLA   GET_CSPT
     682                    ****        MOVE    *A6(CS_LIST),A7,L
     683                    ****        JRZ PCNOHEAD                ; NO HEADER, BELIEVE IT OR NOT
     684                    ****    MOVI    [130,0],A8              ; BASE ADDRESS FOR STRING
     685                    ****PCNEXTHEAD
     686                    ****        MOVE    *A7+,A0,L                   ; PICKUP THE NEXT POINTER
     687                    ****    JRZ     PCNOHEAD
     688                    ****
     689                    ****    FCALL   STRINGCENTER,B6
     690                    ****    ADD     A8,A1
     691                    ****    CLR     A2
     692                    ****    MOVI    COLOR_YELLOW,A3
     693                    ****    FCALL   STRING,B6
     694                    ****    ADDI    [12,0],A8               ; MOVE DOWN A LINE
     695                    ****
     696                    ****    JRUC    PCNEXTHEAD
     697                    ****    JRUC    PCNOHEAD
     698                    ****PCFREE
     699                    ****    MOVI    DUCOIN7,A0
     700                    ****    FCALL   STRINGCENTER,B6
     701                    ****    ADDI    [130,0],A1
     702                    ****    CLR     A2
     703                    ****    MOVI    COLOR_YELLOW,A3
     704                    ****    FCALL   STRING,B6
     705                    ****PCNOHEAD
     706                    ****    RETS
     707                    ****    .ENDIF
     708                    
     709                    **************************************************************************
     710                    *                                                                        *
     711                    *                                                                        *
     712                    *       CPU TESTING ROUTINES                                             *
     713                    *                                                                        *
     714                    *                                                                        *
     715                    **************************************************************************
     716                    
     717                    **************************************************************************
     718                    *                                                                        *
     719                    *       BURNIN                                                           *
     720                    *                                                                        *
     721                    *       FACTORY BURNIN TEST -- EXITS BY RESETING THE GAME                *
     722                    *                                                                        *
     723                    *       ENTRY                                                            *
     724                    *               NOTHING                                                  *
     725                    *                                                                        *
     726                    *       EXIT                                                             *
     727                    *               NOTHING                                                  *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   17

     728                    *                                                                        *
     729                    *       CALL                                                             *
     730                    *               JAUC                                                     *
     731                    *                                                                        *
     732                    **************************************************************************
     733                    
     734 000031e0           BURNIN:
     735 000031e0     09c0          MOVI    AUD_AUTO,A0             ;ZERO OUT BURNIN AUDIT
         000031f0     0049  
     736 00003200     0d5f          CALLA   KILL_AUD
         00003210 00000000! 
     737 00003230           BURNLOOP
     738 00003230     0360          DINT
     739 00003240                   FCALL   CPUTEST,SP
     740 00003280           BURNSP:
     741 00003280     0570          SETF    16,1,0
     742 00003290     0760          SETF    32,1,1
     743 000032a0     09ef          MOVI    STCKST,SP,L             ;RESTORE THE STACK PTR
         000032b0 013f73e0  
     744 000032d0     09c0          MOVI    SYSCINIT,A0             ;RE-INITIALIZE SYSTEM CONTROL
         000032e0     2880  
     745                    
     746 000032f0     0580          move    a0,@SYSCTRL,W
         00003300 01b00000  
     747                    
     748 00003320     09c0          MOVI    AUD_AUTO,A0
         00003330     0049  
     749 00003340     0d5f          CALLA   AUD1                    ;ANOTHER ONE WORKED
         00003350 00000000! 
     750 00003370     c0eb          JRUC    BURNLOOP
     751                    
     752                    **************************************************************************
     753                    *                                                                        *
     754                    *       DIAGCPUTEST                                                      *
     755                    *                                                                        *
     756                    *       DIAGNOSTIC CALL FOR THE CPU TEST                                 *
     757                    *                                                                        *
     758                    *       ENTRY                                                            *
     759                    *               NOTHING                                                  *
     760                    *                                                                        *
     761                    *       EXIT                                                             *
     762                    *               JUMPS TO *EXEC_LP* AFTER SETTING EVERYTHING UP           *
     763                    *                                                                        *
     764                    *       CALL                                                             *
     765                    *               JAUC                                                     *
     766                    *                                                                        *
     767                    **************************************************************************
     768                    
     769 00003380           DIAGCPUTEST:
     770 00003380     0360          DINT
     771 00003390                   FCALL   CPUTEST,SP
     772 000033d0           DIAGSP:
     773 000033d0     0570          SETF    16,1,0                  ; WORD NO SIGN EXTEND
     774 000033e0     0760          SETF    32,1,1                  ; LONG WORD
     775 000033f0     09ef          MOVI    STCKST,SP,L
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   18

         00003400 013f73e0  
     776 00003420     0d5f          CALLA   CLSCRACH
         00003430 00000000! 
     777 00003450     09c0          MOVI    SYSCINIT,A0
         00003460     2880  
     778                    
     779 00003470     0580          move    a0,@SYSCTRL,W
         00003480 01b00000  
     780                    
     781                    ;MJL
     782 000034a0     0d3f          callr   _read_pic_data
         000034b0     fcb4! 
     783                    ;MJL END
     784                    
     785 000034c0     0d5f          CALLA   MAIN_INIT
         000034d0 00000000! 
     786                    
     787                    ;MJL
     788 000034f0     5684          clr     a4                      ; make the sound card shut up for now
     789 00003500     0d5f          calla   SEND_RAW_SOUND
         00003510 00000000! 
     790                    ;MJL END
     791                    
     792 00003530     0d5f          CALLA   COLOR_START             ;FIRE UP THE COLORS
         00003540 00000000! 
     793                    
     794 00003560     0d60          EINT                            ; ENABLE INTERRUPTS AND WE'RE OFF
     795 00003570                   DISPON                          ; ENABLE THE DISPLAY SYSTEM
     796 000035b0                   CREATE  PID_DIAG,CPU_RET
     797 00003640     09c0          MOVI    INDIAG,A0
         00003650     0040  
     798 00003660     0580          MOVE    A0,@GAME_STATE,W
         00003670 00000000! 
     799 00003690     c080          JAUC    EXEC_LP
         000036a0 00000000! 
     800                    
     801                    **************************************************************************
     802                    *                                                                        *
     803                    *       POWERCPUTEST                                                     *
     804                    *                                                                        *
     805                    *       CHECK OUT THE CPU ON POWER ON                                    *
     806                    *                                                                        *
     807                    *       ENTRY                                                            *
     808                    *               NOTHING                                                  *
     809                    *                                                                        *
     810                    *       EXIT                                                             *
     811                    *               JUMPS TO *PONTEST*                                       *
     812                    *                                                                        *
     813                    *       CALL                                                             *
     814                    *               JAUC                                                     *
     815                    *                                                                        *
     816                    **************************************************************************
     817                    
     818 000036c0           POWERCPUTEST:
     819 000036c0     0360          DINT
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   19

     820 000036d0     07a0          MOVE    @DIPSWITCH,A0,L         ; CHECK FOR BYPASS CONDITIONS
         000036e0 01860020  
     821 00003700     03e0          NOT     A0
     822 00003710     4c01          move    a0,a1
     823 00003720     0b80          ANDI    2000H,A0                ; skip if coin door open
         00003730 ffffdfff  
     824 00003750     cb80          JANZ    PONTEST
         00003760 000085b0' 
     825 00003780     0b81          andi    DPPWRUP,a1
         00003790 fffffbff  
     826 000037b0     cb80          janz    PONTEST                 ; skip if Dip Sw is ON
         000037c0 000085b0' 
     827 000037e0     57ce          clr     a14
     828 000037f0     058e          move    a14,@DMACTRL,W
         00003800 01a00010  
     829 00003820     058e          move    a14,@DMACTRL,W
         00003830 01a00010  
     830 00003850                   FCALL   CPUTEST,SP
     831 00003890     c080          JAUC    PONTEST
         000038a0 000085b0' 
     832                    
     833                    
     834                    
     835                    ***********************************************
     836                    * PICCHECK - Power up test for the PIC MicroController
     837                    * Checks basic communications with the PIC chip
     838                    *
     839 000038c0           PICCHECK
     840 000038c0     09c0          movi    1fh,a0                  ;Command code 0xf
         000038d0     001f  
     841 000038e0     0580          move    a0,@PIC_COMMAND,W
         000038f0 01600000  
     842 00003910     09c0          movi    0fh,a0
         00003920     000f  
     843 00003930     0580          move    a0,@PIC_COMMAND,W
         00003940 01600000  
     844 00003960     09e0          movi    100000,a0               ;Wait for Acknowledge
         00003970 000186a0  
     845 00003990           pic_loop
     846 00003990     0581          move    a1,@WDOG_BONE,W
         000039a0 01860030  
     847                    ;       move    @_watchdog_addr,a1,L
     848                    ;       move    a1,*a1,W
     849                    ;       move    @_soundirq_addr,a1,L
     850                    ;       move    *a1,a1,W
     851 000039c0     05a1          move    @SOUNDIRQ,a1,W
         000039d0 01860040  
     852 000039f0     1e61          btst    12,a1
     853 00003a00     ca03          jrz     _got_pic_ack            ;BR = got acknowledge
     854 00003a10     3d20          dsjs    a0,pic_loop
     855 00003a20     1820          movk    1,a0
     856 00003a30     c01f          jruc    _piccheck_done
     857 00003a40           _got_pic_ack
     858 00003a40     05a0          move    @PIC_DATA,a0,W          ;Read the data
         00003a50 01600000  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   20

     859 00003a70     09c1          movi    010h,a1
         00003a80     0010  
     860 00003a90     0581          move    a1,@PIC_COMMAND,W       ;Tell PIC we took data
         00003aa0 01600000  
     861 00003ac0     09e1          movi    100000,a1
         00003ad0 000186a0  
     862 00003af0           _pic_nack_loop
     863                    ;       move    @_watchdog_addr,a2,L
     864                    ;       move    a2,*a2,W
     865 00003af0     0582          move    a2,@WDOG_BONE,W
         00003b00 01860030  
     866                    ;       move    @_soundirq_addr,a2,L
     867                    ;       move    *a2,a2,W
     868 00003b20     05a2          move    @SOUNDIRQ,a2,W
         00003b30 01860040  
     869 00003b50     1e62          btst    12,a2
     870 00003b60     cb03          jrnz    _got_pic_nack
     871 00003b70     3d21          dsjs    a1,_pic_nack_loop
     872 00003b80     1820          movk    1,a0
     873 00003b90     c009          jruc    _piccheck_done
     874 00003ba0           _got_pic_nack
     875 00003ba0     0b80          andi    0fh,a0
         00003bb0 fffffff0  
     876 00003bd0     0b40          cmpi    0fh,a0
         00003be0     fff0  
     877 00003bf0     ca02          jrz     _pic_ok
     878 00003c00     1820          movk    1,a0
     879 00003c10     c001          jruc    _piccheck_done
     880 00003c20           _pic_ok
     881 00003c20     5600          clr     a0
     882 00003c30           _piccheck_done
     883 00003c30                   FRET    b5
     884                    
     885                    ***************************************************
     886                    * SNDCHECK - Sound Subsystem Check during CPUTEST
     887                    *
     888 00003c40           SNDCHECK
     889 00003c40     0796          move    b6,@_b6_save,L
         00003c50 00000120- 
     890 00003c70     09e0          movi    COIN_COUNTERS,a0
         00003c80 01860010  
     891 00003ca0     09c1          movi    030h,a1
         00003cb0     0030  
     892 00003cc0     8020          move    a1,*a0,W
     893 00003cd0     09c1          movi    8,a1
         00003ce0     0008  
     894 00003cf0     3c21          dsjs    a1,$
     895 00003d00     09c1          movi    020h,a1
         00003d10     0020  
     896 00003d20     8020          move    a1,*a0,W
     897 00003d30     09e1          movi    5000000,a1
         00003d40 004c4b40  
     898 00003d60           dsp_loop1
     899 00003d60     0580          move    a0,@WDOG_BONE,W
         00003d70 01860030  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   21

     900 00003d90     05a2          move    @SOUNDIRQ,a2,W
         00003da0 01860040  
     901 00003dc0     1ea2          btst    B_SDAV,a2
     902 00003dd0     ca0e          jrz     dsp_lp1_exit
     903 00003de0     3d21          dsjs    a1,dsp_loop1
     904 00003df0     09ea          movi    DSP,a10
         00003e00 000174b0' 
     905 00003e20     1820          movk    1,a0
     906 00003e30     4c0b          move    a0,a11
     907 00003e40     102b          inc     a11
     908 00003e50                   FCALL   CHIPOUT,b5
     909 00003e90     1820          movk    1,a0
     910 00003ea0     c000          jruc    dspcheck_done
         00003eb0     008d  
     911 00003ec0           dsp_lp1_exit
     912 00003ec0     05a0          move    @SOUND,a0,W
         00003ed0 01680000  
     913 00003ef0     0b80          andi    0ffh,a0
         00003f00 ffffff00  
     914 00003f20     0b40          cmpi    079h,a0
         00003f30     ff86  
     915 00003f40     ca0c          jrz     dsp_next_byte
     916 00003f50     09ea          movi    DSP,a10
         00003f60 000174b0' 
     917 00003f80     1820          movk    1,a0
     918 00003f90     4c0b          move    a0,a11
     919 00003fa0     102b          inc     a11
     920 00003fb0                   FCALL   CHIPOUT,b5
     921 00003ff0     1820          movk    1,a0
     922 00004000     c078          jruc    dspcheck_done
     923 00004010           dsp_next_byte
     924 00004010     09e1          movi    10000000,a1
         00004020 00989680  
     925 00004040           dsp_loop2
     926 00004040     0580          move    a0,@WDOG_BONE,W
         00004050 01860030  
     927 00004070     05a2          move    @SOUNDIRQ,a2,W
         00004080 01860040  
     928 000040a0     1ea2          btst    B_SDAV,a2
     929 000040b0     ca0d          jrz     dsp_lp2_exit
     930 000040c0     3d21          dsjs    a1,dsp_loop2
     931 000040d0     09ea          movi    DSP,a10
         000040e0 000174b0' 
     932 00004100     1820          movk    1,a0
     933 00004110     4c0b          move    a0,a11
     934 00004120     102b          inc     a11
     935 00004130                   FCALL   CHIPOUT,b5
     936 00004170     1820          movk    1,a0
     937 00004180     c060          jruc    dspcheck_done
     938 00004190           dsp_lp2_exit
     939 00004190     09ea          movi    DSP,a10
         000041a0 000174b0' 
     940 000041c0     5600          clr     a0
     941 000041d0     4c0b          move    a0,a11
     942 000041e0     102b          inc     a11
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   22

     943 000041f0                   FCALL   CHIPOUT,b5
     944 00004230     05a0          move    @SOUND,a0,W
         00004240 01680000  
     945 00004260     0b80          andi    0ffh,a0
         00004270 ffffff00  
     946 00004290     4c0e          move    a0,a14
     947 000042a0     5600          clr     a0
     948 000042b0     4c00          move    a0,a0
     949 000042c0     ca02          jrz     dsp_ok
     950 000042d0     1820          movk    1,a0
     951 000042e0     c04a          jruc    dspcheck_done
     952 000042f0           dsp_ok
     953 000042f0     5600          clr     a0
     954 00004300     0780          move    a0,@_snd_status,L
         00004310 00000100- 
     955 00004330     0bee          subi    2,a14
         00004340     fffd  
     956 00004350     058e          move    a14,@_snd_diag_code,W
         00004360 00000160- 
     957 00004380     57ce          clr     a14
     958 00004390     058e          move    a14,@_snd_chip_count,W
         000043a0 00000170- 
     959 000043c0     09ec          movi    SROMTAB,a12,L
         000043d0 00013b50' 
     960 000043f0           snd_romok_loop
     961 000043f0     978a          move    *a12+,a10,L
     962 00004400     ca1c          jrz     sndrom_done
     963 00004410     05ae          move    @_snd_chip_count,a14,W
         00004420 00000170- 
     964 00004440     05ab          move    @_snd_diag_code,a11,W
         00004450 00000160- 
     965 00004470     496e          cmp     a11,a14
     966 00004480     cb05          jrnz    sndchip_ok
     967 00004490     184b          movk    2,a11
     968 000044a0     078b          move    a11,@_snd_status,L
         000044b0 00000100- 
     969 000044d0     c001          jruc    snd_chip_out
     970 000044e0           sndchip_ok
     971 000044e0     182b          movk    1,a11
     972 000044f0           snd_chip_out
     973 000044f0     102e          addk    1,a14
     974 00004500     058e          move    a14,@_snd_chip_count,W
         00004510 00000170- 
     975 00004530                   FCALL   CHIPOUT,b5
     976 00004570     07ab          move    @_snd_status,a11,L
         00004580 00000100- 
     977 000045a0     cae4          jrz     snd_romok_loop
     978 000045b0     1820          movk    1,a0
     979 000045c0     c01c          jruc    dspcheck_done
     980 000045d0           sndrom_done
     981 000045d0     09ec          movi    SNDRAMTAB,a12,L
         000045e0 00013bf0' 
     982 00004600           snd_ramok_loop
     983 00004600     978a          move    *a12+,a10,L
     984 00004610     ca16          jrz     sndram_done
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   23

     985 00004620     05ae          move    @_snd_diag_code,a14,W
         00004630 00000160- 
     986 00004650     0b4e          cmpi    8,a14
         00004660     fff7  
     987 00004670     cb05          jrnz    sndram_ok
     988 00004680     184b          movk    2,a11
     989 00004690     078b          move    a11,@_snd_status,L
         000046a0 00000100- 
     990 000046c0     c001          jruc    snd_ram_out
     991 000046d0           sndram_ok
     992 000046d0     182b          movk    1,a11
     993 000046e0           snd_ram_out
     994 000046e0                   FCALL   CHIPOUT,b5
     995 00004720     07ab          move    @_snd_status,a11,L
         00004730 00000100- 
     996 00004750     caea          jrz     snd_ramok_loop
     997 00004760     1820          movk    1,a0
     998 00004770     c001          jruc    dspcheck_done
     999 00004780           sndram_done
    1000 00004780     5600          clr     a0
    1001 00004790           dspcheck_done
    1002 00004790     09e1          movi    1000000,a1
         000047a0 000f4240  
    1003 000047c0           dspcheck_wait_exit_loop
    1004 000047c0     0582          move    a2,@WDOG_BONE,W
         000047d0 01860030  
    1005 000047f0     3c81          dsjs    a1,dspcheck_wait_exit_loop
    1006 00004800     07b6          move    @_b6_save,b6,L
         00004810 00000120- 
    1007 00004830                   FRET    b6
    1008                    
    1009                    
    1010                    **************************************************************************
    1011                    *                                                                        *
    1012                    *       CPUTEST                                                          *
    1013                    *                                                                        *
    1014                    *       THE ACTUAL CPU TEST STUFF                                        *
    1015                    *                                                                        *
    1016                    *       ENTRY                                                            *
    1017                    *               SP      RETURN ADDRESS                                   *
    1018                    *                                                                        *
    1019                    *       EXIT                                                             *
    1020                    *               WHO KNOWS                                                *
    1021                    *                                                                        *
    1022                    *       CALL                                                             *
    1023                    *               FCALL   CPUTEST,SP                                       *
    1024                    *                                                                        *
    1025                    **************************************************************************
    1026                    ;CPUT_X .EQU    25      ;TEXT X POSITION
    1027                    ;CPUT_Y1        .EQU    128     ;TEXT ROW 1 Y POSITION
    1028                    ;CPUT_Y2        .EQU    140     ;TEXT ROW 2 Y POSITION
    1029                    ;CPUT_Y3        .EQU    152     ;TEXT ROW 3 Y POSITION
    1030                    ;CPUT_CLRS .EQU [CPUT_Y3-CPUT_Y1+15,200-CPUT_X]
    1031                    
    1032              00b4  CPUT_X  .EQU    180     ;TEXT X POSITION
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   24

    1033              0076  CPUT_Y1 .EQU    118     ;TEXT ROW 1 Y POSITION
    1034              0082  CPUT_Y2 .EQU    130     ;TEXT ROW 2 Y POSITION
    1035              008e  CPUT_Y3 .EQU    142     ;TEXT ROW 3 Y POSITION
    1036          002200d1  CPUT_CLRS .EQU  [CPUT_Y3-CPUT_Y1+10,389-CPUT_X]
    1037                    
    1038          007600b4  CPUT_CLR .EQU   [CPUT_Y1,CPUT_X]        ;CLEAR START
    1039                    
    1040 00004840           CPUTEST:
    1041 00004840     0580          move    a0,@WDOG_BONE           ;Reset
         00004850 01860030  
    1042                    ;       move    @_watchdog_addr,a0,L
    1043                    ;       move    a0,*a0
    1044 00004870                   FCALL   INITCOLR,B5             ;HEY! IT LOOKS BETTER THIS WAY
    1045 000048b0                   FCALL   DSCRCLR,B6              ;BLOW THE SCREEN OR IT LOOKS TOO UGLY
    1046                    
    1047 000048f0     5610          CLR     B0
    1048                    
    1049 00004900     09cd          movi    SYSCINIT,a13
         00004910     2880  
    1050                    
    1051 00004920     058d          MOVE    A13,@SYSCTRL,W          ;MAKE SURE WE'RE WRITING TO BIT MAP
         00004930 01b00000  
    1052 00004950     09ee          MOVI    VRAMCHIPS,A14           ;VERIFY BIT MAP
         00004960 00013c70' 
    1053 00004980                   FCALL   RAMCHECK,B5
    1054                    
    1055                    ;       ENABLE VIDEO PALETTE MAP ACCESS
    1056                    
    1057                    
    1058                    
    1059                    ;       movi    PALENB,a13
    1060 000049c0     09cd          movi    SYSCINIT,a13
         000049d0     2880  
    1061 000049e0     0b8d          andni   PALENB,a13
         000049f0 00000800  
    1062                    
    1063 00004a10     058d          MOVE    A13,@SYSCTRL,W
         00004a20 01b00000  
    1064 00004a40     09ee          MOVI    PALCHIPS,A14            ;VERIFY OBJECT PALETTE RAM
         00004a50 00013ff0' 
    1065 00004a70                   FCALL   RAMCHECK,B5
    1066 00004ab0     4e1c          MOVE    B0,A12
    1067                    
    1068                    ;       DISABLE VIDEO PALETTE MAP ACCESS
    1069                    
    1070                    
    1071 00004ac0     09cd          movi    SYSCINIT,a13
         00004ad0     2880  
    1072                    
    1073 00004ae0     058d          MOVE    A13,@SYSCTRL,W
         00004af0 01b00000  
    1074 00004b10                   FCALL   INITCOLR,B5             ;RELOAD THE COLORS
    1075 00004b50                   FCALL   DSCRCLR,B6
    1076                    
    1077 00004b90                   FCALL   CPUDRAW,B5              ;SHOW THE CPU
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   25

    1078 00004bd0     09ea          MOVI    CPU,A10                 ;WE GOT THIS FAR, CPU MUST BE OK
         00004be0 00015290' 
    1079 00004c00     09cb          MOVI    1,A11
         00004c10     0001  
    1080 00004c20                   FCALL   CHIPOUT,B5
    1081                    
    1082 00004c60     09e9          MOVI    VRAMTAB,A9
         00004c70 000139f0' 
    1083 00004c90                   FCALL   CHIPTABLE,B5            ;PLOT OUT THE CHIP TABLE
    1084                    
    1085 00004cd0     4d8c          MOVE    A12,A12
    1086 00004ce0     ca0f          JRZ     PSRAMCK
    1087 00004cf0           PBADRAM
    1088 00004cf0     09e0          MOVI    RAMBADMESS,A0
         00004d00 00006960' 
    1089 00004d20     09e1          MOVI    [CPUT_Y1,CPUT_X],A1
         00004d30 007600b4  
    1090 00004d50     5642          CLR     A2
    1091 00004d60     09c3          MOVI    COLOR_RED,A3
         00004d70     0101  
    1092 00004d80                   FCALL   STRING,B6
    1093 00004dc0     c000          JRUC    PCPUBAD
         00004dd0     0127  
    1094                    
    1095 00004de0           PSRAMCK
    1096 00004de0     09e0          MOVI    SRAMCHECK,A0
         00004df0 00014250' 
    1097 00004e10     09e1          MOVI    [CPUT_Y1,CPUT_X],A1
         00004e20 007600b4  
    1098 00004e40     5642          CLR     A2
    1099 00004e50     09c3          MOVI    COLOR_YELLOW,A3
         00004e60     0505  
    1100 00004e70                   FCALL   STRING,B6
    1101                    
    1102 00004eb0     5610          CLR     B0
    1103 00004ec0     09ee          MOVI    SRAMCHIPS,A14           ;VERIFY SCRATCH RAMS
         00004ed0 00014300' 
    1104 00004ef0                   FCALL   RAMCHECK,B5
    1105 00004f30     4e1c          MOVE    B0,A12
    1106                    
    1107 00004f40     09e0          MOVI    CPUT_CLR,A0
         00004f50 007600b4  
    1108 00004f70     09e1          MOVI    CPUT_CLRS,A1
         00004f80 002200d1  
    1109 00004fa0     09c2          MOVI    COLOR_BLACK,A2
         00004fb0     0808  
    1110 00004fc0                   FCALL   RECTANGLE,B6
    1111                    
    1112 00005000     4d8c          MOVE    A12,A12
    1113 00005010     cbcd          JRNZ    PBADRAM
    1114                    
    1115                    *WE CHECK ON THE DMA HERE
    1116 00005020           PDMACK
    1117 00005020     09e0          MOVI    DMACMESS,A0
         00005030 000065b0' 
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   26

    1118 00005050     09e1          MOVI    [CPUT_Y1,CPUT_X],A1
         00005060 007600b4  
    1119 00005080     5642          CLR     A2
    1120 00005090     09c3          MOVI    COLOR_YELLOW,A3
         000050a0     0505  
    1121 000050b0                   FCALL   STRING,B6
    1122                    
    1123 000050f0                   FCALL   DMACHECK,B5             ;CHECK THE DMA
    1124 00005130     09ea          MOVI    DMA,A10
         00005140 00015360' 
    1125 00005160     4c0b          MOVE    A0,A11
    1126 00005170     102b          INC     A11                     ;GREEN/RED
    1127 00005180                   FCALL   CHIPOUT,B5
    1128                    
    1129 000051c0     09e0          MOVI    CPUT_CLR,A0
         000051d0 007600b4  
    1130 000051f0     09e1          MOVI    CPUT_CLRS,A1
         00005200 002200d1  
    1131 00005220     09c2          MOVI    COLOR_BLACK,A2
         00005230     0808  
    1132 00005240                   FCALL   RECTANGLE,B6
    1133                    
    1134 00005280     4d8c          MOVE    A12,A12
    1135 00005290     cb00          jrnz    PBADDMA
         000052a0     00b5  
    1136                    
    1137 000052b0           PROMCK
    1138 000052b0     05a0          move    @COINS,a0,W             ; save for abort checking
         000052c0 01860030  
    1139 000052e0     0b80          andi    664h,a0
         000052f0 fffff99b  
    1140 00005310     0580          move    a0,@SWSET2,W
         00005320 00000020- 
    1141                    
    1142 00005340     09e0          MOVI    ROMCMESS,A0
         00005350 00006880' 
    1143 00005370     09e1          MOVI    [CPUT_Y1,CPUT_X],A1
         00005380 007600b4  
    1144 000053a0     5642          CLR     A2
    1145 000053b0     09c3          MOVI    COLOR_YELLOW,A3
         000053c0     0505  
    1146 000053d0                   FCALL   STRING,B6
    1147                    
    1148 00005410     09e0          MOVI    CPUEXIT1_MESS,A0
         00005420 00006d20' 
    1149 00005440     09e1          MOVI    [CPUT_Y2,CPUT_X],A1
         00005450 008200b4  
    1150 00005470     5642          CLR     A2
    1151 00005480     09c3          MOVI    COLOR_YELLOW,A3
         00005490     0505  
    1152 000054a0                   FCALL   STRING,B6
    1153                    
    1154 000054e0     09e0          MOVI    CPUEXIT2_MESS,A0
         000054f0 00006db0' 
    1155 00005510     09e1          MOVI    [CPUT_Y3,CPUT_X],A1
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   27

         00005520 008e00b4  
    1156 00005540     5642          CLR     A2
    1157 00005550     09c3          MOVI    COLOR_YELLOW,A3
         00005560     0505  
    1158 00005570                   FCALL   STRING,B6
    1159                    
    1160 000055b0     5610          CLR     B0                      ;KEEP THE STATS HERE
    1161                    
    1162 000055c0     09ee          MOVI    PROMCHIPS,A14
         000055d0 000143b0' 
    1163 000055f0                   FCALL   ROMCHECK,B5
    1164 00005630     cb07          JRNZ    PROMABORT
    1165                    
    1166 00005640     09ee          MOVI    IROMCHIPS,A14
         00005650 00018700' 
    1167 00005670                   FCALL   ROMCHECK,B5
    1168 000056b0           PROMABORT
    1169 000056b0     4e1c          MOVE    B0,A12
    1170 000056c0     09e0          MOVI    CPUT_CLR,A0
         000056d0 007600b4  
    1171 000056f0     09e1          MOVI    CPUT_CLRS,A1
         00005700 002200d1  
    1172 00005720     09c2          MOVI    COLOR_BLACK,A2
         00005730     0808  
    1173 00005740                   FCALL   RECTANGLE,B6
    1174                    
    1175 00005780     4d8c          MOVE    A12,A12
    1176 00005790     cb72          JRNZ    PBADROM
    1177                    
    1178                    *       Sound Subsystem Check
    1179                    
    1180 000057a0     09e0          movi    SNDCMESS,a0
         000057b0 000069d0' 
    1181 000057d0     09e1          movi    [CPUT_Y1,CPUT_X],a1
         000057e0 007600b4  
    1182 00005800     5642          clr     a2
    1183 00005810     09c3          movi    COLOR_YELLOW,a3
         00005820     0505  
    1184 00005830                   FCALL   STRING,b6
    1185 00005870                   FCALL   SNDCHECK,b6
    1186 000058b0     4c0c          move    a0,a12
    1187 000058c0     09e0          movi    CPUT_CLR,a0
         000058d0 007600b4  
    1188 000058f0     09e1          movi    CPUT_CLRS,a1
         00005900 002200d1  
    1189 00005920     09c2          movi    COLOR_BLACK,a2
         00005930     0808  
    1190 00005940                   FCALL   RECTANGLE,b6
    1191 00005980     4d8c          move    a12,a12
    1192 00005990     cb38          jrnz    PBADSND
    1193                    
    1194 000059a0     09e0          movi    PICCMESS,a0
         000059b0 00006b20' 
    1195 000059d0     09e1          movi    [CPUT_Y1,CPUT_X],a1
         000059e0 007600b4  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   28

    1196 00005a00     5642          clr     a2
    1197 00005a10     09c3          movi    COLOR_YELLOW,a3
         00005a20     0505  
    1198 00005a30                   FCALL   STRING,b6
    1199 00005a70                   FCALL   PICCHECK,b5
    1200 00005ab0     09ea          movi    PIC,a10
         00005ac0 000170a0' 
    1201 00005ae0     4c0b          move    a0,a11
    1202 00005af0     4c0c          move    a0,a12
    1203 00005b00     102b          inc     a11
    1204 00005b10                   FCALL   CHIPOUT,b5
    1205 00005b50     09e0          movi    CPUT_CLR,a0
         00005b60 007600b4  
    1206 00005b80     09e1          movi    CPUT_CLRS,a1
         00005b90 002200d1  
    1207 00005bb0     09c2          movi    COLOR_BLACK,a2
         00005bc0     0808  
    1208 00005bd0                   FCALL   RECTANGLE,b6
    1209 00005c10     4d8c          move    a12,a12
    1210 00005c20     ca00          JRZ     PCPUGOOD
         00005c30     0088  
    1211 00005c40     09e0          movi    PICBADMESS,a0
         00005c50 00006bb0' 
    1212 00005c70     09e1          movi    [CPUT_Y1,CPUT_X],a1
         00005c80 007600b4  
    1213 00005ca0     5642          clr     a2
    1214 00005cb0     09c3          movi    COLOR_RED,a3
         00005cc0     0101  
    1215 00005cd0                   FCALL   STRING,b6
    1216 00005d10     c033          jruc    PCPUBAD
    1217 00005d20           PBADSND
    1218 00005d20     09e0          movi    SNDBADMESS,a0
         00005d30 00006a90' 
    1219 00005d50     09e1          movi    [CPUT_Y1,CPUT_X],a1
         00005d60 007600b4  
    1220 00005d80     5642          clr     a2
    1221 00005d90     09c3          movi    COLOR_RED,a3
         00005da0     0101  
    1222 00005db0                   FCALL   STRING,b6
    1223 00005df0     c025          jruc    PCPUBAD
    1224 00005e00           PBADDMA
    1225 00005e00     4d80          move    a12,a0                   ; DMA ERROR MESSAGE
    1226 00005e10     09e1          MOVI    [CPUT_Y1,CPUT_X],A1
         00005e20 007600b4  
    1227 00005e40     5642          CLR     A2
    1228 00005e50     09c3          MOVI    COLOR_RED,A3
         00005e60     0101  
    1229 00005e70                   FCALL   STRING,B6
    1230 00005eb0     c019          JRUC    PCPUBAD
    1231 00005ec0           PBADROM
    1232 00005ec0     09e0          MOVI    CPUT_CLR,A0
         00005ed0 007600b4  
    1233 00005ef0     09e1          MOVI    CPUT_CLRS,A1
         00005f00 002200d1  
    1234 00005f20     09c2          MOVI    COLOR_BLACK,A2
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   29

         00005f30     0808  
    1235 00005f40                   FCALL   RECTANGLE,B6
    1236 00005f80     09e0          MOVI    ROMBADMESS,A0
         00005f90 000068f0' 
    1237 00005fb0     09e1          MOVI    [CPUT_Y1,CPUT_X],A1
         00005fc0 007600b4  
    1238 00005fe0     5642          CLR     A2
    1239 00005ff0     09c3          MOVI    COLOR_RED,A3
         00006000     0101  
    1240 00006010                   FCALL   STRING,B6
    1241                    
    1242 00006050           PCPUBAD
    1243 00006050     09e0          MOVI    CPUPAUSE,A0
         00006060 00006c90' 
    1244 00006080     09e1          MOVI    [CPUT_Y2,CPUT_X],A1
         00006090 008200b4  
    1245 000060b0     5642          CLR     A2
    1246 000060c0     09c3          MOVI    COLOR_RED,A3
         000060d0     0101  
    1247 000060e0                   FCALL   STRING,B6
    1248                    
    1249 00006120           PCPUWAIT
    1250 00006120     0580          move    a0,@WDOG_BONE           ;Reset
         00006130 01860030  
    1251 00006150     09c0          movi    CPU_ERROR_SND,a0
         00006160     005e  
    1252                    ;       MOVE    A0,@SOUND,W             ; LET HIM HEAR IT
    1253                    
    1254 00006170     4fa5          MOVE    A13,B5
    1255 00006180                   PAUSE   10000,B6,a0
    1256 00006220     07a0          move    @SWITCH,a0,L
         00006230 01860000  
    1257 00006250     0b80          andi    70707070h,a0
         00006260 8f8f8f8f  
    1258 00006280     0780          move    a0,@SWSET1,L
         00006290 00000000- 
    1259                    ;       move    @COINS,a0,W
    1260                    ;       andi    664h,a0
    1261                    ;       move    a0,@SWSET2,W
    1262 000062b0     4e01          MOVE    A0,B1
    1263 000062c0     09d0          MOVI    -1,B0                   ; ASSUME DON'T TIMEOUT
         000062d0     ffff  
    1264 000062e0     0b6f          CMPI    DIAGSP,SP
         000062f0 ffffcc2f' 
    1265 00006310     ca07          JRZ     PCPUTMP1
    1266 00006320     0b6f          CMPI    BURNSP,SP
         00006330 ffffcd7f' 
    1267 00006350     ca03          JRZ     PCPUTMP1
    1268 00006360     09f0          MOVI    200000H,B0
         00006370 00200000  
    1269 00006390           PCPUTMP1
    1270 00006390     0580          move    a0,@WDOG_BONE           ;Reset
         000063a0 01860030  
    1271 000063c0     4c10          MOVE    B0,B0
    1272 000063d0     ce02          JRN     PCPUNOTIMEOUT
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   30

    1273 000063e0     1430          DEC     B0
    1274 000063f0     ca18          JRZ     PCPURET                 ; TIMEOUT HERE
    1275 00006400           PCPUNOTIMEOUT
    1276 00006400     07a0          move    @SWITCH,a0,L            ; gotta see if time to leave
         00006410 01860000  
    1277 00006430     0b80          andi    70707070h,a0
         00006440 8f8f8f8f  
    1278 00006460     07a1          move    @SWSET1,a1,L
         00006470 00000000- 
    1279 00006490     4801          cmp     a0,a1
    1280 000064a0     cb0d          jrnz    PCPURET
    1281                    ;       move    @COINS,a0,W
    1282                    ;       andi    664h,a0
    1283                    ;       move    @SWSET2,a1,W
    1284                    ;       CMP     A0,A1
    1285                    ;       JRNZ    PCPURET
    1286 000064b0     c0ed          JRUC    PCPUTMP1
    1287 000064c0           PCPUGOOD
    1288                    ;        movi    1000,b5                 ;leave picture up a bit
    1289                    ;PCPULOOP:
    1290                    ;       movb    a0,@WDOG_BONE           ;Reset watchdog
    1291 000064c0                   PAUSE   15000,B6,a0
    1292                    ;        dsjs    b5,PCPULOOP
    1293                    
    1294 00006560     5600          CLR     A0
    1295 00006570     c001          JRUC    PCPUREALRET
    1296 00006580           PCPURET
    1297 00006580     1820          MOVK    1,A0
    1298 00006590           PCPUREALRET
    1299 00006590     4c00          MOVE    A0,A0
    1300 000065a0                   FRET    SP
    1301                    
    1302 000065b0           DMACMESS
    1303 000065b0       43          .STRING "CHECKING CUSTOM",0
    1304 00006630                   .EVEN
    1305                    
    1306 00006630           DMATMOUTMESS
    1307 00006630       43          .STRING "CUSTOM CHIP U33 TIMEOUT",0
    1308 000066f0                   .EVEN
    1309 000066f0           DMADATAMESS
    1310 000066f0       43          .STRING "CUSTOM CHIP U33 BAD DATA",0
    1311 000067c0                   .EVEN
    1312 000067c0           DMAPALMESS
    1313 000067c0       43          .STRING "CUSTOM CHIP U33 PROBLEM",0
    1314 00006880                   .EVEN
    1315                    
    1316 00006880           ROMCMESS
    1317 00006880       43          .STRING "CHECKING ROMS",0
    1318 000068f0                   .EVEN
    1319 000068f0           ROMBADMESS
    1320 000068f0       52          .STRING "ROM CHIPS BAD",0
    1321 00006960                   .EVEN
    1322                    
    1323 00006960           RAMBADMESS
    1324 00006960       52          .STRING "RAM CHIPS BAD",0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   31

    1325 000069d0                   .EVEN
    1326                    
    1327 000069d0           SNDCMESS
    1328 000069d0       43          .string "CHECKING SOUND SECTION",0
    1329 00006a90                   .even
    1330 00006a90           SNDBADMESS
    1331 00006a90       53          .string "SOUND SECTION BAD",0
    1332 00006b20                   .even
    1333 00006b20           PICCMESS
    1334 00006b20       43          .string "CHECKING PIC CHIP",0
    1335 00006bb0                   .even
    1336 00006bb0           PICBADMESS
    1337 00006bb0       50          .string "PIC CHIP BAD",0
    1338 00006c20                   .even
    1339                    
    1340 00006c20           CPUGOOD
    1341 00006c20       43          .STRING "CPU BOARD OK",0
    1342 00006c90                   .EVEN
    1343                    
    1344 00006c90           CPUPAUSE
    1345 00006c90       50          .STRING "PRESS ANY BUTTON",0
    1346 00006d20                   .EVEN
    1347                    
    1348 00006d20           CPUEXIT1_MESS
    1349 00006d20       48          .STRING "HOLD START BUTTON",0
    1350 00006db0                   .EVEN
    1351 00006db0           CPUEXIT2_MESS
    1352 00006db0       54          .STRING "TO EXIT.",0
    1353 00006e00                   .EVEN
    1354                    
    1355                    
    1356                    **************************************************************************
    1357                    *                                                                        *
    1358                    *       CPUDRAW                                                          *
    1359                    *                                                                        *
    1360                    *       PLOT THE CPU BOARD AND DRAW ALL THE CHIPS                        *
    1361                    *                                                                        *
    1362                    *       ENTRY                                                            *
    1363                    *               B5      RETURN ADDRESS                                   *
    1364                    *                                                                        *
    1365                    *       EXIT                                                             *
    1366                    *               NOTHING                                                  *
    1367                    *                                                                        *
    1368                    **************************************************************************
    1369                    
    1370 00006e00           CPUDRAW:
    1371 00006e00     09e9          MOVI    CPU_VECS,A9             ; POINT AT VECTOR TABLE
         00006e10 00014550' 
    1372 00006e30           CPUDLP1
    1373 00006e30     9522          MOVE    *A9+,A2,W               ; GET COLOR
    1374 00006e40     ca07          JRZ     CPUD1
    1375 00006e50     9720          MOVE    *A9+,A0,L               ; START POINT
    1376 00006e60     9721          MOVE    *A9+,A1,L               ; END POINT
    1377 00006e70                   FCALL   HVLINE,B6
    1378 00006eb0     c0f7          JRUC    CPUDLP1
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   32

    1379 00006ec0           CPUD1
    1380 00006ec0     4ebd          MOVE    B5,A13
    1381 00006ed0                   FCALL   CHIPPLOT,B5             ; PLOT ALL THE CHIPS
    1382                    
    1383 00006f10     09e0          MOVI    BOARDSTRING,A0  
         00006f20 000070a0' 
    1384 00006f40     09e1          movi    [15,275],a1             ;
         00006f50 000f0113  
    1385 00006f70     5642          CLR     A2
    1386 00006f80     09c3          MOVI    COLOR_WHITE,A3
         00006f90     0202  
    1387 00006fa0                   FCALL   STRING,B6
    1388 00006fe0     09e0          MOVI    BOARDSTRING2,A0
         00006ff0 000070e0' 
    1389 00007010     09e1          movi    [25,275],a1             ;
         00007020 00190113  
    1390 00007040                   FCALL   STRING,B6
    1391 00007080     4fa5          MOVE    A13,B5
    1392 00007090                   FRET    B5
    1393                    
    1394 000070a0           BOARDSTRING
    1395 000070a0       41          .STRING "A-20286",0       ;
    1396 000070e0                   .EVEN
    1397                    
    1398 000070e0           BOARDSTRING2
    1399 000070e0       4f          .STRING "OPEN ICE",0            ;
    1400 00007130                   .EVEN
    1401                    
    1402                    **************************************************************************
    1403                    *                                                                        *
    1404                    *       CHIPTABLE                                                        *
    1405                    *                                                                        *
    1406                    *       UPDATE A LIST OF CHIPS, BASED ON THEIR VALUES IN A12             *
    1407                    *                                                                        *
    1408                    *       ENTRY                                                            *
    1409                    *               A9      POINTER TO TABLE                                 *
    1410                    *               A12     LIST OF ON/OFF BITS                              *
    1411                    *               B5      RETURN ADDRESS                                   *
    1412                    *                                                                        *
    1413                    *       EXIT                                                             *
    1414                    *               NOTHING                                                  *
    1415                    *                                                                        *
    1416                    **************************************************************************
    1417                    
    1418 00007130           CHIPTABLE:
    1419 00007130     4ebe          MOVE    B5,A14
    1420 00007140           CTABLOOP
    1421 00007140     972a          MOVE    *A9+,A10,L              ; GET POINTER TO CHIP RECORD
    1422 00007150     ca0b          JRZ     CTABDONE
    1423 00007160     182b          MOVK    1,A11
    1424 00007170     b540          MOVE    *A10(CMNUM),A0,W        ; GET THE BIT NUMBER
         00007180     0000  
    1425 00007190     4a0c          BTST    A0,A12                  ; CHECK BIT NUMBER
    1426 000071a0     ca01          JRZ     CTABL2
    1427 000071b0     184b          MOVK    2,A11
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   33

    1428 000071c0           CTABL2
    1429 000071c0                   FCALL   CHIPOUT,B5
    1430 00007200     c0f3          JRUC    CTABLOOP
    1431                    
    1432 00007210           CTABDONE
    1433 00007210     4fc5          MOVE    A14,B5
    1434 00007220                   FRET    B5
    1435                    
    1436                    **************************************************************************
    1437                    *                                                                        *
    1438                    *       CHIPPLOT                                                         *
    1439                    *                                                                        *
    1440                    *       PLOT OUT THE CHIP LIST                                           *
    1441                    *                                                                        *
    1442                    *       ENTRY                                                            *
    1443                    *               B5      RET VALUE                                        *
    1444                    *                                                                        *
    1445                    *       EXIT                                                             *
    1446                    *               NOTHING                                                  *
    1447                    **************************************************************************
    1448                    
    1449 00007230           CHIPPLOT:
    1450 00007230     4ebe          MOVE    B5,A14
    1451 00007240     09ea          MOVI    CPU_CHIPS,A10
         00007250 00014a70' 
    1452 00007270           CPPLOTLOOP
    1453 00007270     576b          CLR     A11
    1454 00007280     8740          MOVE    *A10,A0,L
    1455 00007290     ca07          JRZ     CPPLOTDONE
    1456 000072a0                   FCALL   CHIPOUT,B5
    1457 000072e0     0b0a          ADDI    CMEND,A10
         000072f0     00d0  
    1458 00007300     c0f6          JRUC    CPPLOTLOOP
    1459                    
    1460 00007310           CPPLOTDONE
    1461 00007310     4fc5          MOVE    A14,B5
    1462 00007320                   FRET    B5
    1463                    
    1464                    **************************************************************************
    1465                    *                                                                        *
    1466                    *       CHIPOUT                                                          *
    1467                    *                                                                        *
    1468                    *       ACTUALLY PLOT THE CHIP                                           *
    1469                    *                                                                        *
    1470                    *       ENTRY                                                            *
    1471                    *               A10     POINTS TO CHIP TO PLOT                           *
    1472                    *               A11     COLOR OF CHIP                                    *
    1473                    *                               00 = OUTLINE                             *
    1474                    *                               01 = GREEN                               *
    1475                    *                               02 = RED                                 *
    1476                    *                               03 = GREY                                *
    1477                    *                                                                        *
    1478                    *       EXIT                                                             *
    1479                    *               A10     IS INTACT                                        *
    1480                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   34

    1481                    **************************************************************************
    1482                    
    1483 00007330           CHIPOUT:
    1484 00007330     b745          MOVE    *A10(CMLOC),A5,L        ; CHIP OUTLINE
         00007340     0010  
    1485 00007350     4ca6          MOVE    A5,A6
    1486 00007360     4ca7          MOVE    A5,A7
    1487 00007370     4ca8          MOVE    A5,A8
    1488 00007380     b540          MOVE    *A10(CMXSIZE),A0,W
         00007390     0030  
    1489 000073a0     4006          ADD     A0,A6
    1490 000073b0     4007          ADD     A0,A7
    1491 000073c0     b540          MOVE    *A10(CMYSIZE),A0,W
         000073d0     0040  
    1492 000073e0     2600          SLL     16,A0
    1493 000073f0     4007          ADD     A0,A7
    1494 00007400     4008          ADD     A0,A8
    1495 00007410     4ca0          MOVE    A5,A0
    1496 00007420     4cc1          MOVE    A6,A1
    1497 00007430     09c2          MOVI    COLOR_WHITE,A2
         00007440     0202  
    1498 00007450                   FCALL   HVLINE,B6
    1499 00007490     4cc0          MOVE    A6,A0
    1500 000074a0     4ce1          MOVE    A7,A1
    1501 000074b0     0b21          ADDI    [1,0],A1
         000074c0 00010000  
    1502 000074e0     09c2          MOVI    COLOR_WHITE,A2
         000074f0     0202  
    1503 00007500                   FCALL   HVLINE,B6
    1504 00007540     4d00          MOVE    A8,A0
    1505 00007550     4ce1          MOVE    A7,A1
    1506 00007560     09c2          MOVI    COLOR_WHITE,A2
         00007570     0202  
    1507 00007580                   FCALL   HVLINE,B6
    1508 000075c0     4ca0          MOVE    A5,A0
    1509 000075d0     4d01          MOVE    A8,A1
    1510 000075e0     09c2          MOVI    COLOR_WHITE,A2
         000075f0     0202  
    1511 00007600                   FCALL   HVLINE,B6
    1512                    ;
    1513 00007640     b540          MOVE    *A10(CMSTUFFED),A0,W    ; CHECK FOR STUFFED
         00007650     00c0  
    1514 00007660     cb01          JRNZ    CONOSTUF
    1515 00007670     186b          MOVK    3,A11                   ; WANT IT GREY, DUDE
    1516                    
    1517 00007680           CONOSTUF
    1518 00007680     4d6b          MOVE    A11,A11                 ; CHECK FOR FILLING THE CHIP
    1519 00007690     ca14          JRZ     CONOFILL
    1520 000076a0     b740          MOVE    *A10(CMLOC),A0,L
         000076b0     0010  
    1521 000076c0     0b20          ADDI    00010001H,A0
         000076d0 00010001  
    1522 000076f0     b741          MOVE    *A10(CMSIZE),A1,L
         00007700     0030  
    1523 00007710     0d01          SUBI    00010001H,A1            ; GET INTERNAL AREA
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   35

         00007720 fffefffe  
    1524 00007740     4d62          MOVE    A11,A2
    1525 00007750     2482          SLL     4,A2
    1526 00007760     0b22          ADDI    CHIPCOLORS,A2
         00007770 000079b0' 
    1527 00007790     8442          MOVE    *A2,A2,W                ;XUNIT  GET ME A COLOR
    1528 000077a0                   FCALL   RECTANGLE,B6
    1529 000077e0           CONOFILL
    1530 000077e0     b741          MOVE    *A10(CMPINLOC),A1,L     ; PIN LOCATION
         000077f0     00a0  
    1531 00007800     4ca0          MOVE    A5,A0
    1532 00007810     4020          ADD     A1,A0
    1533 00007820     09c1          MOVI    COLOR_WHITE,A1
         00007830     0202  
    1534 00007840                   FCALL   POINT,B6
    1535                    
    1536 00007880     b740          MOVE    *A10(CMSTRING),A0,L     ; CHIP TEXT
         00007890     0070  
    1537 000078a0     4ca1          MOVE    A5,A1
    1538 000078b0     b742          MOVE    *A10(CMOFFSET),A2,L
         000078c0     0050  
    1539 000078d0     4041          ADD     A2,A1
    1540 000078e0     b542          MOVE    *A10(CMDIR),A2,W
         000078f0     0090  
    1541 00007900     09c3          MOVI    COLOR_BLACK,A3
         00007910     0808  
    1542 00007920     4d6b          MOVE    A11,A11                 ; CHECK FOR COLOR
    1543 00007930     cb02          JRNZ    COBLACK
    1544 00007940     09c3          MOVI    COLOR_WHITE,A3
         00007950     0202  
    1545 00007960           COBLACK
    1546 00007960                   FCALL   STRING,B6
    1547 000079a0                   FRET    B5
    1548                    
    1549 000079b0           CHIPCOLORS:
    1550 000079b0     0808          .WORD   COLOR_BLACK
    1551 000079c0     0707          .WORD   COLOR_GREEN
    1552 000079d0     0101          .WORD   COLOR_RED
    1553 000079e0     0404          .WORD   COLOR_GREY
    1554                    
    1555                    **************************************************************************
    1556                    *                                                                        *
    1557                    *       DMACHECK                                                         *
    1558                    *                                                                        *
    1559                    *       CHECK THE DMA OUT                                                *
    1560                    *                                                                        *
    1561                    *       ENTRY                                                            *
    1562                    *               B5      RETURN ADDRESS                                   *
    1563                    *                                                                        *
    1564                    *       EXIT                                                             *
    1565                    *               A0      DMA STATUS                                       *
    1566                    *                               0 = GOOD                                 *
    1567                    *                               1 = BAD                                  *
    1568                    *                                                                        *
    1569                    **************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   36

    1570 000079f0           DMACHECK:       
    1571 000079f0     0570          setf    16,1,0
    1572 00007a00     05fe          MOVB    B14,@WDOG_BONE
         00007a10 01860030  
    1573                    
    1574 00007a30     09ce          movi    SYSCINIT,a14
         00007a40     2880  
    1575 00007a50     058e          move    a14,@SYSCTRL,W          ;make sure we're writing to bit map
         00007a60 01b00000  
    1576                    
    1577 00007a80     57ce          CLR     A14
    1578 00007a90     058e          MOVE    A14,@DMACTRL,W
         00007aa0 01a00010  
    1579 00007ac0     058e          MOVE    A14,@DMACTRL,W
         00007ad0 01a00010  
    1580                    
    1581 00007af0     09ee          MOVi    DMACF4,A14              ; XUNIT
         00007b00 00100000  
    1582 00007b20     058e          MOVE    A14,@DMACONFIG,W        ;ADJUST WINDOW RIGHT/LEFT BORDER
         00007b30 01a000e0  
    1583 00007b50     09ee          MOVI    [511,0],A14
         00007b60 01ff0000  
    1584 00007b80     078e          MOVE    A14,@DMAWINDOW,L        ;OPEN LEFT TO RIGHT
         00007b90 01a000c0  
    1585 00007bb0     09ee          MOVI    DMAWIN|DMACF4,A14
         00007bc0 00300000  
    1586 00007be0     058e          MOVE    A14,@DMACONFIG,W        ;ADJUST WINDOW RIGHT/LEFT BORDER
         00007bf0 01a000e0  
    1587 00007c10     09ee          MOVI    [511,0],A14
         00007c20 01ff0000  
    1588 00007c40     078e          MOVE    A14,@DMAWINDOW,L        ;FULL HEIGHT WINDOW
         00007c50 01a000c0  
    1589 00007c70     09ee          MOVI    [100H,100H],A14
         00007c80 01000100  
    1590 00007ca0     078e          MOVE    A14,@DMAXYSCL,L
         00007cb0 01a000a0  
    1591                    
    1592 00007cd0     09ee          MOVI    [1,448],A14             ;BLOW OUT TRADEMARK
         00007ce0 000101c0  
    1593 00007d00     078e          MOVE    A14,@DMAHVSIZE,L
         00007d10 01a00060  
    1594                    
    1595 00007d30     09ee          MOVI    IROM,A14                ;DMA LOGO LOCATION
         00007d40 02000000  
    1596 00007d60     078e          MOVE    A14,@DMASAG,L
         00007d70 01a00020  
    1597                    
    1598 00007d90     09ee          MOVI    [257,0],A14
         00007da0 01010000  
    1599 00007dc0     078e          MOVE    A14,@DMAHV,L            ;OFFSCREEN PLOT
         00007dd0 01a00040  
    1600                    
    1601 00007df0     09ce          MOVI    0505H,A14
         00007e00     0505  
    1602 00007e10     078e          MOVE    A14,@DMACMAPCON,L       ; CONST = 0, CMAP = 505h
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   37

         00007e20 01a00080  
    1603                    
    1604 00007e40     09ee          MOVI    [8003H,0],A14           ;USE IMAGE ROM - WRITE ALWAYS
         00007e50 80030000  
    1605 00007e70     078e          MOVE    A14,@DMAOFFCTL,L        ;KICK OFF THE DMA
         00007e80 01a00000  
    1606                    
    1607 00007ea0     5600          CLR     A0                      ; keep clear for error code
    1608 00007eb0     578c          CLR     A12                     ; keep clear for error message
    1609 00007ec0     09ce          MOVI    7FFFH,A14               ;LOAD TIMEOUT COUNTER
         00007ed0     7fff  
    1610 00007ee0           DMACWAIT
    1611 00007ee0     059e          MOVE    B14,@WDOG_BONE
         00007ef0 01860030  
    1612 00007f10     07a1          MOVE    @DMAGOREG,A1,L          ;DMA BUSY?
         00007f20 01a00000  
    1613 00007f40     cf02          JRNN    DMADONE                 ;BR = NO, TIME TO CHECK
    1614 00007f50     3d0e          DSJS    A14,DMACWAIT
    1615 00007f60     c025          JRUC    DMACBAD3                ;DMA TIMED OUT
    1616                    
    1617 00007f70           DMADONE
    1618 00007f70     0780          MOVE    A0,@DMACMAPCON,L        ;GET BACK TO A REAL PALETTE
         00007f80 01a00080  
    1619 00007fa0     09e5          MOVI    0101000H,A5             ;LINEAR SCREEN LOCATION OF DATA
         00007fb0 00101000  
    1620 00007fd0     09e1          MOVI    IROM+IROM,A1            ;DMA LOGO LOCATION
         00007fe0 04000000  
    1621 00008000     09c2          MOVI    448,A2                  ;NUMBER OF BYTES TO COMPARE
         00008010     01c0  
    1622 00008020           DMACLOOP
    1623 00008020     8ea3          MOVB    *A5,A3                  ;DESTINATION BYTE
    1624 00008030     8e24          MOVB    *A1,A4                  ;SOURCE BYTE
    1625 00008040     1105          ADDK    8,A5
    1626 00008050     1101          ADDK    8,A1
    1627 00008060     4864          CMP     A3,A4
    1628 00008070     cb17          JRNZ    DMACBAD2                        ;BR = DATA ERROR
    1629 00008080     3ce2          DSJS    A2,DMACLOOP
    1630                    *
    1631                    *CHECK DATA IN OBJECT PALETTE
    1632                    *
    1633 00008090     09cd          movi    SYSCINIT,a13
         000080a0     2880  
    1634 000080b0     0b8d          andni   PALENB,a13
         000080c0 00000800  
    1635 000080e0     058d          move    a13,@SYSCTRL,W          ;enable palette
         000080f0 01b00000  
    1636                    
    1637 00008110     09e1          MOVI    0101000H,A1             ;LOCATION
         00008120 00101000  
    1638 00008140     09c2          MOVI    224,A2                  ;NUMBER OF WORDS TO COMPARE
         00008150     00e0  
    1639 00008160           DMACLOOP2
    1640 00008160     9423          MOVE    *A1+,A3,W
    1641 00008170     0b43          CMPI    0505H,A3
         00008180     fafa  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   38

    1642 00008190     cb08          JRNZ    DMACBAD1
    1643 000081a0     3ca2          DSJS    A2,DMACLOOP2
    1644 000081b0     c011          JRUC    DMACRET
    1645                    
    1646 000081c0           DMACBAD3:
    1647 000081c0     09ec          movi    DMATMOUTMESS,a12         ; DMA TIME OUT message
         000081d0 00006630' 
    1648 000081f0           DMACBAD2:
    1649 000081f0     09ec          movi    DMADATAMESS,a12          ; DMA BAD DATA message
         00008200 000066f0' 
    1650 00008220           DMACBAD1:
    1651 00008220     09ec          movi    DMAPALMESS,a12           ; DMA BAD PALETTE DATA message
         00008230 000067c0' 
    1652                    
    1653 00008250     1820          movk    1,a0
    1654                    
    1655 00008260     57ce          CLR     A14                     ;GET BACK TO A REAL PALETTE
    1656 00008270     078e          MOVE    A14,@DMAOFFCTL,L
         00008280 01a00000  
    1657 000082a0     078e          MOVE    A14,@DMACMAPCON,L
         000082b0 01a00080  
    1658 000082d0           DMACRET
    1659 000082d0     09cd          movi    SYSCINIT,a13
         000082e0     2880  
    1660 000082f0     058d          move    a13,@SYSCTRL,W
         00008300 01b00000  
    1661 00008320     0550          setf    16,0,0
    1662                    
    1663 00008330     4c00          MOVE    A0,A0
    1664 00008340                   FRET    B5
    1665                    
    1666                    **************************************************************************
    1667                    *                                                                        *
    1668                    *       POWERTST                                                         *
    1669                    *                                                                        *
    1670                    *       POWERUP SELF TEST ROUTINES                                       *
    1671                    *                                                                        *
    1672                    *       ENTRY                                                            *
    1673                    *               NOTHING                                                  *
    1674                    *                                                                        *
    1675                    *       EXIT                                                             *
    1676                    *               NOTHING                                                  *
    1677                    *                                                                        *
    1678                    **************************************************************************
    1679                    
    1680 00008350           POWERTST
    1681 00008350     0360          DINT
    1682 00008360     0550          SETF 16, 0, 0
    1683 00008370     0740          SETF 32, 0, 1
    1684 00008380     09ef          MOVI    STCKST,SP,L
         00008390 013f73e0  
    1685 000083b0     05fe          MOVB    B14,@WDOG_BONE          ;THROW A BONE
         000083c0 01860030  
    1686                    
    1687                    ;       HALT DMA AND ENABLE CACHE
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   39

    1688                    
    1689 000083e0     57ce          CLR  A14
    1690 000083f0     078e          MOVE A14, @DMAGOREG,L
         00008400 01a00000  
    1691 00008420     078e          MOVE A14, @DMAGOREG,L
         00008430 01a00000  
    1692 00008450     058e          MOVE A14, @CONTROL
         00008460 c00000b0  
    1693                    
    1694                    ;       DISABLE VIDEO PALETTE RAMS, AUTOERASE AND ERROR LED
    1695                    
    1696 00008480     09cd          MOVI    SYSCINIT,A13
         00008490     2880  
    1697                    
    1698 000084a0     058d          move    a13,@SYSCTRL,W
         000084b0 01b00000  
    1699                    
    1700                    ;       INITIALIZE IO REGISTERS
    1701                    
    1702 000084d0     09f0          MOVI    INITDATA,B0
         000084e0 00000000! 
    1703 00008500     09f7          MOVI    IDATALEN,B7
         00008510 00000000! 
    1704                    
    1705 00008530     09f2          movi    HESYNC,b2
         00008540 c0000000  
    1706 00008560     2f77          srl     5,b7
    1707 00008570           _t2:
    1708 00008570     9a12          move    *b0+,*b2+,L
    1709 00008580     3c57          dsjs    b7,_t2
    1710                    
    1711                    ;       movi    0fffch,a14
    1712                    ;       move    a14,@DPYSTRT,W
    1713                    
    1714 00008590     c000          JRUC    POWERCPUTEST
         000085a0     fb11  
    1715 000085b0           PONTEST
    1716 000085b0     09c0          MOVI    SYSCINIT,A0
         000085c0     2880  
    1717                    
    1718 000085d0     0580          move    a0,@SYSCTRL,W
         000085e0 01b00000  
    1719                    
    1720 00008600     05fe          MOVB    B14,@WDOG_BONE          ;THROW A BONE
         00008610 01860030  
    1721 00008630     c080          JAUC    POWERRET
         00008640 00000000! 
    1722                    
    1723              8000  DOG_COUNT       .EQU    8000H   ;EVERY 32K
    1724                    **************************************************************************
    1725                    *                                                                        *
    1726                    *       RAMCHECK                                                         *
    1727                    *                                                                        *
    1728                    *       CHECK A BANK OF RAM, GIVEN A STARTING TABLE ADDRESS              *
    1729                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   40

    1730                    *       ENTRY                                                            *
    1731                    *               A14     POINTER TO RAM TABLE                             *
    1732                    *               B5      RETURN ADDRESS                                   *
    1733                    *                                                                        *
    1734                    *       EXIT                                                             *
    1735                    *               B0      LIST OF ERRORS                                   *
    1736                    *                                                                        *
    1737                    **************************************************************************
    1738                    
    1739                            .ALIGN                  ;LET'S CACHE THIS BITCH
    1740                    
    1741 00008800           RAMCHECK:
    1742 00008800     05fe          MOVB    B14,@WDOG_BONE          ;THROW A BONE
         00008810 01860030  
    1743 00008830     0550          SETF 16, 0, 0
    1744 00008840     0740          SETF 32, 0, 1
    1745                    
    1746                    ;       SNAG NEXT CHIP RECORD
    1747                    
    1748 00008850           RAMLOOP:
    1749 00008850     5652          CLR     B2
    1750 00008860     b7cc          MOVE    *A14(RAM_SADR),A12,L    ; STARTING ADDRESS
         00008870     0030  
    1751 00008880     b7cd          MOVE    *A14(RAM_EADR),A13,L    ; ENDING ADDRESS
         00008890     0050  
    1752 000088a0     b5cb          MOVE    *A14(RAM_ITLV),A11,W    ; INTERLEAVE
         000088b0     0010  
    1753 000088c0     b5ca          MOVE    *A14(RAM_WDTH),A10,W    ; WIDTH
         000088d0     0000  
    1754                    
    1755                    ;       CELL COUNT
    1756                    
    1757 000088e0     458d          SUB  A12, A13                   ; (END-START)/INTERLEAVE+1
    1758 000088f0     5b6d          DIVU A11, A13
    1759 00008900     102d          INC  A13
    1760                    
    1761                    ;       SET FIELD SIZES
    1762                    
    1763 00008910     4d69          MOVE A11, A9                    ; FS1 = INTERLEAVE
    1764 00008920     0b89          ANDI ZERO_EXTEND, A9
         00008930 ffffffe0  
    1765 00008950     d709          EXGF A9, 1
    1766                    
    1767 00008960     4d49          MOVE A10, A9                    ; FS0 = WIDTH
    1768 00008970     0b89          ANDI ZERO_EXTEND, A9
         00008980 ffffffe0  
    1769 000089a0     d509          EXGF A9, 0
    1770                    
    1771                    ;       FILL IN ASCENDING ORDER
    1772                    
    1773 000089b0     4da9          MOVE A13, A9                    ; XEROX COUNT
    1774 000089c0     4d88          MOVE A12, A8                    ; XEROX START
    1775                    
    1776 000089d0     09e7          MOVI RANDOM_SEED, A7, L
         000089e0 5a5a5a5a  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   41

    1777 00008a00     56a5          CLR     A5
    1778 00008a10     09fe          MOVI    DOG_COUNT,B14
         00008a20 00008000  
    1779                    
    1780 00008a40           RAC1:
    1781 00008a40     2027          SLA     1,A7                    ; GENERATE A PSEUDO
    1782 00008a50     cc03          JRV     RAC2                    ; RANDOM NUMBER
    1783 00008a60     0ba7          ORI     2,A7
         00008a70 00000002  
    1784 00008a90           RAC2:
    1785 00008a90     4ce6          MOVE    A7,A6
    1786 00008aa0     42a6          ADDC    A5,A6
    1787                    
    1788 00008ab0     92c8          MOVE    A6,*A8+,1               ; WRITE
    1789 00008ac0     38de          DSJS    B14,RAC1_NODOG
    1790 00008ad0     05fe          MOVB    B14,@WDOG_BONE          ;THROW A BONE
         00008ae0 01860030  
    1791 00008b00     09fe          MOVI    DOG_COUNT,B14           ;AND RELOAD COUNT
         00008b10 00008000  
    1792 00008b30           RAC1_NODOG
    1793 00008b30     3e09          DSJS    A9,RAC1
    1794                    
    1795                    ;       READBACK IN ASCENDING ORDER
    1796                    
    1797 00008b40     4da9          MOVE A13, A9                    ; XEROX COUNT
    1798 00008b50     4d88          MOVE A12, A8                    ; XEROX START
    1799                    
    1800 00008b60     09e7          MOVI RANDOM_SEED, A7, L
         00008b70 5a5a5a5a  
    1801 00008b90     09fe          MOVI    DOG_COUNT,B14
         00008ba0 00008000  
    1802                    
    1803 00008bc0     2027  RAC3:   SLA  1, A7                      ; GENERATE A PSEUDO
    1804 00008bd0     cc03          JRV  RAC4                       ; RANDOM NUMBER
    1805 00008be0     0ba7          ORI  2, A7
         00008bf0 00000002  
    1806 00008c10     4ce6  RAC4:   MOVE A7, A6
    1807 00008c20     42a6          ADDC A5, A6
    1808                    
    1809 00008c30     9704          MOVE *A8+, A4, 1                ; READ
    1810                    
    1811 00008c40     0526          ZEXT  A6
    1812 00008c50     0524          ZEXT  A4
    1813                    
    1814 00008c60     48c4          CMP A6, A4
    1815 00008c70     ca09          JRZ RAC5
    1816                    ;
    1817                    ;       GOT AN ERROR HERE
    1818                    ;
    1819 00008c80     0550          SETF    16,0,0                  ; RESET FIELDS
    1820 00008c90     0740          SETF    32,0,1
    1821 00008ca0     b5c4          MOVE    *A14(RAM_NMBR),A4,W     ; GET BIT NUMBER TO SET
         00008cb0     0020  
    1822 00008cc0     4e81          MOVE    A4,B1
    1823 00008cd0     1832          MOVK    1,B2
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   42

    1824 00008ce0     6232          SLL     B1,B2
    1825 00008cf0     5450          OR      B2,B0                   ; SET THAT BIT
    1826 00008d00     c008          JRUC    RAC6                    ; BREAK !!
    1827 00008d10           RAC5
    1828 00008d10     38de          DSJS    B14,RAC5_NODOG
    1829 00008d20     05fe          MOVB    B14,@WDOG_BONE          ;THROW A BONE
         00008d30 01860030  
    1830 00008d50     09fe          MOVI    DOG_COUNT,B14           ;AND RELOAD COUNT
         00008d60 00008000  
    1831 00008d80           RAC5_NODOG
    1832 00008d80     3fa9          DSJS    A9,RAC3
    1833                    
    1834 00008d90           RAC6
    1835 00008d90     05fe          MOVB    B14,@WDOG_BONE          ;THROW A BONE FOR GOOD MEASURE
         00008da0 01860030  
    1836 00008dc0     0550          SETF    16,0,0                  ; RESET FIELDS
    1837 00008dd0     0740          SETF    32,0,1
    1838                    ;
    1839                    ;       B1 SHOULD BE ZERO IF THE CHIP IS COOL HERE
    1840                    ;
    1841 00008de0     b7ca          MOVE    *A14(RAM_LINK),A10,L
         00008df0     0070  
    1842 00008e00     ca0c          JRZ     RAMNOPLOT
    1843 00008e10     182b          MOVK    1,A11
    1844 00008e20     4c52          MOVE    B2,B2
    1845 00008e30     ca01          JRZ     RAMPLOT
    1846 00008e40     184b          MOVK    2,A11
    1847 00008e50           RAMPLOT
    1848 00008e50     4eb9          MOVE    B5,A9                   ; I HOPE THIS ONE IS SAFE!
    1849 00008e60     4e1d          MOVE    B0,A13
    1850 00008e70                   FCALL   CHIPOUT,B5
    1851 00008eb0     4fa0          MOVE    A13,B0
    1852 00008ec0     4f25          MOVE    A9,B5
    1853                    
    1854 00008ed0           RAMNOPLOT
    1855 00008ed0     0b0e          ADDI    RAM_SIZE,A14            ; ADVANCE TO NEXT GUY
         00008ee0     0090  
    1856 00008ef0     85c7          MOVE    *A14,A7,W
    1857 00008f00     cb94          JRNZ    RAMLOOP                 ; HERE WE GO AGAIN
    1858 00008f10                   FRET    B5
    1859                    
    1860                    **************************************************************************
    1861                    *                                                                        *
    1862                    *                  START OF DIAG CACHE SEGMENT                           *
    1863                    *                                                                        *
    1864                    **************************************************************************
    1865                    
    1866                            .ALIGN                  ;LET'S CACHE THIS BITCH
    1867                    
    1868                    **************************************************************************
    1869                    *                                                                        *
    1870                    * ROMCHECK - ROUTINE TO CHECKSUM THE PROGRAM AND IMAGE ROMS.             *
    1871                    * RETURNS                                                                *
    1872                    *       B0  = BITS SET FOR BAD ROMS.                                     *
    1873                    *        Z = TEST FINISHED.                                              *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   43

    1874                    *       NZ = TEST ABORTED BY USER.                                       *
    1875                    *                                                                        *
    1876                    **************************************************************************
    1877 00009000           ROMCHECK:
    1878 00009000     05fe          MOVB    B14,@WDOG_BONE          ;THROW A BONE
         00009010 01860030  
    1879 00009030           ROMLOOP
    1880 00009030     5652          CLR     B2
    1881 00009040     b5cd          MOVE    *A14(ROM_CKSM),A13,W    ; CHECK TO SEE IF ROM SOCKET THERE
         00009050     0000  
    1882 00009060     ca5b          JRZ     ROMEMPTY
    1883                    *
    1884                    *       Add bank handling
    1885                    *
    1886 00009070     09cc          movi    SYSCINIT,a12            ; bank select bits clear        
         00009080     2880  
    1887 00009090     b5c8          move    *a14(ROM_MAP),a8,W
         000090a0     0010  
    1888 000090b0     ca05          jrz     robl1
    1889 000090c0     0b88          andi    3,a8
         000090d0 fffffffc  
    1890 000090f0     2508          sll     8,a8
    1891 00009100     550c          or      a8,a12
    1892                            
    1893                    ;        movi    SYSCINIT,a12            ; bank select bits clear        
    1894 00009110     058c  robl1   move    a12,@SYSCTRL,W
         00009120 01b00000  
    1895                            
    1896 00009140     5708          CLR     A8                      ; CHECKSUM
    1897                    
    1898 00009150     09fe          MOVI    DOG_COUNT,B14
         00009160 00008000  
    1899                    
    1900 00009180     b7cc          MOVE    *A14(ROM_SADR),A12,L    ; STARTING ADDRESS
         00009190     0050  
    1901 000091a0     b7cd          MOVE    *A14(ROM_EADR),A13,L    ; ENDING ADDRESS
         000091b0     0070  
    1902 000091c0     b5cb          MOVE    *A14(ROM_ITLV),A11,W    ; INTERLEAVE
         000091d0     0030  
    1903                    ;
    1904                    ;       SUM UP A GIVEN IMAGE ROM -- THE TUNIT WAY
    1905                    ;
    1906 000091e0     458d          SUB     A12,A13                 ; (( EADDR - SADDR ) / INTERLEAVE) + 1
    1907 000091f0     5b6d          DIVU    A11,A13
    1908 00009200     102d          INC     A13
    1909 00009210     0748          setf    8,0,1
    1910 00009220           RCILP
    1911 00009220     8787          MOVE    *A12,A7,1
    1912 00009230     416c          ADD     A11,A12
    1913 00009240     40e8          ADD     A7,A8
    1914 00009250     38de          DSJS    B14,RCILP_NODOG
    1915 00009260     05fe          MOVB    B14,@WDOG_BONE          ;THROW A BONE
         00009270 01860030  
    1916 00009290     09fe          MOVI    DOG_COUNT,B14           ;AND RELOAD COUNT
         000092a0 00008000  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   44

    1917 000092c0           RCILP_NODOG
    1918 000092c0     3d6d          DSJS    A13,RCILP
    1919                    
    1920 000092d0     0740          setf    32,0,1
    1921                    
    1922                    *LAND HERE FROM IMAGE CHECKSUM TO DETERMINE IF WE HIT IT
    1923 000092e0     b5c7          MOVE    *A14(ROM_CKSM),A7,W
         000092f0     0000  
    1924 00009300           ROM_COMPARE
    1925 00009300     0527          ZEXT    A7
    1926 00009310     0528          ZEXT    A8
    1927 00009320     48e8          CMP     A7,A8
    1928 00009330     ca06          JRZ     ROMRELOOP
    1929 00009340     b5c4          MOVE    *A14(ROM_NMBR),A4,W     ; GET BIT NUMBER TO SET
         00009350     0040  
    1930 00009360     4e81          MOVE    A4,B1
    1931 00009370     1832          MOVK    1,B2
    1932 00009380     6232          SLL     B1,B2
    1933 00009390     5450          OR      B2,B0                   ; SET THAT BIT
    1934 000093a0           ROMRELOOP
    1935 000093a0     05fe          MOVB    B14,@WDOG_BONE          ;THROW A BONE
         000093b0 01860030  
    1936 000093d0     b7ca          MOVE    *A14(ROM_LINK),A10,L
         000093e0     0090  
    1937 000093f0     ca0c          JRZ     ROMNOPLOT
    1938 00009400     182b          MOVK    1,A11
    1939 00009410     4c52          MOVE    B2,B2
    1940 00009420     ca01          JRZ     ROMPLOT
    1941 00009430     184b          MOVK    2,A11
    1942 00009440           ROMPLOT
    1943 00009440     4eb9          MOVE    B5,A9                   ; I HOPE THIS ONE IS SAFE!
    1944 00009450     4e1d          MOVE    B0,A13
    1945 00009460                   FCALL   CHIPOUT,B5
    1946 000094a0     4fa0          MOVE    A13,B0
    1947 000094b0     4f25          MOVE    A9,B5
    1948                    
    1949 000094c0           ROMNOPLOT
    1950 000094c0     0b0e          ADDI    ROM_SIZE,A14
         000094d0     00b0  
    1951                    *CHECKING FOR EARLY EXIT BY OPERATOR
    1952 000094e0     05ad          MOVE    @COINS,A13,W            ;
         000094f0 01860030  
    1953 00009510     0b8d          ANDI    664H,A13                ;CHECK START BUTS for exit
         00009520 fffff99b  
    1954 00009540     05a8          move    @SWSET2,a8,W
         00009550 00000020- 
    1955 00009570     490d          cmp     a8,a13
    1956 00009580     cb01          JRnz    ROMABORT                ;BR = IT'S PRESSED
    1957 00009590     c0a9          JRUC    ROMLOOP                 ;BACK FOR THE NEXT
    1958                    *HERE ON OPERATOR ABORT
    1959 000095a0           ROMABORT
    1960 000095a0     09cc          movi    SYSCINIT,a12            ; bank select bits clear        
         000095b0     2880  
    1961 000095c0     058c          move    a12,@SYSCTRL,W
         000095d0 01b00000  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   45

    1962 000095f0                   CLRZ
    1963 00009610                   FRET    B5
    1964 00009620           ROMEMPTY
    1965 00009620     09cc          movi    SYSCINIT,a12            ; bank select bits clear        
         00009630     2880  
    1966 00009640     058c          move    a12,@SYSCTRL,W
         00009650 01b00000  
    1967 00009670                   SETZ
    1968 00009680                   FRET    B5
    1969                    
    1970                    **************************************************************************
    1971                    *                                                                        *
    1972                    *       MONITOR STUFF                                                    *
    1973                    *                                                                        *
    1974                    **************************************************************************
    1975                    
    1976 00009690           CONV_PLOT:
    1977 00009690     09e9          MOVI    MON_RECS,A9
         000096a0 00010ef0' 
    1978 000096c0           CPRLP1
    1979 000096c0     9522          MOVE    *A9+,A2,W               ; GET COLOR
    1980 000096d0     ca07          JRZ     CPRDONE
    1981 000096e0     9720          MOVE    *A9+,A0,L               ; START POINT
    1982 000096f0     9721          MOVE    *A9+,A1,L               ; DIMENSIONS
    1983 00009700                   FCALL   RECTANGLE,B6
    1984 00009740     c0f7          JRUC    CPRLP1
    1985 00009750           CPRDONE
    1986 00009750     09e9          MOVI    MON_VECS,A9             ; POINT AT VECTOR TABLE
         00009760 00010a70' 
    1987 00009780           CPVLP1
    1988 00009780     9522          MOVE    *A9+,A2,W               ; GET COLOR
    1989 00009790     ca07          JRZ     CPVDONE
    1990 000097a0     9720          MOVE    *A9+,A0,L               ; START POINT
    1991 000097b0     9721          MOVE    *A9+,A1,L               ; END POINT
    1992 000097c0                   FCALL   HVLINE,B6
    1993 00009800     c0f7          JRUC    CPVLP1
    1994 00009810           CPVDONE
    1995 00009810     09e9          MOVI    MON_DOTS,A9             ; POINT AT DOT TABLE
         00009820 00011190' 
    1996 00009840           CPDLP1
    1997 00009840     9521          MOVE    *A9+,A1,W               ; GET COLOR
    1998 00009850     ca06          JRZ     CPDDONE
    1999 00009860     9720          MOVE    *A9+,A0,L               ; GET THE POINT
    2000 00009870                   FCALL   POINT,B6
    2001 000098b0     c0f8          JRUC    CPDLP1
    2002 000098c0           CPDDONE
    2003 000098c0     0960          RETS
    2004                    
    2005                    
    2006                    **************************************************************************
    2007                    *                                                                        *
    2008                    *       COLORBAR                                                         *
    2009                    *                                                                        *
    2010                    **************************************************************************
    2011 000098d0           COLORBAR:
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   46

    2012                    ;       =========================
    2013                    ;       | SET PALETTE 0 FOR     |
    2014                    ;       | COLOR BARS.           |
    2015                    ;       =========================
    2016                    
    2017 000098d0     09e0          MOVI    INTENSITIES_START,A0,L
         000098e0 00009cc0' 
    2018 00009900     09e1          MOVI    COLRAM+(5*PALSIZE),A1,L ;START UP A LITTLE BIT
         00009910 01885000  
    2019                    
    2020 00009930     1a02          MOVK    16,A2           ;5 BITS/COLOR
    2021 00009940     1826          MOVK    1,A6            ;1 PALETTE(S) TO COVER 8 BARS
    2022 00009950           CB2
    2023 00009950     1907          MOVK    8,A7            ;8 BARS/PALETTE
    2024 00009960           CB3
    2025 00009960     9403          MOVE    *A0+,A3         ;STARTING COLOR
    2026 00009970     9404          MOVE    *A0+,A4         ;COLOR DECREMENT
    2027 00009980     4c45          MOVE    A2,A5
    2028 00009990           CB4
    2029 00009990     9061          move    a3,*a1+,W
    2030                    
    2031 000099a0     4483          SUB     A4,A3
    2032 000099b0     3c65          DSJS    A5,CB4
    2033 000099c0     3ce7          DSJS    A7,CB3
    2034                    
    2035 000099d0     0b01          ADDI    16*PALSIZE/NUMPAL,A1
         000099e0     0200  
    2036 000099f0     3d66          DSJS    A6,CB2
    2037                    
    2038                    ;       =========================
    2039                    ;       | DISPLAY COLOR BARS    |
    2040                    ;       =========================
    2041                    
    2042 00009a00     57ce          CLR     A14
    2043 00009a10     078e          MOVE    A14,@DMAGOREG,L         ;HALT THE DMA
         00009a20 01a00000  
    2044 00009a40     09ce          MOVI    [0,0101H],A14           ;PALETTE INCREMENT
         00009a50     0101  
    2045 00009a60     09c8          MOVI    [0,0505H],A8            ;START AT THIS PALETTE
         00009a70     0505  
    2046                    
    2047 00009a80     09e3          MOVI    COLOR_BARS,A3,L         ;COLOR BAR TABLE
         00009a90 00011950' 
    2048 00009ab0     09ed          MOVI    [16,0],A13,L            ;POSITION INCRMENT
         00009ac0 00100000  
    2049 00009ae0     09ec          MOVI    01010101H,A12           ; XUNIT
         00009af0 01010101  
    2050 00009b10     1a0b          MOVK    16,A11                  ;# INTENSITIES / BAR
    2051 00009b20     1826          MOVK    1,A6                    ;THIS MANY GROUPS OF 8 BARS
    2052 00009b30     5642          CLR     A2                      ;STARTING COLOR
    2053 00009b40           CB5
    2054 00009b40     1907          MOVK    8,A7                    ;THIS MANY BARS PER PALETTE
    2055 00009b50           CB6
    2056 00009b50     9661          MOVE    *A3+,A1,L
    2057 00009b60     ca10          JRZ     CB8
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   47

    2058 00009b70     0788          MOVE    A8,@DMACMAPCON,L                ;STUFF PALETTE
         00009b80 01a00080  
    2059 00009ba0     9660          MOVE    *A3+,A0,L
    2060 00009bb0     1203          ADDK    16,A3
    2061 00009bc0     4d6a          MOVE    A11,A10
    2062 00009bd0           CB7
    2063 00009bd0                   FCALL   RECTANGLE,B6
    2064 00009c10     41a0          ADD     A13,A0
    2065 00009c20     4182          ADD     A12,A2
    2066 00009c30     3cea          DSJS    A10,CB7
    2067 00009c40     3e07          DSJ     A7,CB6                  ;NEXT BAR PLEASE
    2068 00009c50     41c8          ADD     A14,A8                  ;NEXT BAR & PALETTE PLEASE
    2069 00009c60     3e66          DSJ     A6,CB5
    2070 00009c70           CB8
    2071 00009c70     57ce          CLR     A14
    2072 00009c80     078e          MOVE    A14,@DMACMAPCON,L
         00009c90 01a00080  
    2073 00009cb0     0960          RETS
    2074                    
    2075                    
    2076 00009cc0           INTENSITIES_START:
    2077                    
    2078 00009cc0     03e0          .WORD 03E0H                ; GREEN
    2079 00009cd0     0040          .WORD 0040H                ; BUMP GREEN
    2080                    
    2081 00009ce0     7c00          .WORD 7C00H                ; RED
    2082 00009cf0     0800          .WORD 0800H                ; BUMP RED
    2083                    
    2084 00009d00     001f          .WORD 001FH                ; BLUE
    2085 00009d10     0002          .WORD 0002H                ; BUMP BLUE
    2086                    
    2087 00009d20     0000          .WORD 0000H                ; BLACK
    2088 00009d30     0000          .WORD 0000H                ; BUMP BLACK
    2089                    
    2090 00009d40     7fff          .WORD 7FFFH                ; WHITE
    2091 00009d50     0842          .WORD 0842H                ; BUMP WHITE
    2092                    
    2093 00009d60     7fe0          .WORD 7FE0H                ; YELLOW
    2094 00009d70     0840          .WORD 0840H                ; BUMP YELLOW
    2095                    
    2096 00009d80     7c1f          .WORD 7C1FH                ; PURPLE
    2097 00009d90     0802          .WORD 0802H                ; BUMP PURPLE
    2098                    
    2099 00009da0     03ff          .WORD 03FFH                ; CYAN
    2100 00009db0     0042          .WORD 0042H                ; BUMP CYAN
    2101                    
    2102 00009dc0 00000000          .LONG   0
    2103                    
    2104                    
    2105                    **************************************************************************
    2106                    *                                                                        *
    2107                    *       DIPTEST                                                          *
    2108                    *                                                                        *
    2109                    *       DIP SWITCH TESTING                                               *
    2110                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   48

    2111                    **************************************************************************
    2112                    
    2113 00009de0           DIPTEST:
    2114 00009de0                   MOVKM   1,@DIAG_DFLAG,W
    2115 00009e20                   MOVKM   1,@DIP1ST,W             ;YES THIS IS THE FIRST TIME THROUGH
    2116 00009e60     0d5f          CALLA   DIAG_SRT_CLR
         00009e70 00000000! 
    2117 00009e90     09e9          MOVI    DIP_VECS,A9             ; POINT AT VECTOR TABLE
         00009ea0 00011bf0' 
    2118 00009ec0           DTVLP1
    2119 00009ec0     9522          MOVE    *A9+,A2,W               ; GET COLOR
    2120 00009ed0     ca07          JRZ     DTVDONE
    2121 00009ee0     9720          MOVE    *A9+,A0,L               ; START POINT
    2122 00009ef0     9721          MOVE    *A9+,A1,L               ; END POINT
    2123 00009f00                   FCALL   HVLINE,B6
    2124 00009f40     c0f7          JRUC    DTVLP1
    2125 00009f50           DTVDONE
    2126 00009f50     09e9          MOVI    DIP_STRS,A9
         00009f60 00012480' 
    2127 00009f80     0d3f          CALLR   STR_PLOT
         00009f90     041b  
    2128 00009fa0     0d3f          CALLR   DIPPLOT
         00009fb0     0282  
    2129 00009fc0     0d3f          CALLR   DIPSTATE
         00009fd0     006a  
    2130                    
    2131 00009fe0     05ae          MOVE    @DIP1ST,A14,W
         00009ff0 00000090- 
    2132 0000a010     cb02          JRNZ    DTL_SKIP_SND
    2133                    
    2134 0000a020     09c0          MOVI    DIP_SND,A0
         0000a030     0083  
    2135                    ;       MOVE    A0,@SOUND,W
    2136                    
    2137 0000a040           DTL_SKIP_SND
    2138 0000a040                   CLRM    @DIP1ST,W
    2139                    
    2140 0000a080                   PAUSE   10000,B6,a0
    2141                    
    2142 0000a120           DT_PLOT                
    2143 0000a120     07a0          MOVE    @SWITCH,A0,L
         0000a130 01860000  
    2144 0000a150     0b80          ANDI    70707070H,A0            ;MASK BUTTONS
         0000a160 8f8f8f8f  
    2145 0000a180     0780          MOVE    A0,@SWSET1,L
         0000a190 00000000- 
    2146                    
    2147 0000a1b0     05a0          MOVE    @COINS,A0,W
         0000a1c0 01860030  
    2148 0000a1e0     0b80          ANDI    00664H,A0               ;MASK START BUTTONS
         0000a1f0 fffff99b  
    2149 0000a210     0580          MOVE    A0,@SWSET2,W
         0000a220 00000020- 
    2150 0000a240           DTLOOP
    2151 0000a240     0580          move    a0,@WDOG_BONE,W
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   49

         0000a250 01860030  
    2152 0000a270     57ce          clr     a14                     ;penacho
    2153 0000a280     058e          move    a14,@TIMER,W            ;penacho
         0000a290 00000000! 
    2154 0000a2b0     07a1          MOVE    @SWITCH,A1,L
         0000a2c0 01860000  
    2155 0000a2e0     0b81          ANDI    70707070H,A1            ;MASK BUTTONS
         0000a2f0 8f8f8f8f  
    2156 0000a310     0b61          cmpi    70707070h,a1
         0000a320 8f8f8f8f  
    2157 0000a340     ca05          jreq    DT1
    2158 0000a350     07a0          MOVE    @SWSET1,A0,L
         0000a360 00000000- 
    2159 0000a380     4801          CMP     A0,A1
    2160 0000a390     cb29          JRNZ    DT_X
    2161 0000a3a0           DT1:
    2162 0000a3a0     0781          move    a1,@SWSET1,L
         0000a3b0 00000000- 
    2163                    
    2164 0000a3d0     05a1          MOVE    @COINS,A1,W
         0000a3e0 01860030  
    2165 0000a400     0b81          ANDI    00664H,A1               ;MASK START BUTTONS
         0000a410 fffff99b  
    2166 0000a430     0b41          cmpi    664h,a1
         0000a440     f99b  
    2167 0000a450     ca05          jreq    DT2
    2168 0000a460     05a0          MOVE    @SWSET2,A0,W
         0000a470 00000020- 
    2169 0000a490     4801          CMP     A0,A1
    2170 0000a4a0     cb18          JRNZ    DT_X
    2171 0000a4b0           DT2:
    2172 0000a4b0     0581          move    a1,@SWSET2,W
         0000a4c0 00000020- 
    2173                    
    2174 0000a4e0     0d3f          CALLR   READ_DIP
         0000a4f0     029c  
    2175 0000a500     0b80          andi    0ffffh,a0 
         0000a510 ffff0000  
    2176 0000a530     05a1          MOVE    @DIPVAL,A1,W
         0000a540 00000080- 
    2177 0000a560     0b81          ANDI    0FFFFH,A1               ;FUCKING SIGN EXTEND
         0000a570 ffff0000  
    2178 0000a590     4801          CMP     A0,A1
    2179 0000a5a0     cac9          JRZ     DTLOOP                  ;BR = NO CHANGE
    2180 0000a5b0     0580          MOVE    A0,@DIPVAL,W            ;SAVE THE OLD
         0000a5c0 00000080- 
    2181 0000a5e0     0d3f          CALLR   DIPPLOT
         0000a5f0     021e  
    2182 0000a600     0d3f          CALLR   DIPSTATE
         0000a610     0006  
    2183 0000a620     c0af          JRUC    DT_PLOT                 ;PLOT THE NEW SWITCH STUFF
    2184 0000a630           DT_X
    2185 0000a630                   CLRM    @DIAG_DFLAG,W
    2186 0000a670     0960          RETS
    2187                    
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   50

    2188                    **************************************************************************
    2189                    *                                                                        *
    2190                    *       DIPSTATE                                                         *
    2191                    *                                                                        *
    2192                    *       PLOT OUT THE STATES OF ALL THE DIP SWITCHES                      *
    2193                    *                                                                        *
    2194                    *       ENTRY                                                            *
    2195                    *               NOTHING                                                  *
    2196                    *                                                                        *
    2197                    *       EXIT                                                             *
    2198                    *               NOTHING                                                  *
    2199                    *                                                                        *
    2200                    **************************************************************************
    2201 0000a680           DIPSTATE
    2202 0000a680     09e0          movi    [32,74],a0
         0000a690 0020004a  
    2203 0000a6b0     09e1          movi    [104,120],a1
         0000a6c0 00680078  
    2204 0000a6e0     09c2          movi    COLOR_BLACK,a2
         0000a6f0     0808  
    2205 0000a700                   FCALL   RECTANGLE,b6
    2206 0000a740     09e0          movi    [32,260],a0
         0000a750 00200104  
    2207 0000a770     09e1          movi    [104,134],a1
         0000a780 00680086  
    2208 0000a7a0     09c2          movi    COLOR_BLACK,a2
         0000a7b0     0808  
    2209 0000a7c0                   FCALL   RECTANGLE,b6
    2210                    
    2211 0000a800     0d3f          CALLR   READ_DIP
         0000a810     026a  
    2212 0000a820     0b80          andi    0ffffh,a0               ;
         0000a830 ffff0000  
    2213 0000a850     4c0a          MOVE    A0,A10                  ;LET'S KEEP A COPY
    2214                    
    2215 0000a860     5642          CLR     A2
    2216 0000a870     09c3          MOVI    COLOR_WHITE,A3
         0000a880     0202  
    2217                    
    2218              0018  sw2xoff         .set    24      ; my offset from previous games
    2219                    
    2220              004b  SW1XO   equ     75                      ; Start X for SW 1
    2221              0105  SW2XO   equ     285-sw2xoff                     ; Start X for SW 2
    2222              0027  SWYO    equ     39                      ; Start Y for SW 1
    2223              000c  SWYD    equ     12                      ; Delta for text
    2224                    
    2225                    PlotDIPMac      $MACRO  MASK,XORG,LINE,ONSTR,OFFSTR
    2226                    
    2227                            MOVE    A10,A0
    2228                            MOVI    :ONSTR:,A1
    2229                            ANDI    :MASK:,A0               ;Num. Players possible
    2230                            JRNZ    pdm?
    2231                            MOVI    :OFFSTR:,A1
    2232                    pdm?
    2233                            MOVE    A1,A0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   51

    2234                            MOVI    [SWYO+(:LINE:*SWYD),:XORG:],A1
    2235                            FCALL   STRING,B6
    2236                    
    2237                            $ENDM
    2238                    
    2239 0000a890     09e0          MOVI    DUNUSED,A0
         0000a8a0 000137b0' 
    2240 0000a8c0     09e1          MOVI    [SWYO+(7*SWYD),SW1XO],A1
         0000a8d0 007b004b  
    2241 0000a8f0                   FCALL   STRING,B6
    2242                    
    2243 0000a930     09e0          MOVI    DUNUSED,A0
         0000a940 000137b0' 
    2244 0000a960     09e1          MOVI    [SWYO+(5*SWYD),SW2XO],A1
         0000a970 00630105  
    2245 0000a990                   FCALL   STRING,B6
    2246                    
    2247 0000a9d0     09e0          MOVI    DUNUSED,A0
         0000a9e0 000137b0' 
    2248 0000aa00     09e1          MOVI    [SWYO+(6*SWYD),SW2XO],A1
         0000aa10 006f0105  
    2249 0000aa30                   FCALL   STRING,B6
    2250                    
    2251 0000aa70                   PlotDipMac    DPUSECMOS,SW1XO,0,DUSECMOS_1,DUSECMOS_0
    2252                    
    2253                    *PLOT CURRENT COINAGE
    2254 0000aba0     09c3          MOVI    COLOR_WHITE,A3
         0000abb0     0202  
    2255 0000abc0     09e1          MOVI    [SWYO+SWYD+(SWYD>01H),SW1XO],A1
         0000abd0 0034004b  
    2256 0000abf0     09e0          MOVI    DCOINAGE,A0
         0000ac00 00012ed0' 
    2257 0000ac20                   FCALL   STRING,B6
    2258 0000ac60     4d40          MOVE    A10,A0
    2259 0000ac70     0b80          ANDI    DPCOUNTRY,A0
         0000ac80 ffffffcf  
    2260 0000aca0     2f80          SRL     SR_DPCOUNTRY,A0
    2261 0000acb0     24a0          SLL     5,A0
    2262 0000acc0     0b20          ADDI    DIPCOINTAB,A0
         0000acd0 00000000! 
    2263 0000acf0     8601          MOVE    *A0,A1,L                ; POINTER TO RIGHT COIN TABLE
    2264 0000ad00     4d40          MOVE    A10,A0
    2265 0000ad10     0b80          ANDI    DPCOINAGE,A0
         0000ad20 fffffff1  
    2266 0000ad40     0b40          cmpi    DPCOINAGE,a0            ; check for free play
         0000ad50     fff1  
    2267 0000ad60     cb04          jrne    DPST0
    2268 0000ad70     09e0          movi    DUCOIN7,a0              ; set free play message
         0000ad80 000135b0' 
    2269 0000ada0     c009          jruc    DPST1
    2270                    
    2271 0000adb0           DPST0:
    2272 0000adb0     2fe0          SRL     SR_DPCOINAGE,A0
    2273 0000adc0     2480          SLL     4,A0                    ; offset
    2274 0000add0     4001          ADD     A0,A1
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   52

    2275 0000ade0     8420          MOVE    *A1,A0,W                ; index into COIN TABLES
    2276 0000adf0     0d5f          calla   CS_POINT
         0000ae00 00000000! 
    2277 0000ae20     b6c0          move    *a6(CS_TITLE),a0,L
         0000ae30     0170  
    2278 0000ae40           DPST1:
    2279 0000ae40     5642          CLR     A2
    2280 0000ae50     09e1          MOVI    [SWYO+(2*SWYD)+(SWYD>01H),SW1XO],A1
         0000ae60 0040004b  
    2281 0000ae80                   FCALL   STRING,B6
    2282                    
    2283                    *PLOT CREDITS TO START, CREDITS TO CONTINUE
    2284                    ;       MOVI    DCREDITS,A0
    2285                    ;       MOVI    [101,SW1XO],A1
    2286                    ;       FCALL   STRING,B6
    2287                    ;
    2288                    ;       MOVI    DTOSTART,A0
    2289                    ;       MOVI    [112,88],A1
    2290                    ;       FCALL   STRING,B6
    2291                    ;
    2292                    ;       MOVI    DTOCONTINUE,A0
    2293                    ;       MOVI    [123,88],A1
    2294                    ;       FCALL   STRING,B6
    2295                    
    2296                    ;       MOVE    A10,A7
    2297                    ;       ANDI    DPCREDITS,A7
    2298                    ;       SRL     SR_DPCREDITS,A7
    2299                    ;       SLL     5,A7
    2300                    ;       ADDI    DCREDTAB,A7
    2301                    ;       MOVE    *A7+,A0,L
    2302                    ;       MOVI    [112,SW1XO],A1
    2303                    ;       FCALL   STRING,B6
    2304                    ;       MOVE    *A7+,A0,L
    2305                    ;       MOVI    [123,SW1XO],A1
    2306                    ;       FCALL   STRING,B6
    2307                    
    2308                    
    2309                    *PLOT COUNTRY SELECTION
    2310 0000aec0     4d40          MOVE    A10,A0
    2311 0000aed0     0b80          ANDI    DPCOUNTRY,A0
         0000aee0 ffffffcf  
    2312 0000af00     2f80          SRL     SR_DPCOUNTRY,A0
    2313 0000af10     24a0          SLL     5,A0
    2314 0000af20                   PUSH    a0
    2315 0000af30     0b20          ADDI    DCOUNTRY_TAB,A0
         0000af40 000133b0' 
    2316 0000af60     8600          MOVE    *A0,A0,L
    2317 0000af70     09e1          MOVI    [SWYO+(4*SWYD)+(SWYD>01H),SW1XO],A1
         0000af80 0058004b  
    2318 0000afa0                   FCALL   STRING,B6
    2319                    
    2320 0000afe0     09e0          movi    [9eh,60],a0
         0000aff0 009e003c  
    2321 0000b010     09e1          movi    [200,340],a1
         0000b020 00c80154  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   53

    2322 0000b040     09c2          movi    COLOR_BLACK,a2
         0000b050     0808  
    2323 0000b060                   FCALL   RECTANGLE,b6
    2324 0000b0a0                   PULLQ   a0      ; country
    2325 0000b0b0     0b20          addi    CoinTutorTbl,a0
         0000b0c0 0000bc70' 
    2326 0000b0e0     8605          move    *a0,a5,L
    2327 0000b0f0     ca37          jrz     no_tutor
    2328 0000b100     96a0          move    *a5+,a0,L
    2329 0000b110     09e1          movi    [09eh,70h],a1
         0000b120 009e0070  
    2330 0000b140     09c3          movi    COLOR_YELLOW,a3
         0000b150     0505  
    2331 0000b160           tut_lp:
    2332 0000b160     098f          mmtm    sp,a1,a5
         0000b170     4400  
    2333 0000b180     5642          clr     a2
    2334 0000b190                   fcall   STRING,B6       
    2335                    
    2336 0000b1d0     09af          mmfm    sp,a1,a5        ; get title from coin table
         0000b1e0     0022  
    2337 0000b1f0     94a0          move    *a5+,a0
    2338 0000b200     ce26          jrn     no_tutor
    2339 0000b210     4c03          move    a0,a3
    2340 0000b220     2f03          srl     8,a3
    2341 0000b230     24a3          sll     5,a3
    2342 0000b240     0b23          addi    DIPCOINTAB,a3
         0000b250 00000000! 
    2343 0000b270     8663          move    *a3,a3,L        ; get specific country table
    2344 0000b280     2700          sll     32-8,a0
    2345 0000b290     2d80          srl     32-12,a0
    2346 0000b2a0     4003          add     a0,a3
    2347 0000b2b0     8460          move    *a3,a0,W        ; get actual index
    2348 0000b2c0     0d5f          calla   CS_POINT        ; returns pointer to coin table in a6
         0000b2d0 00000000! 
    2349                    
    2350 0000b2f0     b6c0          move    *a6(CS_TITLE),a0,L
         0000b300     0170  
    2351 0000b310     2e01          srl     16,a1
    2352 0000b320     1161          addk    11,a1
    2353 0000b330     2601          sll     16,a1
    2354 0000b340     0b01          ADDI    260,A1
         0000b350     0104  
    2355 0000b360     098f          mmtm    sp,a1,a5
         0000b370     4400  
    2356 0000b380     5642          clr     a2
    2357 0000b390     09c3          movi    COLOR_YELLOW,a3
         0000b3a0     0505  
    2358 0000b3b0                   fcall   STRING,B6
    2359 0000b3f0     09af          mmfm    sp,a1,a5
         0000b400     0022  
    2360                    
    2361 0000b410     96a0          move    *a5+,a0,L
    2362 0000b420     0be1          SUBI    180,A1
         0000b430     ff4b  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   54

    2363 0000b440     09c3          movi    COLOR_GREEN,a3
         0000b450     0707  
    2364 0000b460     cbcf          jrnz    tut_lp
    2365 0000b470           no_tutor:
    2366 0000b470     09c3          movi    COLOR_WHITE,a3
         0000b480     0202  
    2367 0000b490     5642          clr     a2
    2368                    
    2369 0000b4a0                   PlotDipMac    DPCOUNTER,SW1XO,6,DCOUNTER_1,DCOUNTER_0
    2370 0000b5d0                   PlotDipMac    DPPLAYERS,SW2XO,4,DPLAYER_1,DPLAYER_0
    2371 0000b700                   PlotDipMac    DPVALIDATOR,SW2XO,0,DVALID_1,DVALID_0
    2372 0000b830                   PlotDipMac    DPATTSNDS,SW2XO,1,DATTSND_1,DATTSND_0
    2373 0000b960                   PlotDipMac    DPPWRUP,SW2XO,2,DROMTST_1,DROMTST_0
    2374 0000ba90                   PlotDipMac    DPHEADS,SW2XO,3,DHEDSIZ_1,DHEDSIZ_0
    2375                    
    2376 0000bbc0     09e0          MOVI    DTEST_0,A0
         0000bbd0 00013430' 
    2377 0000bbf0     09e1          MOVI    [SWYO+(7*SWYD),SW2XO],A1
         0000bc00 007b0105  
    2378 0000bc20                   FCALL   STRING,B6
    2379                    
    2380 0000bc60     0960          RETS
    2381                    
    2382 0000bc70           CoinTutorTbl:
    2383 0000bc70 0000bcf0'         .long   USAtutor,GERtutor,FRNtutor,0
    2384                    
    2385                    wl      $MACRO  AWORD,ALONG
    2386                            .word   :AWORD:
    2387                            .long   :ALONG:
    2388                            $ENDM
    2389                    
    2390 0000bcf0           USAtutor:
    2391 0000bcf0 0000c140'         .long   USAtutor_1
    2392 0000bd10                   wl      0,TwoTwo
    2393 0000bd40                   wl      1,TwoOne
    2394 0000bd70                   wl      2,OneOne
    2395 0000bda0                   wl      3,OneOne
    2396 0000bdd0                   wl      4,TwoTwo
    2397 0000be00                   wl      5,ThreeTwo
    2398 0000be30                   wl      6,ThreeThree
    2399 0000be60     ffff          .word   -1
    2400                    
    2401 0000be70           GERtutor:
    2402 0000be70 0000c5b0'         .long   GERtutor_1
    2403 0000be90                   wl      100h,TwoTwo
    2404 0000bec0                   wl      101h,TwoOne
    2405 0000bef0                   wl      102h,TwoOne
    2406 0000bf20                   wl      103h,TwoOne
    2407 0000bf50                   wl      104h,TwoTwo
    2408 0000bf80                   wl      105h,TwoOne
    2409 0000bfb0     ffff          .word   -1
    2410                    
    2411 0000bfc0           FRNtutor:
    2412 0000bfc0 0000c670'         .long   FRNtutor_1
    2413 0000bfe0                   wl      200h,TwoTwo
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   55

    2414 0000c010                   wl      201h,TwoOne
    2415 0000c040                   wl      202h,TwoOne
    2416 0000c070                   wl      203h,TwoOne
    2417 0000c0a0                   wl      204h,TwoTwo
    2418 0000c0d0                   wl      205h,TwoOne
    2419 0000c100                   wl      206h,TwoOne
    2420 0000c130     ffff          .word   -1
    2421                    
    2422                    
    2423 0000c140           USAtutor_1
    2424 0000c140       53          .STRING "STANDARD USA PRICING",0
    2425 0000c1f0                   .even
    2426 0000c1f0           OneOne
    2427 0000c1f0       31          .STRING "1 TO START / 1 TO CONT.",0
    2428 0000c2b0                   .even
    2429 0000c2b0           TwoTwo
    2430 0000c2b0       32          .STRING "2 TO START / 2 TO CONT.",0
    2431 0000c370                   .even
    2432 0000c370           TwoOne
    2433 0000c370       32          .STRING "2 TO START / 1 TO CONT.",0
    2434 0000c430                   .even
    2435 0000c430           ThreeTwo
    2436 0000c430       33          .STRING "3 TO START / 2 TO CONT.",0
    2437 0000c4f0                   .even
    2438 0000c4f0           ThreeThree
    2439 0000c4f0       33          .STRING "3 TO START / 3 TO CONT.",0
    2440 0000c5b0                   .even
    2441                    
    2442 0000c5b0           GERtutor_1
    2443 0000c5b0       53          .STRING "STANDARD GERMAN PRICING",0
    2444 0000c670                   .even
    2445                    
    2446 0000c670           FRNtutor_1
    2447 0000c670       53          .STRING "STANDARD FRENCH PRICING",0
    2448 0000c730                   .even
    2449                    
    2450                    
    2451                    
    2452                    **************************************************************************
    2453                    *                                                                        *
    2454                    *       CHECKDIPFREE                                                     *
    2455                    *                                                                        *
    2456                    *       CHECK TO SEE IF EITHER OF THE COIN SLOTS IS ON FREE PLAY,        *
    2457                    *       AND IF SO RETURN Z, OTHERWISE DON'T                              *
    2458                    *                                                                        *
    2459                    *       ENTRY                                                            *
    2460                    *               NOTHING                                                  *
    2461                    *                                                                        *
    2462                    *       EXIT                                                             *
    2463                    *               .EQ.    YES, FREEPLAY                                    *
    2464                    *                                                                        *
    2465                    **************************************************************************
    2466                    
    2467 0000c730           CHECKDIPFREE:
    2468 0000c730                   PUSH    A0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   56

    2469 0000c740     0d3f          CALLR   READ_DIP
         0000c750     0076  
    2470 0000c760     0b80          ANDI    DPCOINAGE,A0
         0000c770 fffffff1  
    2471 0000c790     0b40          CMPI    DPCOINAGE,A0
         0000c7a0     fff1  
    2472 0000c7b0           CDFRET
    2473 0000c7b0                   PULL    A0
    2474 0000c7d0     0960          RETS
    2475                    
    2476                    **************************************************************************
    2477                    *                                                                        *
    2478                    *       DIPPLOT                                                          *
    2479                    *                                                                        *
    2480                    *       PLOT OUT THE DIP SWITCHES                                        *
    2481                    *                                                                        *
    2482                    *       ENTRY                                                            *
    2483                    *               NOTHING                                                  *
    2484                    *                                                                        *
    2485                    *       EXIT                                                             *
    2486                    *               NOTHING                                                  *
    2487                    *                                                                        *
    2488                    **************************************************************************
    2489                    
    2490 0000c7e0           DIPPLOT:
    2491 0000c7e0     09e0          movi    [box1y+1,box1x+1],a0
         0000c7f0 00210015  
    2492 0000c810     09e1          movi    [box_height-2,box_width-2],a1
         0000c820 00660026  
    2493 0000c840     09c2          movi    COLOR_BLACK,a2
         0000c850     0808  
    2494 0000c860                   FCALL   RECTANGLE,b6                            ; blank area inside box 1
    2495                    
    2496 0000c8a0     09e0          movi    [box2y+1,box2x+1],a0
         0000c8b0 002100cf  
    2497 0000c8d0     09e1          movi    [box_height-2,box_width-2],a1
         0000c8e0 00660026  
    2498 0000c900     09c2          movi    COLOR_BLACK,a2
         0000c910     0808  
    2499 0000c920                   FCALL   RECTANGLE,b6                            ; blank area inside box 2
    2500                    
    2501 0000c960     0d3f          CALLR   READ_DIP
         0000c970     0054  
    2502 0000c980     0b80          andi    0ffffh,a0
         0000c990 ffff0000  
    2503 0000c9b0     5642          CLR     A2
    2504 0000c9c0           DIPLOOP
    2505 0000c9c0     4c43          MOVE    A2,A3
    2506 0000c9d0     24a3          SLL     5,A3
    2507 0000c9e0     0b23          ADDI    DIPYTAB,A3
         0000c9f0 0000ccc0' 
    2508 0000ca10     8663          MOVE    *A3,A3,L
    2509 0000ca20     2603          SLL     16,A3                   ; GOT THE Y LOC
    2510                    
    2511 0000ca30     56a5          CLR     A5
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   57

    2512 0000ca40     0b42          CMPI    8,A2                    ;Is this switch in the Second bank?
         0000ca50     fff7  
    2513 0000ca60     c802          JRLO    DIPL2                   ;BR = No
    2514 0000ca70     09c5          MOVI    210-sw2xoff,A5          ;Second bank, change X plot position
         0000ca80     00ba  
    2515 0000ca90           DIPL2
    2516 0000ca90     eca3          MOVX    A5,A3
    2517                    
    2518 0000caa0     4a40          BTST    A2,A0                   ; CHECK IF BIT IS SET
    2519 0000cab0     cb08          JRNZ    DIPON
    2520 0000cac0     09e1          MOVI    DP_OFF,A1
         0000cad0 00013790' 
    2521 0000caf0     0b03          ADDI    29,A3
         0000cb00     001d  
    2522 0000cb10     09c4          MOVI    COLOR_GREY,A4
         0000cb20     0404  
    2523 0000cb30     c007          JRUC    DIPSTR
    2524                    
    2525 0000cb40           DIPON
    2526 0000cb40     09e1          MOVI    DP_ON,A1
         0000cb50 00013770' 
    2527 0000cb70     0b03          ADDI    32,A3
         0000cb80     0020  
    2528 0000cb90     09c4          MOVI    COLOR_WHITE,A4
         0000cba0     0202  
    2529                    
    2530 0000cbb0           DIPSTR
    2531 0000cbb0     098f          MMTM    SP,A0,A2
         0000cbc0     a000  
    2532 0000cbd0     4c20          MOVE    A1,A0                   ; SET STRING
    2533 0000cbe0     4c61          MOVE    A3,A1                   ; SET LOCATION
    2534 0000cbf0     4c83          MOVE    A4,A3
    2535 0000cc00     5642          CLR     A2                      ; HORIZONTAL
    2536 0000cc10                   FCALL   STRING,B6
    2537 0000cc50     09af          MMFM    SP,A0,A2
         0000cc60     0005  
    2538 0000cc70     1022          INC     A2
    2539 0000cc80     0b42          CMPI    16,A2
         0000cc90     ffef  
    2540 0000cca0     c8d1          JRLO    DIPLOOP
    2541 0000ccb0     0960          RETS
    2542                    
    2543                    
    2544 0000ccc0           DIPYTAB
    2545 0000ccc0 00000027          .LONG   39,51,63,75,87,99,111,123
    2546 0000cdc0 00000027          .LONG   39,51,63,75,87,99,111,123
    2547                    
    2548                    **************************************************************************
    2549                    *                                                                        *
    2550                    *       READ_DIP                                                         *
    2551                    *                                                                        *
    2552                    *       READ IN BOTH DIP SWITCHES                                        *
    2553                    *                                                                        *
    2554                    *       ENTRY                                                            *
    2555                    *               NOTHING                                                  *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   58

    2556                    *                                                                        *
    2557                    *       EXIT                                                             *
    2558                    *               A0      DIP SWITCH                                       *
    2559                    *                                                                        *
    2560                    **************************************************************************
    2561                    
    2562 0000cec0           READ_DIP:
    2563 0000cec0     05a0          MOVE    @DIPSWITCH,A0,W         ; READ IT IN
         0000ced0 01860020  
    2564 0000cef0     03e0          NOT     A0                      ; INVERT IT FOR TRUE BITS
    2565 0000cf00     0960          RETS
    2566                    
    2567                    **************************************************************************
    2568                    *                                                                        *
    2569                    *       READ_SWITCH                                                      *
    2570                    *                                                                        *
    2571                    *       READ IN GAME SWITCHES                                            *
    2572                    *                                                                        *
    2573                    *       ENTRY                                                            *
    2574                    *               NOTHING                                                  *
    2575                    *                                                                        *
    2576                    *       EXIT                                                             *
    2577                    *               A0      SWITCH                                           *
    2578                    *                                                                        *
    2579                    **************************************************************************
    2580                    
    2581 0000cf10           READ_SWITCH:
    2582 0000cf10     07a0          MOVE    @SWITCH,A0,L            ; READ IT IN
         0000cf20 01860000  
    2583 0000cf40     03e0          NOT     A0                      ; INVERT IT FOR TRUE BITS
    2584 0000cf50     0960          RETS
    2585                    
    2586                    **************************************************************************
    2587                    *                                                                        *
    2588                    *       READ_COINSW                                                      *
    2589                    *                                                                        *
    2590                    *       READ IN COIN SWITCH                                              *
    2591                    *                                                                        *
    2592                    *       ENTRY                                                            *
    2593                    *               NOTHING                                                  *
    2594                    *                                                                        *
    2595                    *       EXIT                                                             *
    2596                    *               A0      COIN SWITCH                                      *
    2597                    *                                                                        *
    2598                    **************************************************************************
    2599                    
    2600 0000cf60           READ_COINSW:
    2601 0000cf60     05a0          MOVE    @COINS,A0,W             ; READ IT IN
         0000cf70 01860030  
    2602 0000cf90     03e0          NOT     A0                      ; INVERT IT FOR TRUE BITS
    2603 0000cfa0     0960          RETS
    2604                    
    2605                    
    2606                    **************************************************************************
    2607                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   59

    2608                    *       SWITCHTEST                                                       *
    2609                    *                                                                        *
    2610                    *       DRAW OUT THE TROG SWITCHES -- A PRETTY PICTURE                   *
    2611                    *                                                                        *
    2612                    *       ENTRY                                                            *
    2613                    *               NOTHING                                                  *
    2614                    *                                                                        *
    2615                    *       EXIT                                                             *
    2616                    *               NOTHING                                                  *
    2617                    *                                                                        *
    2618                    **************************************************************************
    2619                    
    2620 0000cfb0           SWITCHTEST:
    2621                    ;       PUSHST
    2622                    ;       DINT
    2623 0000cfb0                   MOVKM   1,@DIAG_DFLAG,W
    2624 0000cff0     57ad          CLR     A13                     ; THE HOLD ME REGISTER
    2625 0000d000     078d          MOVE    A13,@SWSET1,L
         0000d010 00000000- 
    2626 0000d030     078d          MOVE    A13,@SWSET2,L
         0000d040 00000020- 
    2627 0000d060     078d          MOVE    A13,@SWPREV1,L
         0000d070 00000040- 
    2628 0000d090     078d          MOVE    A13,@SWPREV2,L
         0000d0a0 00000060- 
    2629 0000d0c0     09e9          MOVI    BUT_TABLE,A9
         0000d0d0 0000e200' 
    2630 0000d0f0     574a          CLR     A10
    2631 0000d100     0d3f          CALLR   BUT_PLOT                ; PLOT SOME BUTTONS
         0000d110     0087  
    2632 0000d120     09e9          MOVI    JOY_TABLE,A9
         0000d130 0000f210' 
    2633 0000d150     0d3f          CALLR   JOY_PLOT                ; PLOT THE JOYSTICKS
         0000d160     00ac  
    2634 0000d170     09e9          MOVI    STR_TABLE,A9
         0000d180 0000f470' 
    2635 0000d1a0     0d3f          CALLR   STR_PLOT                ; PLOT THE STRINGS
         0000d1b0     00f9  
    2636 0000d1c0     09e9          MOVI    BUT_STRS,A9
         0000d1d0 0000fd90' 
    2637 0000d1f0     0d3f          CALLR   STR_PLOT                ; PLOT THE BUTTON STRINGS
         0000d200     00f4  
    2638                    
    2639 0000d210     09e0          MOVI    00B80005H,A0
         0000d220 00b80005  
    2640 0000d240     09e1          MOVI    00B8018BH,A1
         0000d250 00b8018b  
    2641 0000d270     09c2          MOVI    COLOR_WHITE,A2
         0000d280     0202  
    2642 0000d290                   FCALL   HVLINE,B6               ; DRAW LITTLE WHITE LINE
    2643                    
    2644 0000d2d0           sdloop
    2645 0000d2d0     058e          MOVE    A14,@WDOG_BONE,W
         0000d2e0 01860030  
    2646                    
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   60

    2647 0000d300     07aa          move    @SWITCH,a10,L           ; grab me a SWITCH register
         0000d310 01860000  
    2648 0000d330     03ea          not     a10
    2649 0000d340     05a0          move    @SWITCH+48,a0,W
         0000d350 01860030  
    2650 0000d370     03e0          not     a0
    2651 0000d380     0b80          andi    DONEMASK,a0
         0000d390 ffffffdb  
    2652 0000d3b0     0b60          cmpi    DONEMASK,a0,L           ; check for done
         0000d3c0 ffffffdb  
    2653 0000d3e0     cb08          jrnz    sdgo
    2654 0000d3f0                   CLRM    @DIAG_DFLAG,W
    2655 0000d430     058e          move    a14,@TIMER,W            ; 
         0000d440 00000000! 
    2656 0000d460     0960          rets
    2657 0000d470           sdgo
    2658 0000d470     07ab          move    @SWSET1,a11,L
         0000d480 00000000- 
    2659 0000d4a0     496a          cmp     a11,a10                 ; check for changes
    2660 0000d4b0     ca0e          jrz     sdck2
    2661 0000d4c0     078a          move    a10,@SWSET1,L
         0000d4d0 00000000- 
    2662 0000d4f0     05aa          move    @SWITCH+48,a10,W
         0000d500 01860030  
    2663 0000d520     03ea          not     a10
    2664 0000d530     0b8a          andi    0ffffh,a10              ; look only at 1st 16 bits
         0000d540 ffff0000  
    2665 0000d560     058a          move    a10,@SWSET2,W           ; store in SWITCH set #2
         0000d570 00000020- 
    2666 0000d590     c00f          jruc    sdproc
    2667                    
    2668 0000d5a0     05aa  sdck2   move    @SWITCH+48,a10,W
         0000d5b0 01860030  
    2669 0000d5d0     03ea          not     a10
    2670 0000d5e0     0b8a          andi    0ffffh,a10
         0000d5f0 ffff0000  
    2671 0000d610     05ab          move    @SWSET2,a11,W
         0000d620 00000020- 
    2672 0000d640     496a          cmp     a11,a10
    2673 0000d650     cac7          jrz     sdloop
    2674 0000d660     058a          move    a10,@SWSET2,W
         0000d670 00000020- 
    2675 0000d690           sdproc
    2676                    
    2677 0000d690     09e9          movi    BUT_TABLE,a9
         0000d6a0 0000e200' 
    2678 0000d6c0     0d3f          callr   BUT_PLOT
         0000d6d0     002b  
    2679 0000d6e0     09e9          MOVI    BUT_STRS,A9
         0000d6f0 0000fd90' 
    2680 0000d710     0d3f          CALLR   STR_PLOT                ; PLOT THE BUTTON STRINGS
         0000d720     00a2  
    2681 0000d730     09e9          MOVI    JOY_TABLE,A9
         0000d740 0000f210' 
    2682 0000d760     0d3f          CALLR   JOY_UPDATE              ; UPDATE THE JOYSTICK INFO
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   61

         0000d770     0058  
    2683                    ;       MOVI    SWITCHSTR_TAB,A9
    2684                    ;       CALLR   SWITCHSTR_PLOT
    2685                    
    2686 0000d780     07a1          move    @SWPREV1,a1,L
         0000d790 00000040- 
    2687 0000d7b0     03e1          not     a1
    2688 0000d7c0     07a2          move    @SWSET1,a2,L
         0000d7d0 00000000- 
    2689 0000d7f0     03e2          not     a2
    2690 0000d800     5441          or      a2,a1
    2691 0000d810     4822          cmp     a1,a2
    2692 0000d820     cb0b          jrnz    sdsound
    2693 0000d830     05a1          move    @SWPREV2,a1,W
         0000d840 00000060- 
    2694 0000d860     03e1          not     a1
    2695 0000d870     05a2          move    @SWSET2,a2,W
         0000d880 00000020- 
    2696 0000d8a0     03e2          not     a2
    2697 0000d8b0     5441          or      a2,a1
    2698 0000d8c0     4822          cmp     a1,a2
    2699 0000d8d0     0300          jrz     sdnosound
    2700                    
    2701 0000d8e0           sdsound
    2702                    ;       movi    0fd8bh,a0
    2703                    ;       move    a0,@SOUND,W
    2704                    ;       movi    0ff8bh,a0
    2705                    ;       move    a0,@SOUND,W
    2706                    
    2707                    
    2708 0000d8e0           sdnosound
    2709 0000d8e0     07c0          move    @SWSET1,@SWPREV1,L
         0000d8f0 00000000- 
         0000d910 00000040- 
    2710 0000d930     05c0          move    @SWSET2,@SWPREV2,W
         0000d940 00000020- 
         0000d960 00000060- 
    2711                    
    2712 0000d980     c094          jruc    sdloop
    2713                    
    2714                    
    2715                    **************************************************************************
    2716                    *                                                                        *
    2717                    *       BUT_PLOT                                                         *
    2718                    *                                                                        *
    2719                    *       PLOT A BUTTON TABLE ON THE SCREEN                                *
    2720                    *                                                                        *
    2721                    *       ENTRY                                                            *
    2722                    *               A9      POINTS TO BUTTON TABLE LIST                      *
    2723                    *               A10     SETTINGS OF THE SWITCH REGISTER                  *
    2724                    *                                                                        *
    2725                    *       EXIT                                                             *
    2726                    *               NOTHING                                                  *
    2727                    *                                                                        *
    2728                    **************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   62

    2729 0000d990           BUT_PLOT:
    2730 0000d990     9721          MOVE    *A9+,A1,L               ; XY LOC
    2731 0000d9a0     ca27          JRZ     BPDONE
    2732 0000d9b0     9520          MOVE    *A9+,A0,W               ; RADIUS
    2733 0000d9c0     9726          MOVE    *A9+,A6,L               ; COLOR
    2734 0000d9d0     972b          MOVE    *A9+,A11,L              ; GET MASK
    2735 0000d9e0     1209          ADDK    16,A9                   ; SHIFT COUNT
    2736 0000d9f0     9528          MOVE    *A9+,A8,W               ; JAMMA EXTEND-O-BIT
    2737 0000da00     ca04          JRZ     BPLOW
    2738 0000da10     07aa          MOVE    @SWSET2,A10,L
         0000da20 00000020- 
    2739 0000da40     c003          JRUC    BPAND
    2740 0000da50           BPLOW
    2741 0000da50     07aa          MOVE    @SWSET1,A10,L
         0000da60 00000000- 
    2742 0000da80           BPAND
    2743 0000da80     514b          AND     A10,A11                 ; MASK OFF SOMETHING USEFUL
    2744 0000da90     ca05          JRZ     BPHOLLOW
    2745 0000daa0     1440          SUBK    2,A0
    2746 0000dab0     0b26          ADDI    CFILL,A6                ; MASK IN THE FILL BITS
         0000dac0 ffff0000  
    2747 0000dae0     c00e          JRUC    BPCIRC
    2748 0000daf0           BPHOLLOW
    2749 0000daf0     098f          MMTM    SP,A0,A1,A6
         0000db00     c200  
    2750 0000db10     1440          SUBK    2,A0
    2751 0000db20     09c6          MOVI    COLOR_BLACK,A6
         0000db30     0808  
    2752 0000db40     0b26          ADDI    CFILL,A6
         0000db50 ffff0000  
    2753 0000db70                   FCALL   CIRCLE,B6
    2754 0000dbb0     09af          MMFM    SP,A0,A1,A6
         0000dbc0     0043  
    2755 0000dbd0           BPCIRC
    2756 0000dbd0                   FCALL   CIRCLE,B6
    2757 0000dc10     c0d7          JRUC    BUT_PLOT
    2758 0000dc20           BPDONE
    2759 0000dc20     0960          RETS
    2760                    
    2761                    
    2762                    **************************************************************************
    2763                    *                                                                        *
    2764                    *       JOY_PLOT                                                         *
    2765                    *                                                                        *
    2766                    *       PLOT A BUTTON TABLE ON THE SCREEN                                *
    2767                    *                                                                        *
    2768                    *       ENTRY                                                            *
    2769                    *               A9      POINTS TO BUTTON TABLE LIST                      *
    2770                    *                                                                        *
    2771                    **************************************************************************
    2772                    
    2773 0000dc30           JOY_PLOT:
    2774 0000dc30     8721          MOVE    *A9,A1,L                ; XY LOC
    2775 0000dc40     ca0a          JRZ     JPDONE
    2776 0000dc50     1009          ADDK    32,A9                   
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   63

    2777 0000dc60     9520          MOVE    *A9+,A0                 ; RADIUS
    2778 0000dc70     8726          MOVE    *A9,A6,L                ; COLOR
    2779 0000dc80     0b09          ADDI    96,A9
         0000dc90     0060  
    2780 0000dca0                   FCALL   CIRCLE,B6
    2781 0000dce0     c0f4          JRUC    JOY_PLOT
    2782 0000dcf0           JPDONE
    2783 0000dcf0     0960          RETS
    2784                    
    2785                    **************************************************************************
    2786                    *                                                                        *
    2787                    *       JOY_UPDATE                                                       *
    2788                    *                                                                        *
    2789                    *       UPDATE ALL THE STICK INFORMATION                                 *
    2790                    *                                                                        *
    2791                    *       ENTRY                                                            *
    2792                    *               A9      JOYSTICK TABLE POINTER                           *
    2793                    *               A10     SWITCH INFORMATION                               *
    2794                    *                                                                        *
    2795                    *       EXIT                                                             *
    2796                    *               NOTHING                                                  *
    2797                    *                                                                        *
    2798                    **************************************************************************
    2799                    
    2800 0000dd00           JOY_UPDATE:
    2801 0000dd00     8721          MOVE    *A9,A1,L                ; XY LOC
    2802 0000dd10     ca1d          JRZ     JUDONE
    2803 0000dd20     0b09          ADDI    32,A9                   
         0000dd30     0020  
    2804 0000dd40     9520          MOVE    *A9+,A0                 ; RADIUS
    2805 0000dd50     972b          MOVE    *A9+,A11,L              ; COLOR
    2806 0000dd60     9726          MOVE    *A9+,A6,L               ; MASK
    2807 0000dd70     9527          MOVE    *A9+,A7                 ; SHIFT COUNT
    2808 0000dd80     8528          MOVE    *A9,A8                  ; EXTEND-O-BIT FOR JAMMA
    2809 0000dd90     ca04          JRZ     JULOW
    2810 0000dda0     07aa          MOVE    @SWSET2,A10,L
         0000ddb0 00000020- 
    2811 0000ddd0     c003          JRUC    JUAND
    2812 0000dde0           JULOW
    2813 0000dde0     07aa          MOVE    @SWSET1,A10,L
         0000ddf0 00000000- 
    2814 0000de10           JUAND
    2815 0000de10     1209          ADDK    16,A9
    2816 0000de20     5146          AND     A10,A6                  ; MASK OFF JOYSTICK BITS
    2817 0000de30     03e7          NOT     A7
    2818 0000de40     1027          ADDK    1,A7
    2819 0000de50     66e6          SRL     A7,A6                   ; ZERO BASE THE LITTLE SUCKER
    2820 0000de60     098f          MMTM    SP,A9,A10,A8,A7
         0000de70     01e0  
    2821 0000de80     4c29          MOVE    A1,A9                   ; CENTER OF STICK HERE
    2822 0000de90     4cca          MOVE    A6,A10                  ; BUTTON MASK
    2823 0000dea0     0d3f          CALLR   JOY_MESS
         0000deb0     0004  
    2824 0000dec0     09af          MMFM    SP,A9,A10,A8,A7
         0000ded0     0780  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   64

    2825 0000dee0     c0e1          JRUC    JOY_UPDATE
    2826 0000def0           JUDONE
    2827 0000def0     0960          RETS
    2828                    
    2829                    
    2830                    **************************************************************************
    2831                    *                                                                        *
    2832                    *       JOY_MESS                                                         *
    2833                    *                                                                        *
    2834                    *       PLOT THE STATUS OF A JOYSTICK AROUND A CIRCLE                    *
    2835                    *                                                                        *
    2836                    *       ENTRY                                                            *
    2837                    *               A9      CENTER OF STICK CIRCLE                           *
    2838                    *               A10     BUTTON MASK                                      *
    2839                    *               A11     COLOR                                            *
    2840                    *                                                                        *
    2841                    *       EXIT                                                             *
    2842                    *               NOTHING                                                  *
    2843                    *                                                                        *
    2844                    **************************************************************************
    2845                            
    2846 0000df00           JOY_MESS
    2847 0000df00     09e8          MOVI    JJJTAB,A8
         0000df10 0000e090' 
    2848 0000df30     1887          MOVK    4,A7
    2849 0000df40           JML
    2850 0000df40     09c3          MOVI    COLOR_BLACK,A3
         0000df50     0808  
    2851 0000df60     2fea          SRL     1,A10
    2852 0000df70     c901          JRNC    JM1
    2853 0000df80     4d63          MOVE    A11,A3                  ; SET COLOR
    2854                    ;       MOVK    1,A14
    2855                    ;       MOVE    A14,@SCHANGE,W
    2856 0000df90           JM1
    2857 0000df90     9700          MOVE    *A8+,A0,L
    2858 0000dfa0     4d21          MOVE    A9,A1                   ; CIRCLE CENTER
    2859 0000dfb0     8f02          MOVB    *A8,A2                  ;X CORRECTION
    2860 0000dfc0     1108          ADDK    8,A8
    2861 0000dfd0     4041          ADD     A2,A1
    2862 0000dfe0     8f02          MOVB    *A8,A2                  ;Y CORRECTION
    2863 0000dff0     1108          ADDK    8,A8
    2864 0000e000     2602          SLL     16,A2
    2865 0000e010     4041          ADD     A2,A1
    2866 0000e020     5642          CLR     A2                      ; DIRECTION
    2867 0000e030                   FCALL   STRING,B6
    2868 0000e070     3e87          DSJS    A7,JML
    2869 0000e080     0960          RETS
    2870                    *
    2871                    *JOYSTICK MESSAGE TABLE
    2872                    *
    2873 0000e090           JJJTAB
    2874 0000e090 00010860'         .LONG   P_UP
    2875 0000e0b0       f9          .BYTE   -7,-25
    2876                    
    2877 0000e0c0 00010880'         .LONG   P_DOWN
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   65

    2878 0000e0e0       f3          .BYTE   -13,18
    2879                    
    2880 0000e0f0 000108a0'         .LONG   P_LEFT
    2881 0000e110       d9          .BYTE   -39,-4
    2882                    
    2883 0000e120 000108c0'         .LONG   P_RIGHT
    2884 0000e140       12          .BYTE   18,-4
    2885                    
    2886                    
    2887                            .if 0
    2888                    **************************************************************************
    2889                    *                                                                        *
    2890                    * SWITCHSTR_PLOT - CHECK SWITCHES AND PLOT CORRESPONDING STRING.         *
    2891                    * A9 = POINTS TO SWITCH STRING TABLE LIST                                *
    2892                    * A10 = SETTINGS OF THE SWITCH REGISTER                                  *
    2893                    *                                                                        *
    2894                    **************************************************************************
    2895                    SWITCHSTR_PLOT:
    2896                            MOVE    *A9+,A1,L               ;XY LOC
    2897                            JRZ     SSTR_DONE
    2898                            MOVE    *A9+,A0,L               ;STRING PTR
    2899                            MOVE    *A9+,A3,W               ;COLOR
    2900                            MOVE    *A9+,A2,W               ;DIRECTION
    2901                            MOVE    *A9+,A11,L              ;GET MASK
    2902                            MOVE    @SWSET1,A10,L
    2903                            AND     A10,A11                 ;CHECK JUST OUR SWITCH
    2904                            JRNZ    SSTR_PLOT
    2905                            MOVI    COLOR_BLACK,A3
    2906                    SSTR_PLOT
    2907                            FCALL   STRING,B6
    2908                            JRUC    SWITCHSTR_PLOT
    2909                    SSTR_DONE
    2910                            RETS
    2911                    
    2912                            .endif
    2913                    **************************************************************************
    2914                    *                                                                        *
    2915                    *       STR_PLOT                                                         *
    2916                    *                                                                        *
    2917                    *       PLOT A STRING TABLE ON THE SCREEN                                *
    2918                    *                                                                        *
    2919                    *       ENTRY                                                            *
    2920                    *               A9      POINTS TO STRING TABLE LIST                      *
    2921                    *                                                                        *
    2922                    **************************************************************************
    2923                    
    2924 0000e150           STR_PLOT:
    2925 0000e150     9721          MOVE    *A9+,A1,L               ; XY LOC
    2926 0000e160     ca08          JRZ     STDONE
    2927 0000e170     9720          MOVE    *A9+,A0,L               ; STRING PTR
    2928 0000e180     9523          MOVE    *A9+,A3,W               ; COLOR
    2929 0000e190     9522          MOVE    *A9+,A2,W               ; DIRECTION
    2930 0000e1a0                   FCALL   STRING,B6
    2931 0000e1e0     c0f6          JRUC    STR_PLOT
    2932 0000e1f0           STDONE
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   66

    2933 0000e1f0     0960          RETS
    2934                    
    2935          ffff0000  CFILL   EQU     0FFFF0000H
    2936                    
    2937                    ;
    2938                    ;       FORMAT
    2939                    ;
    2940                    ;       X,Y,RADIUS,COLOR,MASK,SHIFT COUNT ( FOR JOYSTICK STUFF ), EXTENDBIT
    2941                    ;
    2942                    
    2943              0303  COLOR_P1        EQU     COLOR_BLUE
    2944              0505  COLOR_P2        EQU     COLOR_YELLOW
    2945              0707  COLOR_P3        EQU     COLOR_GREEN
    2946              0101  COLOR_P4        EQU     COLOR_RED
    2947                    
    2948                    **************************************************************************
    2949                    *                                                                        *
    2950                    *       Y-UNIT DEFS                                                      *
    2951                    *                                                                        *
    2952                    **************************************************************************
    2953                    
    2954                    
    2955              0020  BUTX1   .set    32
    2956              0030  XD      .set    48
    2957                    
    2958 0000e200           BUT_TABLE:
    2959 0000e200                   BUT_MAC BUTX1,199,10,COLOR_GREEN,00000001h,0,1          ; coin left
    2960 0000e290                   BUT_MAC BUTX1+XD,199,10,COLOR_GREEN,00000002h,0,1       ; coin right
    2961 0000e320                   BUT_MAC BUTX1+(2*XD),199,10,COLOR_GREEN,00000080h,0,1   ; coin center
    2962 0000e3b0                   BUT_MAC BUTX1+(3*XD),199,10,COLOR_GREEN,00000100h,0,1   ; fourth coin
    2963 0000e440                   BUT_MAC BUTX1+(4*XD),199,10,COLOR_GREEN,00008000h,0,1   ; bill input
    2964 0000e4d0                   BUT_MAC BUTX1+(5*XD),199,10,COLOR_GREEN,00000040h,0,1   ; service credit
    2965 0000e560                   BUT_MAC BUTX1+(6*XD),199,10,COLOR_GREEN,00000008h,0,1   ; slam
    2966 0000e5f0                   BUT_MAC BUTX1+(7*XD),199,10,COLOR_GREEN,00000010h,0,1   ; test
    2967 0000e680                   BUT_MAC 173,240,10,COLOR_RED,00000800h,0,1              ; volume down
    2968 0000e710                   BUT_MAC 207,240,10,COLOR_RED,00001000h,0,1              ; volume up
    2969 0000e7a0                   BUT_MAC 288,240,10,COLOR_GREEN,00002000h,0,1            ; coindoor interlock
    2970                    
    2971                    
    2972 0000e830                   BUT_MAC P1X+20,PBCY,10,COLOR_BLUE,020H,0,0              ; P1 A2
    2973 0000e8c0                   BUT_MAC P1X,PBCY-12,10,COLOR_RED,010H,0,0               ; P1 A1
    2974 0000e950                   BUT_MAC P1X-20,PBCY,10,COLOR_WHITE,040H,0,0             ; P1 A3
    2975                    
    2976 0000e9e0                   BUT_MAC P2X+20,PBCY,10,COLOR_BLUE,02000H,0,0            ; P2 A2
    2977 0000ea70                   BUT_MAC P2X,PBCY-12,10,COLOR_RED,01000H,0,0             ; P2 A1
    2978 0000eb00                   BUT_MAC P2X-20,PBCY,10,COLOR_WHITE,04000H,0,0           ; P2 A3
    2979                    
    2980 0000eb90                   BUT_MAC P3X+20,PBCY,10,COLOR_BLUE,0200000H,0,0          ; P3 A2
    2981 0000ec20                   BUT_MAC P3X,PBCY-12,10,COLOR_RED,0100000H,0,0           ; P3 A1
    2982 0000ecb0                   BUT_MAC P3X-20,PBCY,10,COLOR_WHITE,0400000H,0,0         ; P3 A3
    2983                    
    2984 0000ed40                   BUT_MAC P4X+20,PBCY,10,COLOR_BLUE,020000000H,0,0        ; P4 A2
    2985 0000edd0                   BUT_MAC P4X,PBCY-12,10,COLOR_RED,010000000H,0,0         ; P4 A1
    2986 0000ee60                   BUT_MAC P4X-20,PBCY,10,COLOR_WHITE,040000000H,0,0       ; P4 A3
    2987                    
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   67

    2988 0000eef0                   BUT_MAC P1X,50,10,COLOR_YELLOW,0000004h,0,1     ; p1 start
    2989 0000ef80                   BUT_MAC P2X,50,10,COLOR_YELLOW,0000020h,0,1     ; p2 start
    2990 0000f010                   BUT_MAC P3X,50,10,COLOR_YELLOW,0000200h,0,1     ; p3 start
    2991 0000f0a0                   BUT_MAC P4X,50,10,COLOR_YELLOW,0000400h,0,1     ; p4 start
    2992                            
    2993 0000f130 00000000          .LONG   0
    2994                    
    2995              0024  DONEMASK        EQU     0024H           ; P1 START + P2 START
    2996                    
    2997              0014  WBDAL   equ     20
    2998              008c  PBCY    .equ    140
    2999              0041  P1X     equ     65
    3000              009b  P2X     equ     155
    3001              00f5  P3X     equ     245
    3002              014f  P4X     equ     335
    3003                    
    3004                    
    3005 0000f150       4a  J1MESS  .string "JOY1",0
    3006 0000f180                   .even
    3007 0000f180       4a  J2MESS  .string "JOY2",0
    3008 0000f1b0                   .even
    3009 0000f1b0       4a  J3MESS  .string "JOY3",0
    3010 0000f1e0                   .even
    3011 0000f1e0       4a  J4MESS  .string "JOY4",0
    3012 0000f210                   .even
    3013                    
    3014                    
    3015                            .if 0           ; not used for this game
    3016                    SWITCHSTR_TAB
    3017                    SWTY    equ     76
    3018                            SW_MAC  P1X-WBDAL,SWTY,P_UP,COLOR_P1,0, 00000001H       ;P1 UP
    3019                            SW_MAC  P2X-WBDAL,SWTY,P_UP,COLOR_P2,0,00000100H        ;P2 UP
    3020                            SW_MAC  P3X-WBDAL,SWTY,P_UP,COLOR_P3,0,00010000H        ;P3 UP
    3021                            SW_MAC  P4X-WBDAL,SWTY,P_UP,COLOR_P4,0,01000000H        ;P4 UP
    3022                            SW_MAC  P1X-WBDAL,SWTY+10,P_DOWN,COLOR_P1,0, 00000002H  ;P1 DOWN
    3023                            SW_MAC  P2X-WBDAL,SWTY+10,P_DOWN,COLOR_P2,0,00000200H   ;P2 DOWN
    3024                            SW_MAC  P3X-WBDAL,SWTY+10,P_DOWN,COLOR_P3,0,00020000H   ;P3 DOWN
    3025                            SW_MAC  P4X-WBDAL,SWTY+10,P_DOWN,COLOR_P4,0,02000000H   ;P4 DOWN
    3026                            SW_MAC  P1X-WBDAL,SWTY+20,P_LEFT,COLOR_P1,0, 00000004H  ;P1 LEFT
    3027                            SW_MAC  P2X-WBDAL,SWTY+20,P_LEFT,COLOR_P2,0,00000400H   ;P2 LEFT
    3028                            SW_MAC  P3X-WBDAL,SWTY+20,P_LEFT,COLOR_P3,0,00040000H   ;P3 LEFT
    3029                            SW_MAC  P4X-WBDAL,SWTY+20,P_LEFT,COLOR_P4,0,04000000H   ;P4 LEFT
    3030                            SW_MAC  P1X-WBDAL,SWTY+30,P_RIGHT,COLOR_P1,0, 00000008H ;P1 RIGHT
    3031                            SW_MAC  P2X-WBDAL,SWTY+30,P_RIGHT,COLOR_P2,0,00000800H  ;P2 RIGHT
    3032                            SW_MAC  P3X-WBDAL,SWTY+30,P_RIGHT,COLOR_P3,0,00080000H  ;P3 RIGHT
    3033                            SW_MAC  P4X-WBDAL,SWTY+30,P_RIGHT,COLOR_P4,0,08000000H  ;P4 RIGHT
    3034                            SW_MAC  P1X-WBDAL,SWTY+40,P_RBUT,COLOR_P1,0, 00000010H  ;P1 RBUT
    3035                            SW_MAC  P2X-WBDAL,SWTY+40,P_RBUT,COLOR_P2,0,00001000H   ;P2 RBUT
    3036                            SW_MAC  P3X-WBDAL,SWTY+40,P_RBUT,COLOR_P3,0,00100000H   ;P3 RBUT
    3037                            SW_MAC  P4X-WBDAL,SWTY+40,P_RBUT,COLOR_P4,0,10000000H   ;P4 RBUT
    3038                            SW_MAC  P1X-WBDAL,SWTY+50,P_WBUT,COLOR_P1,0, 00000040H  ;P1 WBUT
    3039                            SW_MAC  P2X-WBDAL,SWTY+50,P_WBUT,COLOR_P2,0,00004000H   ;P2 WBUT
    3040                            SW_MAC  P3X-WBDAL,SWTY+50,P_WBUT,COLOR_P3,0,00400000H   ;P3 WBUT
    3041                            SW_MAC  P4X-WBDAL,SWTY+50,P_WBUT,COLOR_P4,0,40000000H   ;P4 WBUT
    3042                            SW_MAC  P1X-WBDAL,SWTY+60,P_BBUT,COLOR_P1,0, 00000020H  ;P1 BBUT
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   68

    3043                            SW_MAC  P2X-WBDAL,SWTY+60,P_BBUT,COLOR_P2,0,00002000H   ;P2 BBUT
    3044                            SW_MAC  P3X-WBDAL,SWTY+60,P_BBUT,COLOR_P3,0,00200000H   ;P3 BBUT
    3045                            SW_MAC  P4X-WBDAL,SWTY+60,P_BBUT,COLOR_P4,0,20000000H   ;P4 BBUT
    3046                            .LONG   0
    3047                                 .endif
    3048                    
    3049                    
    3050                            ;       X,Y,RADIUS,COLOR,MASK,SHIFT,EXTEND
    3051 0000f210           JOY_TABLE
    3052 0000f210                   BUT_MAC P1X,90,16,CFILL+COLOR_RED,0fH,0,0               ; P1 MOVE
    3053 0000f2a0                   BUT_MAC P2X,90,16,CFILL+COLOR_RED,0f00H,8,0             ; P2 MOVE
    3054 0000f330                   BUT_MAC P3X,90,16,CFILL+COLOR_RED,0f0000h,16,0          ; P3 MOVE
    3055 0000f3c0                   BUT_MAC P4X,90,16,CFILL+COLOR_RED,0f000000H,24,0        ; P4 MOVE
    3056 0000f450 00000000          .LONG   0
    3057                    
    3058 0000f470           STR_TABLE:
    3059 0000f470                   STR_MAC 120,5,SWITCH_TITLE,COLOR_WHITE,0                ;TITLE
    3060 0000f4d0                   STR_MAC P1X-30,28,p1hdr,COLOR_YELLOW,0  ; p1 start
    3061 0000f530                   STR_MAC P2X-30,28,p2hdr,COLOR_YELLOW,0  ; p2 start
    3062 0000f590                   STR_MAC P3X-30,28,p3hdr,COLOR_YELLOW,0  ; p3 start
    3063 0000f5f0                   STR_MAC P4X-30,28,p4hdr,COLOR_YELLOW,0  ; p4 start
    3064 0000f650                   STR_MAC 161-(3*XD),225,LEFTSLOT,COLOR_GREEN,0   ; left coin
    3065 0000f6b0                   STR_MAC 160-(2*XD),225,RIGHTSLOT,COLOR_GREEN,0  ; right coin
    3066 0000f710                   STR_MAC 158-XD,214,CENTER,COLOR_GREEN,0 ; coin3
    3067 0000f770                   STR_MAC 158,214,FOURTH,COLOR_GREEN,0    ; coin4
    3068 0000f7d0                   STR_MAC 212,214,billinput,COLOR_GREEN,0 ; bill input
    3069 0000f830                   STR_MAC 158-(3*XD),214,COINMESS1,COLOR_GREEN,0  ; coin1
    3070 0000f890                   STR_MAC 158-(2*XD),214,COINMESS2,COLOR_GREEN,0  ; coin2
    3071 0000f8f0                   STR_MAC 247,214,SERVICE1,COLOR_GREEN,0  ; service credit
    3072 0000f950                   STR_MAC 305,214,SLAM_STR,COLOR_GREEN,0  ; slam
    3073 0000f9b0                   STR_MAC 354,214,TEST,COLOR_GREEN,0      ; test switch
    3074 0000fa10                   STR_MAC 114,237,vdown,COLOR_RED,0       ;volume down
    3075 0000fa70                   STR_MAC 220,237,vup,COLOR_RED,0         ;volume up
    3076 0000fad0                   STR_MAC 302,237,interlock,COLOR_GREEN,0 ; coindoor interlock
    3077 0000fb30                   STR_MAC 75,160,EXITMESS1,COLOR_WHITE,0          ;EXIT MESSAGE 1
    3078 0000fb90                   STR_MAC 168,170,EXITMESS2,COLOR_WHITE,0         ;EXIT MESSAGE 2
    3079                    
    3080 0000fbf0                   STR_MAC P1X-15,90-3,J1MESS,COLOR_WHITE,0
    3081 0000fc50                   STR_MAC P2X-15,90-3,J2MESS,COLOR_WHITE,0
    3082 0000fcb0                   STR_MAC P3X-15,90-3,J3MESS,COLOR_WHITE,0
    3083 0000fd10                   STR_MAC P4X-15,90-3,J4MESS,COLOR_WHITE,0
    3084                            
    3085 0000fd70 00000000          .LONG   0
    3086                    
    3087                    
    3088 0000fd90           BUT_STRS
    3089 0000fd90                   STR_MAC P1X+18,PBCY-4,PASSMESS,COLOR_BLUE,0             ; P1 A2
    3090 0000fdf0                   STR_MAC P1X-3,PBCY-16,SHOOTMESS,COLOR_RED,0             ; P1 A1
    3091 0000fe50                   STR_MAC P1X-23,PBCY-4,TURBOMESS,COLOR_WHITE,0           ; P1 A3
    3092                    
    3093 0000feb0                   STR_MAC P2X+18,PBCY-4,PASSMESS,COLOR_BLUE,0             ; P1 A2
    3094 0000ff10                   STR_MAC P2X-3,PBCY-16,SHOOTMESS,COLOR_RED,0             ; P1 A1
    3095 0000ff70                   STR_MAC P2X-23,PBCY-4,TURBOMESS,COLOR_WHITE,0           ; P1 A3
    3096                    
    3097 0000ffd0                   STR_MAC P3X+18,PBCY-4,PASSMESS,COLOR_BLUE,0             ; P1 A2
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   69

    3098 00010030                   STR_MAC P3X-3,PBCY-16,SHOOTMESS,COLOR_RED,0             ; P1 A1
    3099 00010090                   STR_MAC P3X-23,PBCY-4,TURBOMESS,COLOR_WHITE,0           ; P1 A3
    3100                    
    3101 000100f0                   STR_MAC P4X+18,PBCY-4,PASSMESS,COLOR_BLUE,0             ; P1 A2
    3102 00010150                   STR_MAC P4X-3,PBCY-16,SHOOTMESS,COLOR_RED,0             ; P1 A1
    3103 000101b0                   STR_MAC P4X-23,PBCY-4,TURBOMESS,COLOR_WHITE,0           ; P1 A3
    3104                    
    3105 00010210 00000000          .LONG   0
    3106                    
    3107 00010230       50  PASSMESS .STRING        "P",0
    3108 00010240       53  SHOOTMESS .STRING       "S",0
    3109 00010250       54  TURBOMESS .STRING       "T",0
    3110 00010260                   .even
    3111                    
    3112 00010260           interlock
    3113 00010260       49          .string "INTERLOCK",0
    3114 000102b0                   .even
    3115 000102b0           billinput
    3116 000102b0       42          .string "BILL",0
    3117 000102e0                   .even
    3118                    
    3119 000102e0           SWITCH_TITLE
    3120 000102e0       4f          .STRING "OPEN ICE - SWITCH TEST",0
    3121 00010398           EXITMESS1
    3122 00010398       50          .STRING "PRESS PLYR 1 START AND PLYR 2 START",0
    3123 000104c0                   .EVEN
    3124 000104c0           EXITMESS2
    3125 000104c0       54          .STRING "TO EXIT",0
    3126 00010500                   .EVEN
    3127 00010500           LEFTSLOT
    3128 00010500       4c          .STRING "LEFT",0
    3129 00010530                   .EVEN
    3130 00010530           RIGHTSLOT
    3131 00010530       52          .STRING "RIGHT",0
    3132 00010560                   .EVEN
    3133 00010560           SERVICE1
    3134 00010560       53          .STRING "SERVICE",0
    3135 000105a0                   .EVEN
    3136 000105a0           SERVICE2
    3137 000105a0       43          .STRING "CREDIT",0
    3138 000105e0                   .EVEN
    3139                    
    3140                    
    3141 000105e0           STSTART
    3142 000105e0       53          .STRING "STARTS",0
    3143 00010620                   .EVEN
    3144                    
    3145 00010620           p1hdr
    3146 00010620       50          .STRING "P1 START",0
    3147 00010670                   .EVEN
    3148 00010670           p2hdr
    3149 00010670       50          .STRING "P2 START",0
    3150 000106c0                   .EVEN
    3151 000106c0           p3hdr
    3152 000106c0       50          .STRING "P3 START",0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   70

    3153 00010710                   .EVEN
    3154 00010710           p4hdr
    3155 00010710       50          .STRING "P4 START",0
    3156 00010760                   .EVEN
    3157                    
    3158 00010760           P_RBUT
    3159 00010760       52          .STRING "RED BUT.",0
    3160 000107b0                   .EVEN
    3161 000107b0           P_WBUT
    3162 000107b0       57          .STRING "WHITE BUT.",0
    3163 00010810                   .EVEN
    3164 00010810           P_BBUT
    3165 00010810       42          .STRING "BLUE BUT.",0
    3166 00010860                   .EVEN
    3167 00010860           P_UP
    3168 00010860       55          .STRING "UP",0
    3169 00010880                   .EVEN
    3170 00010880           P_DOWN
    3171 00010880       44          .STRING "DWN",0
    3172 000108a0                   .EVEN
    3173 000108a0           P_LEFT
    3174 000108a0       4c          .STRING "LFT",0
    3175 000108c0                   .EVEN
    3176 000108c0           P_RIGHT
    3177 000108c0       52          .STRING "RT",0
    3178 000108e0                   .EVEN
    3179                    
    3180 000108e0           COINMESS1
    3181 000108e0       43          .STRING "COIN1",0
    3182 00010910                   .EVEN
    3183 00010910           COINMESS2
    3184 00010910       43          .STRING "COIN2",0
    3185 00010940                   .EVEN
    3186                    
    3187 00010940           CENTER
    3188 00010940       43          .STRING "COIN3",0
    3189 00010970                   .EVEN
    3190 00010970           FOURTH
    3191 00010970       43          .STRING "COIN4",0
    3192 000109a0                   .EVEN
    3193                    
    3194 000109a0           SLAM_STR
    3195 000109a0       53          .STRING "SLAM",0
    3196 000109d0                   .EVEN
    3197 000109d0           TEST
    3198 000109d0       54          .STRING "TEST",0
    3199 00010a00                   .EVEN
    3200                    
    3201 00010a00           vdown
    3202 00010a00       56          .STRING "VOL DN",0
    3203 00010a38           vup
    3204 00010a38       56          .STRING "VOL UP",0
    3205                    
    3206                    **************************************************************************
    3207                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   71

    3208                    *       MONITOR TEST DATA AREA                                           *
    3209                    *                                                                        *
    3210                    **************************************************************************
    3211                    
    3212 00010a70           MON_VECS:
    3213 00010a70                   VECMAC  COLOR_WHITE,004,004,396,004
    3214 00010ac0                   VECMAC  COLOR_WHITE,004,004,004,250
    3215 00010b10                   VECMAC  COLOR_WHITE,004,250,396,250
    3216 00010b60                   VECMAC  COLOR_WHITE,396,250,396,004
    3217 00010bb0                   VECMAC  COLOR_WHITE,060,005,060,250
    3218 00010c00                   VECMAC  COLOR_WHITE,115,005,115,250
    3219 00010c50                   VECMAC  COLOR_WHITE,170,005,170,250
    3220 00010ca0                   VECMAC  COLOR_WHITE,225,005,225,250
    3221 00010cf0                   VECMAC  COLOR_WHITE,280,005,280,250
    3222 00010d40                   VECMAC  COLOR_WHITE,335,005,335,250
    3223 00010d90                   VECMAC  COLOR_WHITE,005,54,396,54
    3224 00010de0                   VECMAC  COLOR_WHITE,005,103,396,103
    3225 00010e30                   VECMAC  COLOR_WHITE,005,152,396,152
    3226 00010e80                   VECMAC  COLOR_WHITE,005,201,396,201
    3227 00010ed0 00000000          .LONG   0
    3228                    
    3229 00010ef0           MON_RECS:
    3230 00010ef0                   VECMAC  COLOR_RED,182,000,030,005       ; TOP
    3231 00010f40                   VECMAC  COLOR_GREEN,182,005,030,006
    3232 00010f90                   VECMAC  COLOR_RED,182,250,030,005       ; BOTTOM
    3233 00010fe0                   VECMAC  COLOR_GREEN,182,244,030,006
    3234 00011030                   VECMAC  COLOR_RED,000,117,005,020       ; LEFT
    3235 00011080                   VECMAC  COLOR_GREEN,005,117,006,020
    3236 000110d0                   VECMAC  COLOR_RED,396,117,005,020       ; RIGHT
    3237 00011120                   VECMAC  COLOR_GREEN,390,117,006,020
    3238 00011170 00000000          .LONG   0
    3239                    
    3240 00011190           MON_DOTS:
    3241 00011190                   DOTMAC  COLOR_WHITE,032,029
    3242 000111c0                   DOTMAC  COLOR_WHITE,087,029
    3243 000111f0                   DOTMAC  COLOR_WHITE,142,029
    3244 00011220                   DOTMAC  COLOR_WHITE,197,029
    3245 00011250                   DOTMAC  COLOR_WHITE,252,029
    3246 00011280                   DOTMAC  COLOR_WHITE,307,029
    3247 000112b0                   DOTMAC  COLOR_WHITE,362,029
    3248                    
    3249 000112e0                   DOTMAC  COLOR_WHITE,032,078
    3250 00011310                   DOTMAC  COLOR_WHITE,087,078
    3251 00011340                   DOTMAC  COLOR_WHITE,142,078
    3252 00011370                   DOTMAC  COLOR_WHITE,197,078
    3253 000113a0                   DOTMAC  COLOR_WHITE,252,078
    3254 000113d0                   DOTMAC  COLOR_WHITE,307,078
    3255 00011400                   DOTMAC  COLOR_WHITE,362,078
    3256                    
    3257 00011430                   DOTMAC  COLOR_WHITE,032,127
    3258 00011460                   DOTMAC  COLOR_WHITE,087,127
    3259 00011490                   DOTMAC  COLOR_WHITE,142,127
    3260 000114c0                   DOTMAC  COLOR_WHITE,197,127
    3261 000114f0                   DOTMAC  COLOR_WHITE,252,127
    3262 00011520                   DOTMAC  COLOR_WHITE,307,127
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   72

    3263 00011550                   DOTMAC  COLOR_WHITE,362,127
    3264                    
    3265 00011580                   DOTMAC  COLOR_WHITE,032,176
    3266 000115b0                   DOTMAC  COLOR_WHITE,087,176
    3267 000115e0                   DOTMAC  COLOR_WHITE,142,176
    3268 00011610                   DOTMAC  COLOR_WHITE,197,176
    3269 00011640                   DOTMAC  COLOR_WHITE,252,176
    3270 00011670                   DOTMAC  COLOR_WHITE,307,176
    3271 000116a0                   DOTMAC  COLOR_WHITE,362,176
    3272                    
    3273 000116d0                   DOTMAC  COLOR_WHITE,032,225
    3274 00011700                   DOTMAC  COLOR_WHITE,087,225
    3275 00011730                   DOTMAC  COLOR_WHITE,142,225
    3276 00011760                   DOTMAC  COLOR_WHITE,197,225
    3277 00011790                   DOTMAC  COLOR_WHITE,252,225
    3278 000117c0                   DOTMAC  COLOR_WHITE,307,225
    3279 000117f0                   DOTMAC  COLOR_WHITE,362,225
    3280 00011820 00000000          .LONG   0
    3281                    
    3282 00011840           PRIMARY_COLORS:
    3283                    
    3284 00011840                   RECTMAC COLOR_RED,0,0,395,255
    3285 00011890                   RECTMAC COLOR_GREEN,0,0,395,255
    3286 000118e0                   RECTMAC COLOR_BLUE,0,0,395,255
    3287 00011930 00000000          .LONG   0
    3288                    
    3289 00011950           COLOR_BARS:
    3290                    
    3291 00011950                   RECTMAC COLOR_BLACK,   0, 0, 49, 16
    3292 000119a0                   RECTMAC COLOR_BLACK,  49, 0, 49, 16
    3293 000119f0                   RECTMAC COLOR_BLACK,  98, 0, 49, 16
    3294 00011a40                   RECTMAC COLOR_BLACK, 147, 0, 49, 16
    3295 00011a90                   RECTMAC COLOR_BLACK, 196, 0, 49, 16
    3296 00011ae0                   RECTMAC COLOR_BLACK, 245, 0, 49, 16
    3297 00011b30                   RECTMAC COLOR_BLACK, 294, 0, 49, 16
    3298 00011b80                   RECTMAC COLOR_BLACK, 343, 0, 49, 16
    3299 00011bd0 00000000          .LONG   0
    3300                    
    3301                    
    3302                    
    3303                    
    3304                    **************************************************************************
    3305                    *                                                                        *
    3306                    *       DIP SWITCH DISPLAY STUFF                                         *
    3307                    *                                                                        *
    3308                    **************************************************************************
    3309                    
    3310              0014  box1x           .set    20
    3311              0020  box1y           .set    32
    3312                    
    3313                    
    3314              00ce  box2x           .set    230-sw2xoff
    3315              0020  box2y           .set    32
    3316              0068  box_height      .set    104
    3317              0028  box_width       .set    40
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   73

    3318                    
    3319              00f9  dash2           .set    box2x+box_width+3
    3320                    
    3321 00011bf0           DIP_VECS:
    3322 00011bf0                   VECMAC  COLOR_RED,20,32,60,32           ; DS1
    3323 00011c40                   VECMAC  COLOR_RED,20,32,20,138
    3324 00011c90                   VECMAC  COLOR_RED,20,138,60,138
    3325 00011ce0                   VECMAC  COLOR_RED,60,32,60,138
    3326                    
    3327 00011d30                   VECMAC  COLOR_RED,box2x,32,box2x+box_width,32   ; DS2
    3328 00011d80                   VECMAC  COLOR_RED,box2x,32,box2x,138
    3329 00011dd0                   VECMAC  COLOR_RED,box2x,138,box2x+box_width,138
    3330 00011e20                   VECMAC  COLOR_RED,box2x+box_width,32,box2x+box_width,138
    3331                    
    3332 00011e70                   VECMAC  COLOR_WHITE,63,42,73,42
    3333                    
    3334 00011ec0                   VECMAC  COLOR_WHITE,63,54,68,54         ; Coinage
    3335 00011f10                   VECMAC  COLOR_WHITE,63,78,68,78
    3336 00011f60                   VECMAC  COLOR_WHITE,68,54,68,78
    3337 00011fb0                   VECMAC  COLOR_WHITE,68,66,73,66
    3338                    
    3339 00012000                   VECMAC  COLOR_WHITE,63,90,68,90       ; Country
    3340 00012050                   VECMAC  COLOR_WHITE,63,102,68,102
    3341 000120a0                   VECMAC  COLOR_WHITE,68,90,68,102
    3342 000120f0                   VECMAC  COLOR_WHITE,68,96,73,96
    3343                    
    3344 00012140                   VECMAC  COLOR_WHITE,63,114,73,114
    3345 00012190                   VECMAC  COLOR_WHITE,63,126,73,126
    3346                    
    3347 000121e0                   VECMAC  COLOR_WHITE,dash2,42,dash2+10,42        ; Bill Val
    3348 00012230                   VECMAC  COLOR_WHITE,dash2,54,dash2+10,54        ; Att Mode Sound
    3349                    
    3350 00012280                   VECMAC  COLOR_WHITE,dash2,66,dash2+10,66        ; Powerup Test
    3351 000122d0                   VECMAC  COLOR_WHITE,dash2,78,dash2+10,78        ; Big Heads
    3352                    
    3353 00012320                   VECMAC  COLOR_WHITE,dash2,90,dash2+10,90        ; # OF PLAYERS
    3354 00012370                   VECMAC  COLOR_WHITE,dash2,102,dash2+10,102      ; UNUSED
    3355                    
    3356 000123c0                   VECMAC  COLOR_WHITE,dash2,114,dash2+10,114      ; VIDEO FREEZE
    3357 00012410                   VECMAC  COLOR_WHITE,dash2,126,dash2+10,126      ; TEST SWITCH
    3358                    
    3359 00012460 00000000          .LONG   0
    3360                    
    3361 00012480           DIP_STRS:
    3362 00012480                   STR_MAC 124,8,DP_TITLE,COLOR_GREEN,0
    3363 000124e0                   STR_MAC 30,20,DP_DS1,COLOR_WHITE,0
    3364 00012540                   STR_MAC box2x+10,20,DP_DS2,COLOR_WHITE,0
    3365 000125a0                   STR_MAC box1x-10,39,DP_DSN1,COLOR_WHITE,0
    3366 00012600                   STR_MAC box1x-10,51,DP_DSN2,COLOR_WHITE,0
    3367 00012660                   STR_MAC box1x-10,63,DP_DSN3,COLOR_WHITE,0
    3368 000126c0                   STR_MAC box1x-10,75,DP_DSN4,COLOR_WHITE,0
    3369 00012720                   STR_MAC box1x-10,87,DP_DSN5,COLOR_WHITE,0
    3370 00012780                   STR_MAC box1x-10,99,DP_DSN6,COLOR_WHITE,0
    3371 000127e0                   STR_MAC box1x-10,111,DP_DSN7,COLOR_WHITE,0
    3372 00012840                   STR_MAC box1x-10,123,DP_DSN8,COLOR_WHITE,0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   74

    3373                    
    3374 000128a0                   STR_MAC box2x-10,39,DP_DSN1,COLOR_WHITE,0
    3375 00012900                   STR_MAC box2x-10,51,DP_DSN2,COLOR_WHITE,0
    3376 00012960                   STR_MAC box2x-10,63,DP_DSN3,COLOR_WHITE,0
    3377 000129c0                   STR_MAC box2x-10,75,DP_DSN4,COLOR_WHITE,0
    3378 00012a20                   STR_MAC box2x-10,87,DP_DSN5,COLOR_WHITE,0
    3379 00012a80                   STR_MAC box2x-10,99,DP_DSN6,COLOR_WHITE,0
    3380 00012ae0                   STR_MAC box2x-10,111,DP_DSN7,COLOR_WHITE,0
    3381 00012b40                   STR_MAC box2x-10,123,DP_DSN8,COLOR_WHITE,0
    3382                    
    3383 00012ba0                   STR_MAC 100,144,DP_INS1,COLOR_WHITE,0
    3384                    
    3385 00012c00 00000000          .LONG   0
    3386                    
    3387                    
    3388 00012c20           DP_DS1:
    3389 00012c20       53          .STRING "SW1",0         ;
    3390 00012c40                   .EVEN
    3391 00012c40           DP_DS2:
    3392 00012c40       53          .STRING "SW2",0        ;
    3393 00012c60                   .EVEN
    3394                    
    3395 00012c60           DP_DSN1
    3396 00012c60       31          .STRING "1",0
    3397 00012c70                   .EVEN
    3398 00012c70           DP_DSN2
    3399 00012c70       32          .STRING "2",0
    3400 00012c80                   .EVEN
    3401 00012c80           DP_DSN3
    3402 00012c80       33          .STRING "3",0
    3403 00012c90                   .EVEN
    3404 00012c90           DP_DSN4
    3405 00012c90       34          .STRING "4",0
    3406 00012ca0                   .EVEN
    3407 00012ca0           DP_DSN5
    3408 00012ca0       35          .STRING "5",0
    3409 00012cb0                   .EVEN
    3410 00012cb0           DP_DSN6
    3411 00012cb0       36          .STRING "6",0
    3412 00012cc0                   .EVEN
    3413 00012cc0           DP_DSN7
    3414 00012cc0       37          .STRING "7",0
    3415 00012cd0                   .EVEN
    3416 00012cd0           DP_DSN8
    3417 00012cd0       38          .STRING "8",0
    3418 00012ce0                   .EVEN
    3419                    
    3420 00012ce0           DUSECMOS_1:
    3421 00012ce0       43          .STRING "CMOS COINAGE",0
    3422 00012d50                   .EVEN
    3423                    
    3424 00012d50           DUSECMOS_0:
    3425 00012d50       44          .STRING "DIPSW. COINAGE",0
    3426 00012dd0                   .EVEN
    3427                    
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   75

    3428 00012dd0           DCOUNTER_0
    3429 00012dd0       31          .STRING "1 COIN COUNTER",0
    3430 00012e50                   .EVEN
    3431                    
    3432 00012e50           DCOUNTER_1
    3433 00012e50       32          .STRING "2 COIN COUNTERS",0
    3434 00012ed0                   .EVEN
    3435                    
    3436 00012ed0           DCOINAGE
    3437 00012ed0       43          .STRING "COINAGE",0
    3438 00012f10                   .EVEN
    3439                    
    3440 00012f10           DCOUNTRY_0
    3441 00012f10       55          .STRING "USA",0
    3442 00012f30                   .EVEN
    3443 00012f30           DCOUNTRY_2
    3444 00012f30       46          .STRING "FRENCH",0
    3445 00012f70                   .EVEN
    3446                    
    3447                    ;DFREEZE_0
    3448                    ;       .STRING "VIDEO FREEZE",0
    3449                    ;       .EVEN
    3450                    
    3451 00012f70           DVALID_1
    3452 00012f70       42          .STRING "BILL VAL. PRESENT",0
    3453 00013000                   .EVEN
    3454 00013000           DVALID_0
    3455 00013000       4e          .STRING "NO BILL VALIDATOR",0
    3456 00013090                   .EVEN
    3457                    
    3458 00013090           DATTSND_1
    3459 00013090       4e          .STRING "NO ATTRACT SOUNDS",0
    3460 00013120                   .EVEN
    3461 00013120           DATTSND_0
    3462 00013120       41          .STRING "ATTRACT SOUNDS ON",0
    3463 000131b0                   .EVEN
    3464                    
    3465 000131b0           DROMTST_1
    3466 000131b0       4e          .STRING "NO POWERUP TEST",0
    3467 00013230                   .EVEN
    3468 00013230           DROMTST_0
    3469 00013230       50          .STRING "POWERUP TEST ON",0
    3470 000132b0                   .EVEN
    3471                    
    3472 000132b0           DHEDSIZ_1
    3473 000132b0       42          .STRING "BIG HEADS",0
    3474 00013300                   .EVEN
    3475 00013300           DHEDSIZ_0
    3476 00013300       4e          .STRING "NORMAL HEADS",0
    3477 00013370                   .EVEN
    3478                    
    3479                    
    3480 00013370           DCOUNTRY_1
    3481 00013370       47          .STRING "GERMAN",0
    3482 000133b0                   .EVEN
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   76

    3483                    
    3484 000133b0           DCOUNTRY_TAB
    3485 000133b0 00012f10'         .LONG   DCOUNTRY_0, DCOUNTRY_1, DCOUNTRY_2, DCOUNTRY_3
    3486                    
    3487                    
    3488 00013430           DTEST_0
    3489 00013430       54          .STRING "TEST SWITCH",0
    3490 00013490                   .EVEN
    3491                    
    3492 00013490           DPLAYER_0
    3493 00013490       34          .STRING "4 PLAYER CABINET",0
    3494 00013520                   .EVEN
    3495 00013520           DPLAYER_1
    3496 00013520       32          .STRING "2 PLAYER CABINET",0
    3497 000135b0                   .EVEN
    3498 000135b0           DUCOIN7
    3499 000135b0       46          .STRING "FREEPLAY",0
    3500 00013600                   .EVEN
    3501                    
    3502 00013600           DP_TITLE
    3503 00013600       44          .STRING "DIPSWITCH SETTINGS",0
    3504 000136a0                   .EVEN
    3505                    
    3506 000136a0           DP_INS1
    3507 000136a0       50          .STRING "PRESS ANY BUTTON TO EXIT",0
    3508 00013770                   .EVEN
    3509                    
    3510 00013770           DP_ON
    3511 00013770       4f          .STRING "ON",0
    3512 00013790                   .EVEN
    3513 00013790           DP_OFF
    3514 00013790       4f          .STRING "OFF",0
    3515                    
    3516                    
    3517                    
    3518 000137b0           DUNUSED
    3519 000137b0           DGCOIN4
    3520 000137b0           DCOUNTRY_3
    3521 000137b0       55          .STRING "UNUSED",0
    3522 000137f0                   .EVEN
    3523                    
    3524                    
    3525 000137f0           DCREDTAB
    3526 000137f0 00012c70'         .LONG   DP_DSN2,DP_DSN2
    3527 00013830 00012c70'         .LONG   DP_DSN2,DP_DSN1
    3528 00013870 00012c60'         .LONG   DP_DSN1,DP_DSN1
    3529 000138b0 00012c80'         .LONG   DP_DSN3,DP_DSN1
    3530 000138f0 00012c90'         .LONG   DP_DSN4,DP_DSN1
    3531 00013930 00012c80'         .LONG   DP_DSN3,DP_DSN2
    3532 00013970 00012c90'         .LONG   DP_DSN4,DP_DSN2
    3533 000139b0 00012c80'         .LONG   DP_DSN3,DP_DSN3
    3534                    
    3535                    
    3536                    
    3537                    
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   77

    3538 000139f0 00014a70' VRAMTAB .LONG   CRAM1,CRAM2
    3539 00013a30 00014c10'         .LONG   VRAM1,VRAM2,VRAM3,VRAM4,VRAM5,VRAM6
    3540 00013af0 000150f0'         .LONG   VRAM7,VRAM8
    3541 00013b30 00000000          .LONG   0
    3542                    
    3543                    
    3544 00013b50 00017170' SROMTAB .long   SROM1, SROM2, SROM3, SROM4
    3545                    ;       .long   SROM5, SROM6    ;, SROM7, SROM8
    3546 00013bd0 00000000          .long   0
    3547 00013bf0           SNDRAMTAB
    3548 00013bf0 00017580'         .long   SNDRAM1, SNDRAM2, SNDRAM3
    3549 00013c50 00000000          .long   0
    3550                    
    3551                    
    3552                    ;PROMTAB        .LONG   PROM1,PROM2
    3553                    ;               .LONG   0
    3554                    
    3555                    ;IROMTAB        .LONG   IROM1,IROM2,IROM3,IROM4
    3556                    ;               .LONG   IROM5,IROM6,IROM7,IROM8
    3557                    ;               .LONG   IROM9,IROM10,IROM11,IROM12
    3558                    ;               .LONG   IROM13,IROM14,IROM15,IROM16
    3559                    ;               .LONG   0
    3560                    
    3561                    ;SRAMTAB        .LONG   SRAM1,SRAM2,SRAM3,SRAM4
    3562                    ;       .LONG   0
    3563                    
    3564                    
    3565                    
    3566                    
    3567                    **************************************************************************
    3568                    *                                                                        *
    3569                    *       RAM CHIP DATA                                                    *
    3570                    *                                                                        *
    3571                    **************************************************************************
    3572                    
    3573                    ;
    3574                    ;       MAKE SURE THESE TABLES CORRESPOND WITH THE STUFF ABOVE
    3575                    ;
    3576                    
    3577 00013c70           VRAMCHIPS:
    3578                    ;       COLOR RAMS
    3579                    
    3580 00013c70                   RAM_CHIP 0,1, 8, 16, 1880000H, 18FFFF0H         ; U37  (  0 - 7  )
    3581 00013d00                   RAM_CHIP 0,0, 7, 16, 1880008H, 18FFFF8H         ; U36  (  8 - 14 )
    3582                    
    3583                    
    3584                    ;       VIDEO RAMS
    3585 00013d90                   RAM_CHIP 0, 8, 8, 32, 0000018H, 03FFFF8H        ; U12
    3586 00013e20                   RAM_CHIP 0, 4, 8, 32, 0000010H, 03FFFF0H        ; U16
    3587 00013eb0                   RAM_CHIP 0, 9, 8, 32, 0000008H, 03FFFE8H        ; U13
    3588 00013f40                   RAM_CHIP 0, 5, 8, 32, 0000000H, 03FFFE0H        ; U17
    3589                    
    3590 00013fd0 00000000          .LONG   0
    3591                    
    3592 00013ff0           PALCHIPS:
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   78

    3593                    ;       VIDEO PALETTE RAMS
    3594 00013ff0                   RAM_CHIP 0,6, 8, 32, 0000018H, 03FFFF8H         ; U10
    3595 00014080                   RAM_CHIP 0,2, 8, 32, 0000010H, 03FFFF0H         ; U14
    3596 00014110                   RAM_CHIP 0,7, 8, 32, 0000008H, 03FFFE8H         ; U11
    3597 000141a0                   RAM_CHIP 0,3, 8, 32, 0000000H, 03FFFE0H         ; U15
    3598                    
    3599 00014230 00000000          .LONG   0
    3600                    
    3601                    ;       SCRATCH RAMS
    3602                    
    3603 00014250           SRAMCHECK
    3604 00014250       43          .STRING "CHECKING SCRATCH RAMS",0
    3605 00014300                   .EVEN
    3606                    
    3607 00014300           SRAMCHIPS       
    3608 00014300                   RAM_CHIP SRAM1,0, 16, 16, 1000000h, 13ffff0h    ; u49 (0-15)
    3609                    
    3610 00014390 00000000          .LONG   0
    3611                    
    3612              b474  cksum1  .equ    0B474H
    3613              6c15  cksum2  .equ    06C15H
    3614                    
    3615 000143b0           PROMCHIPS                      
    3616 000143b0                   ROM_CHIP PROM2,1,0,16, 0ff800000h, 0fffffff0h, cksum1, 0  ; u54
    3617 00014460                   ROM_CHIP PROM1,0,0,16, 0ff800008h, 0fffffff8h, cksum2, 0  ; u63
    3618 00014510 00000000          .LONG   0
    3619                    
    3620                    
    3621                    * CHECKSUM PATCHES
    3622 00014530     4b8b          .WORD   0ffffh-cksum1   ;1'S COMPLEMENT OF THE U54 CHECKSUM
    3623 00014540     93ea          .WORD   0ffffH-cksum2   ;1'S COMPLEMENT OF THE U63 CHECKSUM
    3624                    
    3625 00014550                   .TEXT
    3626                    
    3627                    
    3628                    **************************************************************************
    3629                    *                                                                        *
    3630                    *       CPU BOARD INFORMATION                                            *
    3631                    *                                                                        *
    3632                    **************************************************************************
    3633                    
    3634 00014550           CPU_VECS:
    3635                    ;       VECMAC  COLOR_WHITE,5,15,390,15         ; BOARD OUTLINE
    3636                    ;       VECMAC  COLOR_WHITE,390,15,390,254
    3637                    ;       VECMAC  COLOR_WHITE,5,253,390,253
    3638                    ;       VECMAC  COLOR_WHITE,5,15,5,100
    3639                    ;       VECMAC  COLOR_WHITE,5,100,15,100
    3640                    ;       VECMAC  COLOR_WHITE,15,100,15,115
    3641                    ;       VECMAC  COLOR_WHITE,5,115,15,115
    3642                    ;       VECMAC  COLOR_WHITE,5,115,5,135
    3643                    ;       VECMAC  COLOR_WHITE,5,135,15,135
    3644                    ;       VECMAC  COLOR_WHITE,15,135,15,138
    3645                    ;       VECMAC  COLOR_WHITE,5,138,15,138
    3646                    ;       VECMAC  COLOR_WHITE,5,138,5,215
    3647                    ;       VECMAC  COLOR_WHITE,5,215,15,215
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   79

    3648                    ;       VECMAC  COLOR_WHITE,15,215,15,230
    3649                    ;       VECMAC  COLOR_WHITE,5,230,15,230
    3650                    ;       VECMAC  COLOR_WHITE,5,230,5,254
    3651                    
    3652 00014550                   VECMAC  COLOR_WHITE,5,5,5,243           ; BOARD OUTLINE
    3653 000145a0                   VECMAC  COLOR_WHITE,5,243,390,243
    3654 000145f0                   VECMAC  COLOR_WHITE,390,243,390,5
    3655 00014640                   VECMAC  COLOR_WHITE,390,5,355,5
    3656 00014690                   VECMAC  COLOR_WHITE,355,5,355,10
    3657 000146e0                   VECMAC  COLOR_WHITE,355,10,343,10
    3658 00014730                   VECMAC  COLOR_WHITE,343,10,343,5
    3659 00014780                   VECMAC  COLOR_WHITE,343,5,326,5
    3660 000147d0                   VECMAC  COLOR_WHITE,326,5,326,10
    3661 00014820                   VECMAC  COLOR_WHITE,326,10,323,10
    3662 00014870                   VECMAC  COLOR_WHITE,323,10,323,5
    3663 000148c0                   VECMAC  COLOR_WHITE,323,5,212,5
    3664 00014910                   VECMAC  COLOR_WHITE,212,5,212,10
    3665 00014960                   VECMAC  COLOR_WHITE,212,10,200,10
    3666 000149b0                   VECMAC  COLOR_WHITE,200,10,200,5
    3667 00014a00                   VECMAC  COLOR_WHITE,200,5,5,5
    3668 00014a50 00000000          .LONG   0
    3669                    
    3670              0005  CPUXBASE        EQU     5
    3671              0005  CPUYBASE        EQU     5
    3672                    
    3673                    
    3674 00014a70           CPU_CHIPS:
    3675 00014a70           CRAM1   CHIPMAC 0,347,152,30,13,5,3,CNAMEU36,0,28,2,1   ; COLOR RAM (U36)
    3676 00014b40           CRAM2   CHIPMAC 1,313,152,30,13,5,3,CNAMEU37,0,28,2,1   ; COLOR RAM (U37)
    3677                    
    3678 00014c10           VRAM1   CHIPMAC 2,347,207,38,13,8,3,CNAMEU14,0,36,2,1   ; BANK 1 VIDEO RAM (U14)
    3679 00014ce0           VRAM2   CHIPMAC 3,307,207,38,13,8,3,CNAMEU15,0,36,2,1   ;   (PALETTE) (U15)
    3680 00014db0           VRAM3   CHIPMAC 4,267,207,38,13,8,3,CNAMEU16,0,36,2,1   ; (U16)
    3681 00014e80           VRAM4   CHIPMAC 5,227,207,38,13,8,3,CNAMEU17,0,36,2,1   ; (U17)
    3682                    
    3683 00014f50           VRAM5   CHIPMAC 6,347,225,38,13,8,3,CNAMEU10,0,36,2,1   ; BANK 2 VIDEO RAM (U10)
    3684 00015020           VRAM6   CHIPMAC 7,307,225,38,13,8,3,CNAMEU11,0,36,2,1   ;   (PIXEL) (U11)
    3685 000150f0           VRAM7   CHIPMAC 8,267,225,38,13,8,3,CNAMEU12,0,36,2,1   ; (U12)
    3686 000151c0           VRAM8   CHIPMAC 9,227,225,38,13,8,3,CNAMEU13,0,36,2,1   ; (U13)
    3687                    
    3688 00015290           CPU     CHIPMAC 0,330,50,35,35,7,13,CNAMEU59,0,3,3,1    ; CPU (U59)
    3689                    
    3690 00015360           DMA     CHIPMAC 0,246,157,38,38,8,16,CNAMEU33,0,3,3,1   ; DMA (U33)
    3691                    
    3692 00015430           PROM1   CHIPMAC 1,220,65,40,13,9,3,CNAMEU63,0,38,2,1    ; PROGRAM ROM 1 (U63)
    3693 00015500           PROM2   CHIPMAC 0,220,83,40,13,9,3,CNAMEU54,0,38,2,1    ; PROGRAM ROM 2 (U54)
    3694                    
    3695 000155d0           IROM1   CHIPMAC 1,10,122,40,13,6,3,  CNAMEU133,0,38,2,1 ; IMAGE ROM (U133)
    3696 000156a0           IROM2   CHIPMAC 2,52,122,40,13,6,3,  CNAMEU132,0,38,2,1 ; IMAGE ROM (U132)
    3697 00015770           IROM3   CHIPMAC 3,94,122,40,13,6,3,  CNAMEU131,0,38,2,1 ; IMAGE ROM (U131)
    3698 00015840           IROM4   CHIPMAC 4,136,122,40,13,6,3, CNAMEU130,0,38,2,1 ; IMAGE ROM (U130)
    3699                    
    3700 00015910           IROM5   CHIPMAC 5,10,137,40,13,6,3,  CNAMEU129,0,38,2,1 ; IMAGE ROM (U129)
    3701 000159e0           IROM6   CHIPMAC 6,52,137,40,13,6,3,  CNAMEU128,0,38,2,1 ; IMAGE ROM (U128)
    3702 00015ab0           IROM7   CHIPMAC 7,94,137,40,13,6,3,  CNAMEU127,0,38,2,1 ; IMAGE ROM (U127)
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   80

    3703 00015b80           IROM8   CHIPMAC 8,136,137,40,13,6,3, CNAMEU126,0,38,2,1 ; IMAGE ROM (U126)
    3704                    
    3705 00015c50           IROM9   CHIPMAC 9,10,152,40,13,6,3,  CNAMEU125,0,38,2,1 ; IMAGE ROM (U125)
    3706 00015d20           IROM10  CHIPMAC 10,52,152,40,13,6,3, CNAMEU124,0,38,2,1 ; IMAGE ROM (U124)
    3707 00015df0           IROM11  CHIPMAC 11,94,152,40,13,6,3, CNAMEU123,0,38,2,1 ; IMAGE ROM (U123)
    3708 00015ec0           IROM12  CHIPMAC 12,136,152,40,13,6,3,CNAMEU122,0,38,2,1 ; IMAGE ROM (U122)
    3709                    
    3710 00015f90           IROM13  CHIPMAC 13,10,167,40,13,6,3, CNAMEU121,0,38,2,1 ; IMAGE ROM (U121)
    3711 00016060           IROM14  CHIPMAC 14,52,167,40,13,6,3, CNAMEU120,0,38,2,1 ; IMAGE ROM (U120)
    3712 00016130           IROM15  CHIPMAC 15,94,167,40,13,6,3, CNAMEU119,0,38,2,1 ; IMAGE ROM (U119)
    3713 00016200           IROM16  CHIPMAC 16,136,167,40,13,6,3,CNAMEU118,0,38,2,1 ; IMAGE ROM (U118)
    3714                    
    3715 000162d0           IROM17  CHIPMAC 17,10,182,40,13,6,3, CNAMEU117,0,38,2,1 ; IMAGE ROM (U117)
    3716 000163a0           IROM18  CHIPMAC 18,52,182,40,13,6,3, CNAMEU116,0,38,2,1 ; IMAGE ROM (U116)
    3717 00016470           IROM19  CHIPMAC 19,94,182,40,13,6,3, CNAMEU115,0,38,2,1 ; IMAGE ROM (U115)
    3718 00016540           IROM20  CHIPMAC 20,136,182,40,13,6,3,CNAMEU114,0,38,2,1 ; IMAGE ROM (U114)
    3719                    
    3720 00016610           IROM21  CHIPMAC 21,10,197,40,13,6,3, CNAMEU113,0,38,2,1 ; IMAGE ROM (U113)
    3721 000166e0           IROM22  CHIPMAC 22,52,197,40,13,6,3, CNAMEU112,0,38,2,1 ; IMAGE ROM (U112)
    3722 000167b0           IROM23  CHIPMAC 23,94,197,40,13,6,3, CNAMEU111,0,38,2,1 ; IMAGE ROM (U111)
    3723 00016880           IROM24  CHIPMAC 24,136,197,40,13,6,3,CNAMEU110,0,38,2,1 ; IMAGE ROM (U110)
    3724                    
    3725 00016950           IROM25  CHIPMAC 25,10,212,40,13,6,3, CNAMEU109,0,38,2,1 ; IMAGE ROM (U109)
    3726 00016a20           IROM26  CHIPMAC 26,52,212,40,13,6,3, CNAMEU108,0,38,2,1 ; IMAGE ROM (U108)
    3727 00016af0           IROM27  CHIPMAC 27,94,212,40,13,6,3, CNAMEU107,0,38,2,1 ; IMAGE ROM (U107)
    3728 00016bc0           IROM28  CHIPMAC 28,136,212,40,13,6,3,CNAMEU106,0,38,2,1 ; IMAGE ROM (U106)
    3729                    
    3730 00016c90           IROM29  CHIPMAC 29,10,227,40,13,6,3, CNAMEU105,0,38,2,1 ; IMAGE ROM (U105)
    3731 00016d60           IROM30  CHIPMAC 30,52,227,40,13,6,3, CNAMEU104,0,38,2,1 ; IMAGE ROM (U104)
    3732 00016e30           IROM31  CHIPMAC 31,94,227,40,13,6,3, CNAMEU103,0,38,2,1 ; IMAGE ROM (U103)
    3733 00016f00           IROM32  CHIPMAC 32,136,227,40,13,6,3,CNAMEU102,0,38,2,1 ; IMAGE ROM (U102)
    3734                    
    3735 00016fd0           SRAM1   CHIPMAC 0,225,101,30,13,4,3,CNAMEU49,0,28,2,1   ; SCRATCH PAD (U49)
    3736                    
    3737 000170a0           PIC     CHIPMAC 0,177,65,40,13,9,3,CNAMEU64,0,38,2,1    ; PIC CHIP (U64)
    3738                    
    3739 00017170           SROM1   CHIPMAC 1,49,57,40,13,14,3, CNAMEU2,0,38,2,1    ; Sound Rom (U2)
    3740 00017240           SROM2   CHIPMAC 2,49,72,40,13,14,3, CNAMEU3,0,38,2,1    ; Sound Rom (U3)
    3741 00017310           SROM3   CHIPMAC 3,49,87,40,13,14,3, CNAMEU4,0,38,2,1    ; Sound Rom (U4)
    3742 000173e0           SROM4   CHIPMAC 4,49,102,40,13,14,3,CNAMEU5,0,38,2,1    ; Sound Rom (U5)
    3743                    ;SROM5  CHIPMAC 5,7,57,40,13,14,3,  CNAMEU6,0,38,2,1    ; Sound Rom (U6)
    3744                    ;SROM6  CHIPMAC 6,7,72,40,13,14,3,  CNAMEU7,0,38,2,1    ; Sound Rom (U7)
    3745                    ;SROM7  CHIPMAC 7,7,87,40,13,14,3,  CNAMEU8,0,38,2,1    ; Sound Rom (U8)
    3746                    ;SROM8  CHIPMAC 8,7,102,40,13,14,3, CNAMEU9,0,38,2,1    ; Sound Rom (U9)
    3747                    
    3748 000174b0           DSP     CHIPMAC 0,118,77,35,35,13,13,CNAMEU1,0,3,3,1    ; Sound DSP (U1)
    3749                    
    3750 00017580           SNDRAM1 CHIPMAC 1,115,29,40,13,9,3,CNAMEU86,0,38,2,1    ; Sound Ram 1 (U86)
    3751 00017650           SNDRAM2 CHIPMAC 2,115,44,40,13,9,3,CNAMEU80,0,38,2,1    ; Sound Ram 2 (U80)
    3752 00017720           SNDRAM3 CHIPMAC 3,115,59,40,13,9,3,CNAMEU73,0,38,2,1    ; Sound Ram 3 (U73)
    3753 000177f0 00000000          .LONG   0
    3754                    
    3755 00017810           CNAMEU1
    3756 00017810       55          .string "U1",0
    3757 00017830                   .even
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   81

    3758 00017830           CNAMEU2
    3759 00017830       55          .string "U2",0
    3760 00017850                   .even
    3761 00017850           CNAMEU3
    3762 00017850       55          .string "U3",0
    3763 00017870                   .even
    3764 00017870           CNAMEU4
    3765 00017870       55          .string "U4",0
    3766 00017890                   .even
    3767 00017890           CNAMEU5
    3768 00017890       55          .string "U5",0
    3769 000178b0                   .even
    3770 000178b0           CNAMEU6
    3771 000178b0       55          .string "U6",0
    3772 000178d0                   .even
    3773 000178d0           CNAMEU7
    3774 000178d0       55          .string "U7",0
    3775 000178f0                   .even
    3776 000178f0           CNAMEU8
    3777 000178f0       55          .string "U8",0
    3778 00017910                   .even
    3779 00017910           CNAMEU9
    3780 00017910       55          .string "U9",0
    3781 00017930                   .even
    3782 00017930           CNAMEU10
    3783 00017930       55          .string "U10",0
    3784 00017950                   .even
    3785 00017950           CNAMEU11
    3786 00017950       55          .string "U11",0
    3787 00017970                   .even
    3788 00017970           CNAMEU12
    3789 00017970       55          .string "U12",0
    3790 00017990                   .even
    3791 00017990           CNAMEU13
    3792 00017990       55          .string "U13",0
    3793 000179b0                   .even
    3794 000179b0           CNAMEU14
    3795 000179b0       55          .string "U14",0
    3796 000179d0                   .even
    3797 000179d0           CNAMEU15
    3798 000179d0       55          .string "U15",0
    3799 000179f0                   .even
    3800 000179f0           CNAMEU16
    3801 000179f0       55          .string "U16",0
    3802 00017a10                   .even
    3803 00017a10           CNAMEU17
    3804 00017a10       55          .string "U17",0
    3805 00017a30                   .even
    3806 00017a30           CNAMEU33
    3807 00017a30       55          .string "U33",0
    3808 00017a50                   .even
    3809 00017a50           CNAMEU36
    3810 00017a50       55          .string "U36",0
    3811 00017a70                   .even
    3812 00017a70           CNAMEU37
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   82

    3813 00017a70       55          .string "U37",0
    3814 00017a90                   .even
    3815 00017a90           CNAMEU49
    3816 00017a90       55          .string "U49",0
    3817 00017ab0                   .even
    3818 00017ab0           CNAMEU54
    3819 00017ab0       55          .string "U54",0
    3820 00017ad0                   .even
    3821 00017ad0           CNAMEU59
    3822 00017ad0       55          .string "U59",0
    3823 00017af0                   .even
    3824 00017af0           CNAMEU63
    3825 00017af0       55          .string "U63",0
    3826 00017b10                   .even
    3827 00017b10           CNAMEU64
    3828 00017b10       55          .string "U64",0
    3829 00017b30                   .even
    3830 00017b30           CNAMEU73
    3831 00017b30       55          .string "U73",0
    3832 00017b50                   .even
    3833 00017b50           CNAMEU80
    3834 00017b50       55          .string "U80",0
    3835 00017b70                   .even
    3836 00017b70           CNAMEU86
    3837 00017b70       55          .string "U86",0
    3838 00017b90                   .even
    3839 00017b90           CNAMEU133
    3840 00017b90       55          .string "U133",0
    3841 00017bc0                   .even
    3842 00017bc0           CNAMEU132
    3843 00017bc0       55          .string "U132",0
    3844 00017bf0                   .even
    3845 00017bf0           CNAMEU131
    3846 00017bf0       55          .string "U131",0
    3847 00017c20                   .even
    3848 00017c20           CNAMEU130
    3849 00017c20       55          .string "U130",0
    3850 00017c50                   .even
    3851 00017c50           CNAMEU129
    3852 00017c50       55          .string "U129",0
    3853 00017c80                   .even
    3854 00017c80           CNAMEU128
    3855 00017c80       55          .string "U128",0
    3856 00017cb0                   .even
    3857 00017cb0           CNAMEU127
    3858 00017cb0       55          .string "U127",0
    3859 00017ce0                   .even
    3860 00017ce0           CNAMEU126
    3861 00017ce0       55          .string "U126",0
    3862 00017d10                   .even
    3863 00017d10           CNAMEU125
    3864 00017d10       55          .string "U125",0
    3865 00017d40                   .even
    3866 00017d40           CNAMEU124
    3867 00017d40       55          .string "U124",0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   83

    3868 00017d70                   .even
    3869 00017d70           CNAMEU123
    3870 00017d70       55          .string "U123",0
    3871 00017da0                   .even
    3872 00017da0           CNAMEU122
    3873 00017da0       55          .string "U122",0
    3874 00017dd0                   .even
    3875 00017dd0           CNAMEU121
    3876 00017dd0       55          .string "U121",0
    3877 00017e00                   .even
    3878 00017e00           CNAMEU120
    3879 00017e00       55          .string "U120",0
    3880 00017e30                   .even
    3881 00017e30           CNAMEU119
    3882 00017e30       55          .string "U119",0
    3883 00017e60                   .even
    3884 00017e60           CNAMEU118
    3885 00017e60       55          .string "U118",0
    3886 00017e90                   .even
    3887 00017e90           CNAMEU117
    3888 00017e90       55          .string "U117",0
    3889 00017ec0                   .even
    3890 00017ec0           CNAMEU116
    3891 00017ec0       55          .string "U116",0
    3892 00017ef0                   .even
    3893 00017ef0           CNAMEU115
    3894 00017ef0       55          .string "U115",0
    3895 00017f20                   .even
    3896 00017f20           CNAMEU114
    3897 00017f20       55          .string "U114",0
    3898 00017f50                   .even
    3899 00017f50           CNAMEU113
    3900 00017f50       55          .string "U113",0
    3901 00017f80                   .even
    3902 00017f80           CNAMEU112
    3903 00017f80       55          .string "U112",0
    3904 00017fb0                   .even
    3905 00017fb0           CNAMEU111
    3906 00017fb0       55          .string "U111",0
    3907 00017fe0                   .even
    3908 00017fe0           CNAMEU110
    3909 00017fe0       55          .string "U110",0
    3910 00018010                   .even
    3911 00018010           CNAMEU109
    3912 00018010       55          .string "U109",0
    3913 00018040                   .even
    3914 00018040           CNAMEU108
    3915 00018040       55          .string "U108",0
    3916 00018070                   .even
    3917 00018070           CNAMEU107
    3918 00018070       55          .string "U107",0
    3919 000180a0                   .even
    3920 000180a0           CNAMEU106
    3921 000180a0       55          .string "U106",0
    3922 000180d0                   .even
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   84

    3923 000180d0           CNAMEU105
    3924 000180d0       55          .string "U105",0
    3925 00018100                   .even
    3926 00018100           CNAMEU104
    3927 00018100       55          .string "U104",0
    3928 00018130                   .even
    3929 00018130           CNAMEU103
    3930 00018130       55          .string "U103",0
    3931 00018160                   .even
    3932 00018160           CNAMEU102
    3933 00018160       55          .string "U102",0
    3934 00018190                   .even
    3935                    
    3936                    ;MJL Start
    3937 00018190           sndrevprompt
    3938 00018190       53          .STRING "SOUND SYSTEM VERSION",0
    3939 00018240                   .EVEN
    3940 00018240           sndprotoprompt
    3941 00018240       50          .STRING "PROTO ",0
    3942 00018280                   .EVEN
    3943 00018280           sndreleaseprompt
    3944 00018280       52          .STRING "RELEASE ",0
    3945 000182d0                   .EVEN
    3946 000182d0           sndtimeout
    3947 000182d0       54          .STRING "TIMEOUT ON RESPONSE FROM SOUND SECTION",0
    3948 00018410                   .EVEN
    3949 00018410           gamesnprompt
    3950 00018410       47          .STRING "GAME SERIAL NUMBER",0
    3951 000184b0                   .EVEN
    3952 000184b0           piccmess
    3953 000184b0       43          .STRING "CHECKING PIC CHIP",0
    3954 00018540                   .EVEN
    3955 00018540           picbadmess
    3956 00018540       50          .STRING "PIC CHIP BAD",0
    3957 000185b0                   .EVEN
    3958 000185b0           sndcmess
    3959 000185b0       43          .STRING "CHECKING SOUND SECTION",0
    3960 00018670                   .EVEN
    3961 00018670           sndbadmess
    3962 00018670       53          .STRING "SOUND SECTION BAD",0
    3963 00018700                   .EVEN
    3964                    ;MJL End
    3965                    
    3966                    
    3967                            .if 0
    3968                    **************************************************************************
    3969                    *                                                                        *
    3970                    *                    IMAGE ROM CHECKSUM TABLES                           *
    3971                    *                                                                        *
    3972                    *               NOTE: COMMENT OUT ANY UNSTUFFED PARTS THAT               *
    3973                    *                       EXIST BEFORE THE .LONG 0 TERMINATOR!             *
    3974                    *                                                                        *
    3975                    **************************************************************************
    3976                    ;       ROM_CHIP $MACRO TAB_LINK,CHIP_NO, WIDTH, INTERLEAVE, START_ADDR, END_ADDR, CHECK_SUM
    3977                    IROMCHIPS
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   85

    3978                            .EVEN
    3979                            ROM_CHIP IROM1,  0, 8,32,  2000000H, 2FFFFE0H, 0B9AFH   ; U133
    3980                            ROM_CHIP IROM2,  1, 8,32,  2000008H, 2FFFFE8H, 0C754H   ; U132
    3981                            ROM_CHIP IROM3,  2, 8,32,  2000010H, 2FFFFF0H, 0AE4FH   ; U131
    3982                            ROM_CHIP IROM4,  3, 8,32,  2000018H, 2FFFFF8H, 0214BH   ; U130
    3983                    
    3984                            ROM_CHIP IROM5,  4, 8,32,  3000000H, 3FFFFE0H, 01B12H   ; U129
    3985                            ROM_CHIP IROM6,  5, 8,32,  3000008H, 3FFFFE8H, 02D53H   ; U128
    3986                            ROM_CHIP IROM7,  6, 8,32,  3000010H, 3FFFFF0H, 0C819H   ; U127
    3987                            ROM_CHIP IROM8,  7, 8,32,  3000018H, 3FFFFF8H, 0A25AH   ; U126
    3988                    
    3989                            ROM_CHIP IROM9,  8, 8,32,  4000000H, 4FFFFE0H, 023f8H   ; U125
    3990                            ROM_CHIP IROM10, 9, 8,32,  4000008H, 4FFFFE8H, 0a90cH   ; U124
    3991                            ROM_CHIP IROM11,10, 8,32,  4000010H, 4FFFFF0H, 0ea1cH   ; U123
    3992                            ROM_CHIP IROM12,11, 8,32,  4000018H, 4FFFFF8H, 0aa6bH   ; U122
    3993                    
    3994                    ;       ROM_CHIP IROM13,12, 8,32,  5000000H, 5FFFFE0H, 00000H   ; U121
    3995                    ;       ROM_CHIP IROM14,13, 8,32,  5000008H, 5FFFFE8H, 00000H   ; U120
    3996                    ;       ROM_CHIP IROM15,14, 8,32,  5000010H, 5FFFFF0H, 00000H   ; U119
    3997                    ;       ROM_CHIP IROM16,15, 8,32,  5000018H, 5FFFFF8H, 00000H   ; U118
    3998                            .LONG   0
    3999                    
    4000                    ; This and possibly other tables need to be set up yet
    4001                    IROMCHIPS1
    4002                            ROM_CHIP IROM17,16, 8,32,  2000000H, 2FFFFE0H, 00000H   ; U117
    4003                            ROM_CHIP IROM18,17, 8,32,  2000008H, 2FFFFE8H, 00000H   ; U116
    4004                            ROM_CHIP IROM19,18, 8,32,  2000010H, 2FFFFF0H, 00000H   ; U115
    4005                            ROM_CHIP IROM20,19, 8,32,  2000018H, 2FFFFF8H, 00000H   ; U114
    4006                    
    4007                            ROM_CHIP IROM21,20, 8,32,  3000000H, 3FFFFE0H, 00000H   ; U113
    4008                            ROM_CHIP IROM22,21, 8,32,  3000008H, 3FFFFE8H, 00000H   ; U112
    4009                            ROM_CHIP IROM23,22, 8,32,  3000010H, 3FFFFF0H, 00000H   ; U111
    4010                            ROM_CHIP IROM24,23, 8,32,  3000018H, 3FFFFF8H, 00000H   ; U110
    4011                    
    4012                            ROM_CHIP IROM25,24, 8,32,  4000000H, 4FFFFE0H, 00000H   ; U109
    4013                            ROM_CHIP IROM26,25, 8,32,  4000008H, 4FFFFE8H, 00000H   ; U108
    4014                            ROM_CHIP IROM27,26, 8,32,  4000010H, 4FFFFF0H, 00000H   ; U107
    4015                            ROM_CHIP IROM28,27, 8,32,  4000018H, 4FFFFF8H, 00000H   ; U106
    4016                    
    4017                            ROM_CHIP IROM29,28, 8,32,  5000000H, 5FFFFE0H, 00000H   ; U105
    4018                            ROM_CHIP IROM30,29, 8,32,  5000008H, 5FFFFE8H, 00000H   ; U104
    4019                            ROM_CHIP IROM31,30, 8,32,  5000010H, 5FFFFF0H, 00000H   ; U103
    4020                            ROM_CHIP IROM32,31, 8,32,  5000018H, 5FFFFF8H, 00000H   ; U102
    4021                            .LONG   0               ; FORCE IT TO STOP HERE
    4022                    
    4023                    
    4024                            .else
    4025                    **************************************************************************
    4026                    *                                                                        *
    4027                    *                    IMAGE ROM CHECKSUM TABLES                           *
    4028                    *                                                                        *
    4029                    *               NOTE: COMMENT OUT ANY UNSTUFFED PARTS THAT               *
    4030                    *                       EXIST BEFORE THE .LONG 0 TERMINATOR!             *
    4031                    *                                                                        *
    4032                    **************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:41:21 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   86

    4033                    ;rom_chip $macro tab_link,chip_no, width, interleave, start_addr, end_addr, check_sum,map
    4034 00018700           IROMCHIPS
    4035 00018700                   .EVEN
    4036                    
    4037                    ; 2-3 mil
    4038 00018700                   ROM_CHIP IROM1,  0, 8,32,  2000000h, 3ffffe0h,004E5h,0  ; u133
    4039 000187b0                   ROM_CHIP IROM2,  1, 8,32,  2000008h, 3ffffe8h,0595Eh,0  ; u132
    4040 00018860                   ROM_CHIP IROM3,  2, 8,32,  2000010h, 3fffff0h,0B2BFh,0  ; u131
    4041 00018910                   ROM_CHIP IROM4,  3, 8,32,  2000018h, 3fffff8h,0D784h,0  ; u130
    4042                    
    4043                    ; 4-5 mil
    4044 000189c0                   ROM_CHIP IROM5,  4, 8,32,  4000000h, 5ffffe0h,097E2h,0  ; u129
    4045 00018a70                   ROM_CHIP IROM6,  5, 8,32,  4000008h, 5ffffe8h,096FCh,0  ; u128
    4046 00018b20                   ROM_CHIP IROM7,  6, 8,32,  4000010h, 5fffff0h,06A67h,0  ; u127
    4047 00018bd0                   ROM_CHIP IROM8,  7, 8,32,  4000018h, 5fffff8h,0E92Fh,0  ; u126
    4048                    
    4049                    ; 6-7 mil
    4050 00018c80                   ROM_CHIP IROM9,  8, 8,32,  2000000h, 3ffffe0h,023F8h,1  ; u125
    4051 00018d30                   ROM_CHIP IROM10, 9, 8,32,  2000008h, 3ffffe8h,0A90Ch,1  ; u124
    4052 00018de0                   ROM_CHIP IROM11,10, 8,32,  2000010h, 3fffff0h,0EA1Ch,1  ; u123
    4053 00018e90                   ROM_CHIP IROM12,11, 8,32,  2000018h, 3fffff8h,0AA6Bh,1  ; u122
    4054                    
    4055                    ; 8-9 mil
    4056 00018f40                   ROM_CHIP IROM13,12, 8,32,  4000000h, 5ffffe0h,00A39h,1  ; u121
    4057 00018ff0                   ROM_CHIP IROM14,13, 8,32,  4000008h, 5ffffe8h,064ADh,1  ; u120
    4058 000190a0                   ROM_CHIP IROM15,14, 8,32,  4000010h, 5fffff0h,03446h,1  ; u119
    4059 00019150                   ROM_CHIP IROM16,15, 8,32,  4000018h, 5fffff8h,03FD9h,1  ; u118
    4060                    
    4061 00019200 00000000          .LONG   0               ; FORCE IT TO STOP HERE
    4062                    
    4063                    
    4064                            .endif

 No Errors,  No Warnings
