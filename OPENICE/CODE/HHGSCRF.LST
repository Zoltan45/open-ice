TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                            .MLIB   "HHMACS.LIB"
       2                            .FILE   "HHGSCRF.ASM"
       3                            .WIDTH  132
       4                            .OPTION B,D,L,T
       5                            .MNOLIST
       6                    
       7                    *
       8                    *GET THE SYSTEM STUFF
       9                    *
      10                            .INCLUDE        "HH.INC"
      11                            .include        "hhgscrf.e"
      12                            .include        "hhd.g"
      13                            .include        "hhpuck.g"
      14                            .include        "hhplayer.g"
      15                            .include        "hhcontrl.g"
      16                            .include        "hhc.g"
      17                            .include        "hhshow.g"
      18                            .include        "HHMATH.G"
      19                            .include        "hhsnd.g"
      20                            .include        "hhutil.g"
      21                            .include        "hhram.g"
      22                            .include        "hhmisc.g"
      23                            .include        "hhhigher.g"
      24                            .include        "hhgdrone.g"
      25                            .include        "hhafunc.g"
      26                            .include        "hhgame.g"
      27                            .include        "hhgscr.g"
      28                            .include        "hhgscr2.g"
      29                            .include        "hhspeech.g"
      30                            .include        "hhgctrl.g"
      31                            .include        "hhscr_sh.g"
      32                            .include        "hhcmos.g"
      33                            .include        "hhscrsh2.g"
      34                            .include        "hhproc.g"
      35                    
      36                    ; end of include files
      37                    
      38 00000000                   .TEXT
      39 00000000                   .EVEN
      40                    
      41                    **************************************************************************
      42                    *                                                                        *
      43                    * A_CHECK_RSMOTH - IF REVERSE SMOTHER, ANIMATE TO REVERSE IMAGE          *
      44                    *                                                                        *
      45                    * PASS:                                                                  *
      46                    * A8 = PLAYER OBJECT                                                     *
      47                    * AARG+,L = REVERSE IMAGE                                                *
      48                    *                                                                        *
      49                    **************************************************************************
      50                    
      51 00000000           A_CHECK_RSMOTH
      52 00000000     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         00000010     0630  
      53 00000020     1eee          BTST    B_RSMOTH,A14
      54 00000030     ca09          JRZ     ACR_DONE                        ;BR=NOT REVERSE SMOTHER
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    2

      55                    
      56 00000040     0d5f          CALLA   GETAFARG_LONG                   ;GET REVERSE IMAGE
         00000050 00000000! 
      57 00000070     4c01          MOVE    A0,A1
      58 00000080     b504          MOVE    *A8(OCTRL),A4,W
         00000090     01f0  
      59 000000a0     0d5f          CALLA   ANI
         000000b0 00000000! 
      60 000000d0           ACR_DONE
      61 000000d0     0960          RETS    
      62                    
      63                    **************************************************************************
      64                    *                                                                        *
      65                    * A_CHECK_ABORT_KO                                                       *
      66                    *                                                                        *
      67                    * PASS:                                                                  *
      68                    * A8 = PLAYER OBJECT                                                     *
      69                    *                                                                        *
      70                    **************************************************************************
      71                    
      72 000000e0           A_CHECK_ABORT_KO
      73 000000e0     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         000000f0     0630  
      74 00000100     1fae          BTST    B_SAVEMADE,A14
      75 00000110     cb14          JRNZ    ACAKO_DONE                      ;BR=OKAY, ALREADY SAVED
      76                    
      77 00000120     05ae          MOVE    @PUCK_CONTROL,A14,W
         00000130 00000000! 
      78 00000150     cb00          JRNZ    A_GSCRIPT_DONE                  ;BR=ABORT, SOMEBODY GOT DA PUCK
         00000160     02f8  
      79                    
      80 00000170     b700          MOVE    *A8(ODT_GCOMPTIME),A0,L
         00000180     0720  
      81 00000190     07a1          MOVE    @PUCK_NEWDIR_TIME,A1,L
         000001a0 00000000! 
      82 000001c0     4801          CMP     A0,A1
      83 000001d0     c700          JRGT    A_GSCRIPT_DONE                  ;BR=ABORT, NEW DIRECTION
         000001e0     02f0  
      84                    
      85 000001f0     05ae          MOVE    @PUCK_MODE,A14,W
         00000200 00000000! 
      86 00000220     0b4e          CMPI    PUM_SCORE,A14
         00000230     ff9c  
      87 00000240     ca00          JREQ    A_GSCRIPT_DONE                  ;BR=ABORT, SCORE!
         00000250     02e9  
      88 00000260           ACAKO_DONE
      89 00000260     0960          RETS            
      90                    
      91                    **************************************************************************
      92                    *                                                                        *
      93                    * A_SET_KO                                                               *
      94                    *                                                                        *
      95                    * PASS:                                                                  *
      96                    * A8 = PLAYER OBJECT                                                     *
      97                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    3

      98                    **************************************************************************
      99                    
     100 00000270           A_SET_KO
     101 00000270     09c4          MOVI    s_puck_to_goalie_mask_1,A4
         00000280     002c  
     102 00000290     0d5f          CALLA   do_sound
         000002a0 00000000! 
     103                    
     104 000002c0     09e1          MOVI    -038000H,A1
         000002d0 fffc8000  
     105                    
     106 000002f0     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         00000300     0630  
     107 00000310     1f8e          BTST    B_MISSSAVE,A14
     108 00000320     ca09          JRZ     ASKO_CHECK_SIDE
     109                    
     110 00000330     09c0          MOVI    511,A0
         00000340     01ff  
     111 00000350     0d5f          CALLA   RANDPER
         00000360 00000000! 
     112 00000380     c803          JRC     ASKO_CHECK_SIDE
     113 00000390     09e1          MOVI    -060000H,A1
         000003a0 fffa0000  
     114                    
     115 000003c0           ASKO_CHECK_SIDE
     116 000003c0     b70e          MOVE    *A8(OXVAL),A14,L
         000003d0     0140  
     117 000003e0     ce01          JRN     ASKO_SET                        ;BR=ON THE LEFT
     118 000003f0     03a1          NEG     A1                      
     119 00000400           ASKO_SET
     120 00000400     b228          MOVE    A1,*A8(OXVEL),L
         00000410     0100  
     121 00000420     0300          JRUC    A_CHECK_KO_X_LIMIT      
     122                    
     123                    **************************************************************************
     124                    *                                                                        *
     125                    * A_CHECK_KO_X_LIMIT                                                     *
     126                    *                                                                        *
     127                    * PASS:                                                                  *
     128                    * A8 = PLAYER OBJECT                                                     *
     129                    *                                                                        *
     130                    **************************************************************************
     131                    
     132 00000430           A_CHECK_KO_X_LIMIT
     133 00000430     b700          MOVE    *A8(OXVEL),A0,L
         00000440     0100  
     134 00000450     0380          ABS     A0
     135 00000460     b701          MOVE    *A8(OXVAL),A1,L
         00000470     0140  
     136 00000480     0381          ABS     A1
     137 00000490     4001          ADD     A0,A1
     138 000004a0     0b61          CMPI    029E0000H,A1
         000004b0 fd61ffff  
     139 000004d0     c541          JRGE    ACKOS_STOP                      ;BR=X LIMIT EXCEEDED ON NEXT
     140 000004e0     0960          RETS
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    4

     141                    
     142                    **************************************************************************
     143                    *                                                                        *
     144                    * A_CHECK_KO_SLIDE                                                               *
     145                    *                                                                        *
     146                    * PASS:                                                                  *
     147                    * A8 = PLAYER OBJECT                                                     *
     148                    *                                                                        *
     149                    **************************************************************************
     150                    
     151 000004f0           A_CHECK_KO_SLIDE
     152 000004f0     05a4          MOVE    @PUCK_MODE,A4,W
         00000500 00000000! 
     153 00000520     0b44          CMPI    PUM_FACEOFF,A4
         00000530     ff9b  
     154 00000540     ca3a          JREQ    ACKOS_STOP                      ;BR=ABORT, FACEOFF!
     155                    
     156 00000550     b700          MOVE    *A8(OXVEL),A0,L
         00000560     0100  
     157 00000570     0183          GETST   A3
     158                    
     159 00000580     af01          MOVB    *A8(ANIMSLP),A1
         00000590     0360  
     160 000005a0     1421          DEC     A1
     161 000005b0     ca33          JRZ     ACKOS_STOP                      ;BR=NO MORE LOOPS
     162 000005c0     ac28          MOVB    A1,*A8(ANIMSLP)
         000005d0     0360  
     163                    
     164 000005e0     09c1          MOVI    07FFFH,A1
         000005f0     7fff  
     165 00000600     b702          MOVE    *A8(OXVAL),A2,L
         00000610     0140  
     166 00000620     ce01          JRN     ACKOS_CHECK_LIMIT               ;BR=LEFT SIDE
     167 00000630     03a1          NEG     A1
     168 00000640           ACKOS_CHECK_LIMIT
     169 00000640     0382          ABS     A2
     170 00000650     0b62          CMPI    029E0000H,A2
         00000660 fd61ffff  
     171 00000680     c402          JRLT    ACKOS_SLOW
     172 00000690     4c01          MOVE    A0,A1
     173 000006a0     03a1          NEG     A1
     174 000006b0           ACKOS_SLOW
     175 000006b0     4020          ADD     A1,A0
     176 000006c0     018e          GETST   A14
     177 000006d0     566e          XOR     A3,A14
     178 000006e0     0b8e          ANDI    0A0000000H,A14
         000006f0 5fffffff  
     179 00000710     ca14          JRZ     ACKOS_SET                       ;BR=GOING OTHER DIRECTION
     180                    
     181 00000720     4c00          MOVE    A0,A0
     182 00000730     ca12          JRZ     ACKOS_SET
     183                    
     184 00000740     0b44          CMPI    PUM_SCORE,A4
         00000750     ff9c  
     185 00000760     cb0e          JRNE    ACKOS_CLR                       ;BR=NO SCORE
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    5

     186                    
     187 00000770     09c0          MOVI    PID_GOAL_SLIDE,A0
         00000780     0a10  
     188 00000790     0d5f          CALLA   EXISTP_ALL
         000007a0 00000000! 
     189 000007c0     cb08          JRNZ    ACKOS_CLR                       ;BR=GOAL ALREADY SLIDIN'
     190                    
     191 000007d0                   CREATE  PID_GOAL_SLIDE,GOAL_SLIDE_PROC
     192                    
     193 00000850           ACKOS_CLR
     194 00000850     5600          CLR     A0
     195 00000860           ACKOS_SET
     196 00000860     b208          MOVE    A0,*A8(OXVEL),L
         00000870     0100  
     197                    
     198 00000880     b70e          MOVE    *A8(ANIMFRM),A14,L              ;HOLD FRAME
         00000890     0320  
     199 000008a0     0bee          SUBI    020H+010H+020H,A14
         000008b0     ffaf  
     200 000008c0     b3c8          MOVE    A14,*A8(ANIMFRM),L
         000008d0     0320  
     201 000008e0     0960          RETS
     202                    
     203 000008f0           ACKOS_STOP
     204 000008f0     57ce          CLR     A14
     205 00000900     b3c8          MOVE    A14,*A8(OXVEL),L
         00000910     0100  
     206 00000920     0960          RETS
     207                    
     208                    **************************************************************************
     209                    *                                                                        *
     210                    * GOAL_SLIDE_PROC                                                        *
     211                    *                                                                        *
     212                    * PASS:                                                                  *
     213                    * A8 = GOALIE OBJECT                                                     *
     214                    *                                                                        *
     215                    **************************************************************************
     216                    
     217 00000930           GOAL_SLIDE_PROC
     218 00000930     b706          MOVE    *A8(ODT_PBK),A6,L
         00000940     0530  
     219 00000950     aece          MOVB    *A6(POF_NUMBER),A14
         00000960     0000  
     220 00000970     148e          SUBK    4,A14
     221 00000980     cb0c          JRNZ    GSP_RIGHT
     222                    
     223 00000990     07a8          MOVE    @lgoalF_object,A8,L
         000009a0 00000000! 
     224 000009c0     09e9          MOVI    -020000H,A9
         000009d0 fffe0000  
     225 000009f0     09ca          MOVI    01000H,A10
         00000a00     1000  
     226 00000a10     09eb          MOVI    -02AD0000H,A11
         00000a20 fd530000  
     227 00000a40     c00b          JRUC    GSP_LUPE
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    6

     228                    
     229 00000a50           GSP_RIGHT
     230 00000a50     07a8          MOVE    @rgoalF_object,A8,L
         00000a60 00000000! 
     231 00000a80     09e9          MOVI    020000H,A9
         00000a90 00020000  
     232 00000ab0     09ca          MOVI    -01000H,A10
         00000ac0     f000  
     233 00000ad0     09eb          MOVI    02AD0000H,A11
         00000ae0 02ad0000  
     234                    
     235 00000b00           GSP_LUPE
     236 00000b00     4149          ADD     A10,A9
     237 00000b10     b328          MOVE    A9,*A8(OXVEL),L
         00000b20     0100  
     238 00000b30     ca05          JRZ     GSP_WAIT                        ;BR=STOPPED
     239                    
     240 00000b40                   SLEEP   1
     241 00000b80     c0f7          JRUC    GSP_LUPE
     242                    
     243 00000b90           GSP_WAIT
     244 00000b90                   SLEEP   1
     245 00000bd0     05a0          MOVE    @WORLDX+010H,A0,W
         00000be0 00000010! 
     246 00000c00     0380          ABS     A0
     247 00000c10     0b40          CMPI    0163H,A0
         00000c20     fe9c  
     248 00000c30     c7f5          JRGT    GSP_WAIT
     249                    
     250 00000c40     b368          MOVE    A11,*A8(OXVAL),L
         00000c50     0140  
     251                    
     252 00000c60                   DIE
     253                    
     254                    
     255                    **************************************************************************
     256                    *                                                                        *
     257                    * A_CLRVELS - CLEAR X AND Z VELOCITIES ALONG WITH ODT_VEL                *
     258                    *                                                                        *
     259                    * PASS:                                                                  *
     260                    * A8 = PLAYER OBJECT                                                     *
     261                    *                                                                        *
     262                    **************************************************************************
     263                    
     264 00000c90           A_CLRVELS
     265 00000c90     57ce          CLR     A14
     266 00000ca0     b3c8          MOVE    A14,*A8(ODT_VEL),L
         00000cb0     04d0  
     267 00000cc0     b3c8          MOVE    A14,*A8(OXVEL),L
         00000cd0     0100  
     268 00000ce0     b3c8          MOVE    A14,*A8(OZVEL),L
         00000cf0     00e0  
     269 00000d00     0960          RETS
     270                    
     271                    **************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    7

     272                    *                                                                        *
     273                    * A_CHECK_LOOKFAR  - CHECK IF GOALIE SHOULD LOOK OVER FAR SHOULDER       *
     274                    * A_CHECK_LOOKNEAR - CHECK IF GOALIE SHOULD LOOK OVER NEAR SHOULDER      *
     275                    *                                                                        *
     276                    * PASS:                                                                  *
     277                    * A8 = GOALIE OBJECT                                                     *
     278                    *                                                                        *
     279                    **************************************************************************
     280                    
     281 00000d10           A_CHECK_LOOKNEAR
     282 00000d10     b701          MOVE    *A8(OZVAL),A1,L
         00000d20     0180  
     283 00000d30     07a9          MOVE    @PUCK_OBJECT,A9,L
         00000d40 00000000! 
     284 00000d60     b720          MOVE    *A9(OZVAL),A0,L
         00000d70     0180  
     285 00000d80     c007          JRUC    ACL_CHECK
     286 00000d90           A_CHECK_LOOKFAR
     287 00000d90     b700          MOVE    *A8(OZVAL),A0,L
         00000da0     0180  
     288 00000db0     07a9          MOVE    @PUCK_OBJECT,A9,L
         00000dc0 00000000! 
     289 00000de0     b721          MOVE    *A9(OZVAL),A1,L
         00000df0     0180  
     290 00000e00           ACL_CHECK
     291 00000e00     4801          CMP     A0,A1
     292 00000e10     c718          JRGT    ACL_GO                          ;BR=DON'T EVEN LOOK!                            
     293                    
     294 00000e20     4401          SUB     A0,A1
     295 00000e30     0381          ABS     A1
     296 00000e40     0b61          CMPI    0200000H,A1
         00000e50 ffdfffff  
     297 00000e70     c705          JRGT    ACL_STAY                        ;BR=TOO FAR
     298                    
     299 00000e80     1940          MOVK    10,A0
     300 00000e90     0d5f          CALLA   RANDPER
         00000ea0 00000000! 
     301 00000ec0     c80d          JRC     ACL_GO                          ;BR=LOOK OUT!
     302                    
     303 00000ed0           ACL_STAY
     304 00000ed0     af01          MOVB    *A8(ANIMLOOP),A1
         00000ee0     0370  
     305 00000ef0     1421          DEC     A1
     306 00000f00     ca08          JRZ     ACL_DONE                        ;BR=NO MORE LOOPS
     307 00000f10     ac28          MOVB    A1,*A8(ANIMLOOP)
         00000f20     0370  
     308                    
     309 00000f30     b70e          MOVE    *A8(ANIMFRM),A14,L              ;HOLD FRAME
         00000f40     0320  
     310 00000f50     0bee          SUBI    020H+010H+020H+020H,A14
         00000f60     ff8f  
     311 00000f70     b3c8          MOVE    A14,*A8(ANIMFRM),L
         00000f80     0320  
     312 00000f90           ACL_DONE
     313 00000f90     0960          RETS
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    8

     314                    
     315 00000fa0           ACL_GO
     316 00000fa0     0d5f          CALLA   GETAFARG_LONG                   ;JUMP TO TURN HEAD ANIMATION
         00000fb0 00000000! 
     317 00000fd0     b208          MOVE    A0,*A8(ANIMFRM),L
         00000fe0     0320  
     318 00000ff0     0960          RETS
     319                    
     320                    **************************************************************************
     321                    *                                                                        *
     322                    * A_WAIT_FACEOFF - WAIT FOR FACEOFF TO FINISH                            *
     323                    *                                                                        *
     324                    * PASS:                                                                  *
     325                    * A8 = GOALIE OBJECT                                                     *
     326                    *                                                                        *
     327                    **************************************************************************
     328 00001000           A_WAIT_FACEOFF
     329 00001000     05ae          MOVE    @PUCK_CONTROL,A14,W
         00001010 00000000! 
     330 00001030     cb00          JRNZ    A_GSCRIPT_DONE                  ;BR=UNDER CONTROL
         00001040     020a  
     331                    
     332 00001050     05ae          MOVE    @PUCK_MODE,A14,W
         00001060 00000000! 
     333 00001080     0b4e          CMPI    PUM_FACEOFF,A14
         00001090     ff9b  
     334 000010a0     cb00          JRNE    A_GSCRIPT_DONE                  ;BR=FINISH ANIMATION
         000010b0     0203  
     335 000010c0           A_WFA_DONE
     336 000010c0     0960          RETS
     337                    
     338                    **************************************************************************
     339                    *                                                                        *
     340                    * A_CHECK_FACEOFF - CHECK FOR FACEOFF PUCK MODE AND FINISH ANIMATION IF  *
     341                    *                    SET                                                 *
     342                    * PASS:                                                                  *
     343                    * A8 = GOALIE OBJECT                                                     *
     344                    *                                                                        *
     345                    **************************************************************************
     346 000010d0           A_CHECK_FACEOFF
     347 000010d0     05ae          MOVE    @PUCK_CONTROL,A14,W
         000010e0 00000000! 
     348 00001100     cb07          JRNZ    A_CFA_DONE                      ;BR=STILL UNDER CONTROL
     349                    
     350 00001110     05ae          MOVE    @PUCK_MODE,A14,W
         00001120 00000000! 
     351 00001140     0b4e          CMPI    PUM_FACEOFF,A14
         00001150     ff9b  
     352 00001160     ca00          JREQ    A_GSCRIPT_DONE                  ;BR=FINISH ANIMATION
         00001170     01f7  
     353 00001180           A_CFA_DONE
     354 00001180     0960          RETS
     355                    
     356                    **************************************************************************
     357                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    9

     358                    * A_CHECK_FRUST - CHECK IF FRUSTRATION ANIMATION SHOULD LOOP OR HOLD     *
     359                    *                                                                        *
     360                    * PASS:                                                                  *
     361                    * A8 = GOALIE OBJECT                                                     *
     362                    *                                                                        *
     363                    **************************************************************************
     364 00001190           A_CHECK_FRUST
     365 00001190     05ae          MOVE    @PUCK_CONTROL,A14,W
         000011a0 00000000! 
     366 000011c0     cb18          JRNZ    A_CF_DONE                       ;BR=UNDER CONTROL
     367                    
     368 000011d0     05ae          MOVE    @PUCK_MODE,A14,W
         000011e0 00000000! 
     369 00001200     0b4e          CMPI    PUM_SCORE,A14
         00001210     ff9c  
     370 00001220     cb12          JRNE    A_CF_DONE                       ;BR=SCORE OVER
     371                    
     372 00001230     af01          MOVB    *A8(ANIMLOOP),A1
         00001240     0370  
     373 00001250     ca0f          JRZ     A_CF_DONE                       ;BR=DON'T LOOP
     374                    ;       JRNZ    A_CF_RAND                       ;BR=CHECK IF WE SHOULD LOOP
     375                    ;A_CF_HOLD
     376                    ;       MOVE    *A8(ANIMFRM),A14,L              ;HOLD ON STAND
     377                    ;       SUBI    020H+010H+020H,A14
     378                    ;       MOVE    A14,*A8(ANIMFRM),L
     379                    ;       RETS
     380                    ;A_CF_RAND
     381 00001260     5621          CLR     A1                              ;FLAG HOLD ON NEXT FUNCTION CALL
     382 00001270     ac28          MOVB    A1,*A8(ANIMLOOP)
         00001280     0370  
     383                    
     384 00001290     09c0          MOVI    511,A0
         000012a0     01ff  
     385 000012b0     0d5f          CALLA   RANDPER
         000012c0 00000000! 
     386                    ;       JRNC    A_CF_HOLD                       ;BR=DON'T LOOP, HOLD ON STAND
     387 000012e0     c906          JRNC    A_CF_DONE                       ;BR=DON'T LOOP
     388                    
     389 000012f0     bb08          MOVE    *A8(ANIMSCR),*A8(ANIMFRM),L     ;LOOP, RESTART ANIMATION
         00001300     0340  
         00001310     0320  
     390 00001320     1880          MOVK    4,A0                            ;SLOWER THIS TIME
     391 00001330     ac08          MOVB    A0,*A8(ANIMSLP)
         00001340     0360  
     392 00001350           A_CF_DONE
     393 00001350     0960          RETS
     394                    
     395                    **************************************************************************
     396                    *                                                                        *
     397                    * A_SET_SKATE_SLEEP - SET ANIMSLP WITH RESPECT TO ODT_VEL                *
     398                    *                                                                        *
     399                    * PASS:                                                                  *
     400                    * A8 = GOALIE OBJECT                                                     *
     401                    *                                                                        *
     402                    **************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   10

     403                    
     404 00001360           A_SET_SKATE_SLEEP
     405 00001360     18c0          MOVK    6,A0
     406 00001370     b70e          MOVE    *A8(ODT_VEL),A14,L
         00001380     04d0  
     407 00001390     0b6e          CMPI    011000H,A14
         000013a0 fffeefff  
     408 000013c0     c406          JRLT    A_SSS_SET
     409 000013d0     1420          DEC     A0
     410 000013e0     0b6e          CMPI    020000H,A14
         000013f0 fffdffff  
     411 00001410     c401          JRLT    A_SSS_SET
     412 00001420     1420          DEC     A0
     413 00001430           A_SSS_SET
     414 00001430     ac08          MOVB    A0,*A8(ANIMSLP)
         00001440     0360  
     415 00001450     0960          RETS
     416                    
     417                    **************************************************************************
     418                    *                                                                        *
     419                    * A_INFRONT - PUCK SHOULD APPEAR IN FRONT OF GOALIE                      *
     420                    *                                                                        *
     421                    * PASS:                                                                  *
     422                    * A8 = GOALIE OBJECT                                                     *
     423                    *                                                                        *
     424                    **************************************************************************
     425 00001460           A_INBACK
     426 00001460     184e          MOVK    M_INBACK,A14
     427 00001470     c001          JRUC    A_INF_GO
     428 00001480           A_INFRONT
     429 00001480     182e          MOVK    M_INFRONT,A14
     430 00001490           A_INF_GO
     431 00001490     05a0          MOVE    @PUCK_CONTROL,A0,W
         000014a0 00000000! 
     432 000014c0     b706          MOVE    *A8(ODT_PBK),A6,L
         000014d0     0530  
     433 000014e0     aec1          MOVB    *A6(POF_NUMBER),A1
         000014f0     0000  
     434 00001500     4801          CMP     A0,A1
     435 00001510     cb0b          JRNE    A_INF_ABORT                             ;BR=NOT IN CONTROL
     436                    
     437 00001520     07a9          MOVE    @PUCK_OBJECT,A9,L
         00001530 00000000! 
     438 00001550     b520          MOVE    *A9(ODT_PFLAGS),A0,W
         00001560     0590  
     439 00001570     0b80          ANDNI   M_INBACK|M_INFRONT,A0                   ;CLEAR FLAGS
         00001580 00000003  
     440 000015a0     55c0          OR      A14,A0                                  ;SET FLAG
     441 000015b0     b009          MOVE    A0,*A9(ODT_PFLAGS),W
         000015c0     0590  
     442 000015d0           A_INF_ABORT
     443 000015d0     0960          RETS
     444                    
     445                    **************************************************************************
     446                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   11

     447                    * A_GSMOTHER                                                             *
     448                    *                                                                        *
     449                    * PASS:                                                                  *
     450                    * A8 = GOALIE OBJECT                                                     *
     451                    *                                                                        *
     452                    **************************************************************************
     453                    
     454 000015e0           A_GSMOTHER
     455 000015e0     b706          MOVE    *A8(ODT_PBK),A6,L
         000015f0     0530  
     456                    
     457 00001600     0d5f          CALLA   GETAFARG_WORD
         00001610 00000000! 
     458 00001630     b006          MOVE    A0,*A6(POF_D_COLL),W
         00001640     0690  
     459 00001650     0d5f          CALLA   GETAFARG_LONG
         00001660 00000000! 
     460 00001680     b208          MOVE    A0,*A8(ODT_FOCIOFF0),L
         00001690     05d0  
     461 000016a0     0d5f          CALLA   GETAFARG_LONG
         000016b0 00000000! 
     462 000016d0     b208          MOVE    A0,*A8(ODT_FOCIOFF1),L
         000016e0     05f0  
     463                    
     464 000016f0     05ae          MOVE    @PUCK_CONTROL,A14,W
         00001700 00000000! 
     465 00001720     ca05          JRZ     A_GS_CHECK_SCORE                        ;BR=NO CONTROL
     466 00001730     aec0          MOVB    *A6(POF_NUMBER),A0
         00001740     0000  
     467 00001750     480e          CMP     A0,A14  
     468 00001760     ca07          JREQ    A_GS_GO                                 ;BR=CONTROLLED BY GOALIE
     469 00001770     c020          JRUC    A_GS_GETUP
     470                    
     471 00001780           A_GS_CHECK_SCORE
     472 00001780     05ae          MOVE    @PUCK_MODE,A14,W
         00001790 00000000! 
     473 000017b0     0b4e          CMPI    PUM_SCORE,A14
         000017c0     ff9c  
     474 000017d0     c51a          JRGE    A_GS_GETUP                              ;BR=ABORT SMOTHER
     475 000017e0           A_GS_GO
     476 000017e0     09ce          MOVI    FREEZE_TIME,A14
         000017f0     003c  
     477 00001800     adc8          MOVB    A14,*A8(ANIMLOOP)
         00001810     0370  
     478                    
     479 00001820     0d5f          CALLA   GET_PUCK_CONTROL
         00001830 00000000! 
     480                    
     481 00001850     07a9          MOVE    @PUCK_OBJECT,A9,L
         00001860 00000000! 
     482 00001880     b52e          MOVE    *A9(ODT_PFLAGS),A14,W
         00001890     0590  
     483 000018a0     0bae          ORI     M_INBACK,A14
         000018b0 00000002  
     484 000018d0     b1c9          MOVE    A14,*A9(ODT_PFLAGS),W
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   12

         000018e0     0590  
     485                    
     486 000018f0     1820          MOVK    GS_SMOTHERED,A0
     487 00001900     0d5f          CALLA   GOALIE_SPEECH
         00001910 00000000! 
     488                    
     489 00001930     57ce          CLR     A14
     490 00001940     058e          MOVE    A14,@whack_goalie_count,W
         00001950 00000000! 
     491                    
     492 00001970     0960          RETS
     493 00001980           A_GS_GETUP
     494 00001980     0d5f          CALLA   GETAFARG_LONG
         00001990 00000000! 
     495 000019b0     b208          MOVE    A0,*A8(ANIMFRM),L
         000019c0     0320  
     496                    
     497 000019d0     0960          RETS
     498                    
     499                    **************************************************************************
     500                    *                                                                        *
     501                    * A_SETCOLL                                                              *
     502                    * A_SETFOCIS                                                             *
     503                    *                                                                        *
     504                    * PASS:                                                                  *
     505                    * A8 = GOALIE OBJECT                                                     *
     506                    *                                                                        *
     507                    **************************************************************************
     508                    
     509 000019e0           A_SETCOLL
     510 000019e0     0d5f          CALLA   GETAFARG_WORD
         000019f0 00000000! 
     511 00001a10     b706          MOVE    *A8(ODT_PBK),A6,L
         00001a20     0530  
     512 00001a30     b006          MOVE    A0,*A6(POF_D_COLL),W
         00001a40     0690  
     513 00001a50           A_SETFOCIS
     514 00001a50     0d5f          CALLA   GETAFARG_LONG
         00001a60 00000000! 
     515 00001a80     b208          MOVE    A0,*A8(ODT_FOCIOFF0),L
         00001a90     05d0  
     516 00001aa0     0d5f          CALLA   GETAFARG_LONG
         00001ab0 00000000! 
     517 00001ad0     b208          MOVE    A0,*A8(ODT_FOCIOFF1),L
         00001ae0     05f0  
     518 00001af0     0960          RETS
     519                    
     520                    **************************************************************************
     521                    *                                                                        *
     522                    * A_CLRFOFFS                                                             *
     523                    *                                                                        *
     524                    * PASS:                                                                  *
     525                    * A8 = GOALIE OBJECT                                                     *
     526                    *                                                                        *
     527                    **************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   13

     528                    
     529 00001b00           A_CLRFOFFS
     530 00001b00     b706          MOVE    *A8(ODT_PBK),A6,L
         00001b10     0530  
     531 00001b20     09ce          MOVI    GSTAND_COLLRANGE,A14
         00001b30     0028  
     532 00001b40     b1c6          MOVE    A14,*A6(POF_D_COLL),W
         00001b50     0690  
     533 00001b60     57ce          CLR     A14
     534 00001b70     b3c8          MOVE    A14,*A8(ODT_FOCIOFF0),L
         00001b80     05d0  
     535 00001b90     b3c8          MOVE    A14,*A8(ODT_FOCIOFF1),L
         00001ba0     05f0  
     536 00001bb0     0960          RETS
     537                    
     538                    **************************************************************************
     539                    *                                                                        *
     540                    * A_GPASS_DONE_1                                                         *
     541                    *                                                                        *
     542                    * PASS:                                                                  *
     543                    * A8 = GOALIE OBJECT                                                     *
     544                    *                                                                        *
     545                    **************************************************************************
     546                    
     547 00001bc0           A_GPASS_DONE_1
     548 00001bc0     0d5f          CALLA   pass_done_1_safe
         00001bd0 00000000! 
     549 00001bf0     c907          JRNC    AGPD1_ABORT_PASS                ;BR=NOT SUCCESSFUL
     550                    
     551 00001c00     57ce          CLR     A14
     552 00001c10     b3c8          MOVE    A14,*A8(ODT_GPOSSIRQ),L         ;RESET IRQ TIME OF POSSESSION
         00001c20     06e0  
     553 00001c30     0d5f          CALLA   clear_all_signals
         00001c40 00000000! 
     554 00001c60     0960          RETS
     555 00001c70           AGPD1_ABORT_PASS
     556 00001c70     57ce          CLR     A14                             ;FLAG PASS FAILED
     557 00001c80     142e          DEC     A14
     558 00001c90     b3c8          MOVE    A14,*A8(ODT_GPOSSIRQ),L         ;RESET IRQ TIME OF POSSESSION
         00001ca0     06e0  
     559                    
     560 00001cb0     0d5f          CALLA   clear_all_signals
         00001cc0 00000000! 
     561 00001ce0     c080          JAUC    pass_script_done_2
         00001cf0 00000000! 
     562                    
     563                    **************************************************************************
     564                    *                                                                        *
     565                    * A_SPASS_DONE_1                                                         *
     566                    *                                                                        *
     567                    * PASS:                                                                  *
     568                    * A8 = GOALIE OBJECT                                                     *
     569                    *                                                                        *
     570                    **************************************************************************
     571                    
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   14

     572 00001d10           A_SPASS_DONE_1
     573 00001d10     0d5f          CALLA   pass_done_1_safe
         00001d20 00000000! 
     574 00001d40     c907          JRNC    ASPD1_ABORT_PASS                ;BR=NOT SUCCESSFUL
     575                    
     576 00001d50     57ce          CLR     A14
     577 00001d60     b3c8          MOVE    A14,*A8(ODT_GPOSSIRQ),L         ;RESET IRQ TIME OF POSSESSION
         00001d70     06e0  
     578 00001d80     0d5f          CALLA   clear_all_signals
         00001d90 00000000! 
     579 00001db0     0960          RETS
     580 00001dc0           ASPD1_ABORT_PASS
     581 00001dc0     0d5f          CALLA   clear_all_signals
         00001dd0 00000000! 
     582                    
     583 00001df0     19ce          MOVK    PM_GSMOTHER,A14
     584 00001e00     b1c6          MOVE    A14,*A6(POF_MODE),W
         00001e10     0210  
     585                    
     586 00001e20     0d5f          CALLA   GETAFARG_WORD
         00001e30 00000000! 
     587                    
     588 00001e50     b70e          MOVE    *A8(ODT_GPOSSIRQ),A14,L
         00001e60     06e0  
     589 00001e70     ca05          JRZ     ASPD1_AP_LOOP                   ;BR=SET ANIMLOOP
     590 00001e80     57ce          CLR     A14                             ;FLAG PASS FAILED
     591 00001e90     142e          DEC     A14
     592 00001ea0     b3c8          MOVE    A14,*A8(ODT_GPOSSIRQ),L         ;RESET IRQ TIME OF POSSESSION
         00001eb0     06e0  
     593 00001ec0     c008          JRUC    ASPD1_AP_JUMP
     594                    
     595 00001ed0           ASPD1_AP_LOOP
     596 00001ed0     af01          MOVB    *A8(ANIMLOOP),A1
         00001ee0     0370  
     597 00001ef0     4401          SUB     A0,A1
     598 00001f00     c102          JRP     ASPD1_AP_SET                    ;BR=FREEZE TIME OKAY
     599 00001f10     5621          CLR     A1                              ;FLAG PASS FAILED
     600 00001f20     1421          DEC     A1
     601 00001f30           ASPD1_AP_SET
     602 00001f30     ac28          MOVB    A1,*A8(ANIMLOOP)
         00001f40     0370  
     603                    
     604 00001f50           ASPD1_AP_JUMP
     605 00001f50     0d5f          CALLA   GETAFARG_LONG
         00001f60 00000000! 
     606 00001f80     b208          MOVE    A0,*A8(ANIMFRM),L
         00001f90     0320  
     607 00001fa0     0960          RETS
     608                    
     609                    **************************************************************************
     610                    *                                                                        *
     611                    * A_LOSE_PUCK                                                            *
     612                    *                                                                        *
     613                    * PASS:                                                                  *
     614                    * A8 = GOALIE OBJECT                                                     *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   15

     615                    *                                                                        *
     616                    **************************************************************************
     617                    
     618 00001fb0           A_LOSE_PUCK
     619 00001fb0     57ce          CLR     A14
     620 00001fc0     058e          MOVE    A14,@whack_goalie_count,W
         00001fd0 00000000! 
     621                    
     622 00001ff0     57ce          CLR     A14                             ;PUM_OPEN
     623 00002000     0d5f          calla   set_safe_puck_mode_a14
         00002010 00000000! 
     624 00002030     05c0          MOVE    @PUCK_CONTROL,@PUCK_LAST_CONTROL,W
         00002040 00000000! 
         00002060 00000000! 
     625 00002080     57ce          CLR     A14
     626 00002090     058e          MOVE    A14,@PUCK_INTENDED,W
         000020a0 00000000! 
     627 000020c0     058e          MOVE    A14,@PUCK_CONTROL,W
         000020d0 00000000! 
     628 000020f0     0d5f          CALLA   new_puck_control
         00002100 00000000! 
     629                    
     630 00002120     57ce          CLR     A14
     631 00002130     b3c8          MOVE    A14,*A8(ODT_GPOSSIRQ),L         ;RESET IRQ TIME OF POSSESSION
         00002140     06e0  
     632                    
     633 00002150     1bc0          MOVK    30,A0
     634 00002160     0d3f          CALLR   ALL_IGNORE_PUCK
         00002170     003b  
     635                    
     636 00002180     b706          MOVE    *A8(ODT_PBK),A6,L
         00002190     0530  
     637                    
     638 000021a0     aec0          MOVB    *A6(POF_DIRECTION),A0
         000021b0     0390  
     639 000021c0     0d5f          CALLA   dir_to_degrees
         000021d0 00000000! 
     640                    
     641 000021f0     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         00002200     0630  
     642 00002210     1eee          BTST    B_RSMOTH,A14
     643 00002220     ca03          JRZ     ALP_CHOOSE_ANGLE                ;BR=NOT REVERSE SMOTHER
     644 00002230     0b20          ADDI    XD1800,A0                       ;COME OUT BUTT SIDE
         00002240 00b40000  
     645                    
     646 00002260           ALP_CHOOSE_ANGLE
     647 00002260     4c01          MOVE    A0,A1
     648 00002270     0b20          ADDI    XD0800,A0
         00002280 00500000  
     649 000022a0     0d01          SUBI    XD0800,A1
         000022b0 ffafffff  
     650 000022d0     0d5f          CALLA   RANGERND
         000022e0 00000000! 
     651 00002300     4c02          MOVE    A0,A2
     652                    
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   16

     653 00002310     09e0          MOVI    040000H,A0
         00002320 00040000  
     654 00002340     09e1          MOVI    020000H,A1
         00002350 00020000  
     655 00002370     0d5f          CALLA   RANGERND
         00002380 00000000! 
     656 000023a0     4c01          MOVE    A0,A1
     657 000023b0                   THETA_N A2
     658 00002490     4c40          MOVE    A2,A0
     659                    
     660 000024a0     07a8          MOVE    @PUCK_OBJECT,A8,L
         000024b0 00000000! 
     661 000024d0     0d5f          CALLA   set_obj_to_polar
         000024e0 00000000! 
     662                    
     663 00002500     c080          JAUC    puck_slide_sound
         00002510 00000000! 
     664                    
     665                    **************************************************************************
     666                    *                                                                        *
     667                    * ALL_IGNORE_PUCK                                                        *
     668                    *                                                                        *
     669                    * PASS:                                                                  *
     670                    * A0 = IGNORE TIME                                                       *
     671                    *                                                                        *
     672                    **************************************************************************
     673                    
     674 00002530           ALL_IGNORE_PUCK
     675 00002530                   PUSH    A6
     676 00002540     09e6          MOVI    PLAYER_1_BLOCK,A6
         00002550 00000000! 
     677 00002570           AIP_LUPE
     678 00002570     ac06          MOVB    A0,*A6(POF_IGNORE_PUCK)
         00002580     0598  
     679 00002590     0b06          ADDI    PLAYER_BLOCK_SIZE,A6
         000025a0     1000  
     680 000025b0     0b66          CMPI    PLAYER_8_BLOCK,A6
         000025c0 ffffffff! 
     681 000025e0     c6f8          JRLE    AIP_LUPE
     682                    
     683 000025f0                   PULLQ   A6
     684 00002600     0960          RETS
     685                    **************************************************************************
     686                    *                                                                        *
     687                    * A_RESET_WACK                                                           *
     688                    *                                                                        *
     689                    * PASS:                                                                  *
     690                    * A8 = GOALIE OBJECT                                                     *
     691                    *                                                                        *
     692                    **************************************************************************
     693                    
     694 00002610           A_RESET_WACK
     695 00002610     57ce          CLR     A14
     696 00002620     058e          MOVE    A14,@whack_goalie_count,W
         00002630 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   17

     697                    
     698 00002650     0d5f          CALLA   GETAFARG_LONG
         00002660 00000000! 
     699 00002680     b208          MOVE    A0,*A8(ANIMFRM),L
         00002690     0320  
     700                    
     701 000026a0     b70e          MOVE    *A8(ODT_GPOSSIRQ),A14,L
         000026b0     06e0  
     702 000026c0     cb08          JRNZ    ARW_DONE                        ;BR=SET ANIMLOOP
     703                    
     704 000026d0     af01          MOVB    *A8(ANIMLOOP),A1
         000026e0     0370  
     705 000026f0     14c1          SUBK    6,A1
     706 00002700     c102          JRP     ARW_SET                         ;BR=FREEZE TIME OKAY
     707 00002710     5621          CLR     A1                              ;FLAG PASS FAILED
     708 00002720     1421          DEC     A1
     709 00002730           ARW_SET
     710 00002730     ac28          MOVB    A1,*A8(ANIMLOOP)
         00002740     0370  
     711 00002750           ARW_DONE
     712 00002750     0960          RETS
     713                    
     714                    **************************************************************************
     715                    *                                                                        *
     716                    * A_CHECK_SPASS                                                          *
     717                    *                                                                        *
     718                    * PASS:                                                                  *
     719                    * A8 = GOALIE OBJECT                                                     *
     720                    *                                                                        *
     721                    **************************************************************************
     722                    
     723 00002760           A_CHECK_SPASS
     724 00002760     05ae          MOVE    @PUCK_CONTROL,A14,W
         00002770 00000000! 
     725 00002790     ca73          JRZ     ACSP_GETUP                              ;BR=NO CONTROL
     726                    
     727                    ;IF NO CONTROL, CHECK?
     728                    ;       MOVE    @PUCK_MODE,A14,W
     729                    ;       CMPI    PUM_SCORE,A14
     730                    ;       JRGE    ACSP_GETUP                              ;BR=ABORT SMOTHER
     731                    
     732 000027a0     b706          MOVE    *A8(ODT_PBK),A6,L
         000027b0     0530  
     733 000027c0     aec0          MOVB    *A6(POF_NUMBER),A0
         000027d0     0000  
     734 000027e0     49c0          CMP     A14,A0
     735 000027f0     cb6d          JRNE    ACSP_GETUP                              ;BR=DON'T HAVE CONTROL
     736                    
     737 00002800     0d5f          CALLA   GET_TEAMMATE_BLOCKS
         00002810 00000000! 
     738                    
     739 00002830     b40e          MOVE    *A0(POF_FLAGS),A14,W
         00002840     0200  
     740 00002850     1f0e          BTST    B_PF_SIG_PASS,A14
     741 00002860     cb04          JRNZ    ACSP_PASS                               ;BR=PASS REQUEST
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   18

     742                    
     743                    ;       MOVE    A1,A0
     744                    ;       MOVE    *A0(POF_FLAGS),A14,W
     745 00002870     b42e          MOVE    *A1(POF_FLAGS),A14,W
         00002880     0200  
     746 00002890     1f0e          BTST    B_PF_SIG_PASS,A14
     747 000028a0     ca09          JRZ     ACSP_STAY                               ;BR=NO PASS REQUEST
     748 000028b0           ACSP_PASS
     749                    ;       MOVE    A0,A7
     750                    ;       CALLA   GOALIE_PASS_PUCK_PA7
     751 000028b0     0d5f          CALLA   GOALIE_PASS_PUCK
         000028c0 00000000! 
     752 000028e0     c805          JRC     ACSP_STAY                               ;BR=NO PASS
     753                    
     754 000028f0     18a0          MOVK    GS_PASSED,A0
     755 00002900     0d5f          CALLA   GOALIE_SPEECH
         00002910 00000000! 
     756                    
     757 00002930     0960          RETS
     758 00002940           ACSP_STAY
     759 00002940     b700          MOVE    *A8(ODT_GPOSSIRQ),A0,L          ;RESET IRQ TIME OF POSSESSION
         00002950     06e0  
     760 00002960     ca09          JRZ     ACSP_CHECK_LOOP                         ;BR=NO IRQ
     761 00002970     ce45          JRN     ACSP_F_GO                               ;BR=PASS FAILED, FREEZE
     762                    
     763 00002980     07ae          MOVE    @WAVEIRQS,A14,L
         00002990 00000000! 
     764 000029b0     440e          SUB     A0,A14
     765 000029c0     0b4e          CMPI    FREEZE_TIME,A14
         000029d0     ffc3  
     766 000029e0     c608          JRLE    ACSP_CHECK_WACK                         ;BR=NOT YET
     767 000029f0     c029          JRUC    ACSP_FREEZE
     768                    
     769 00002a00           ACSP_CHECK_LOOP
     770 00002a00     af0e          MOVB    *A8(ANIMLOOP),A14
         00002a10     0370  
     771 00002a20     ce3a          JRN     ACSP_F_GO                               ;BR=PASS FAILED, FREEZE
     772 00002a30     142e          DEC     A14
     773 00002a40     ca24          JRZ     ACSP_FREEZE                             ;BR=FREEZE PUCK
     774 00002a50     adc8          MOVB    A14,*A8(ANIMLOOP)
         00002a60     0370  
     775 00002a70           ACSP_CHECK_WACK
     776 00002a70     05ae          MOVE    @whack_goalie_count,A14,W
         00002a80 00000000! 
     777 00002aa0     ca17          JRZ     ACSP_STAY_ON_FRAME
     778 00002ab0     0d5f          CALLA   GETAFARG_LONG
         00002ac0 00000000! 
     779 00002ae0     0d5f          CALLA   GETAFARG_LONG
         00002af0 00000000! 
     780 00002b10     4c01          MOVE    A0,A1                                   ;WACKED ANIM
     781 00002b20     09c0          MOVI    512,A0
         00002b30     0200  
     782 00002b40     0d5f          CALLA   RANDPER
         00002b50 00000000! 
     783 00002b70     c804          JRC     ACSP_CW_SET
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   19

     784 00002b80     0d5f          CALLA   GETAFARG_LONG
         00002b90 00000000! 
     785 00002bb0     4c01          MOVE    A0,A1                                   ;LOSE PUCK ANIM
     786 00002bc0           ACSP_CW_SET
     787 00002bc0     b228          MOVE    A1,*A8(ANIMFRM),L
         00002bd0     0320  
     788 00002be0     0d5f          CALLA   player_grunt_sound
         00002bf0 00000000! 
     789 00002c10     0960          RETS
     790                    
     791 00002c20           ACSP_STAY_ON_FRAME      
     792 00002c20     b70e          MOVE    *A8(ANIMFRM),A14,L                      ;STAY AT THIS FRAME
         00002c30     0320  
     793                    ;       SUBI    020H+010H+020H+020H,A14
     794 00002c40     0bee          SUBI    020H+010H+020H+020H+020H+020H,A14
         00002c50     ff4f  
     795 00002c60     b3c8          MOVE    A14,*A8(ANIMFRM),L
         00002c70     0320  
     796 00002c80     0960          RETS
     797                    
     798 00002c90           ACSP_FREEZE
     799 00002c90     af0e          MOVB    *A8(ODT_GFREEZES),A14
         00002ca0     0740  
     800 00002cb0     0b4e          CMPI    MAX_FREEZES,A14
         00002cc0     fffc  
     801 00002cd0     c40f          JRLT    ACSP_F_GO                               ;BR=FREEZE DA PUCK
     802                    
     803 00002ce0     09c0          MOVI    FREEZE_PROB,A0
         00002cf0     0066  
     804 00002d00     0d5f          CALLA   RANDPER
         00002d10 00000000! 
     805 00002d30     c809          JRC     ACSP_F_GO                               ;BR=FREEZE MF
     806                    
     807 00002d40     0d5f          CALLA   GOALIE_PASS_PUCK
         00002d50 00000000! 
     808 00002d70     c805          JRC     ACSP_F_GO                               ;BR=NO PASS
     809 00002d80     18a0          MOVK    GS_PASSED,A0
     810 00002d90     0d5f          CALLA   GOALIE_SPEECH
         00002da0 00000000! 
     811 00002dc0     0960          RETS
     812                    
     813 00002dd0           ACSP_F_GO
     814 00002dd0     af0e          MOVB    *A8(ODT_GFREEZES),A14
         00002de0     0740  
     815 00002df0     102e          INC     A14
     816 00002e00     adc8          MOVB    A14,*A8(ODT_GFREEZES)
         00002e10     0740  
     817                    
     818 00002e20     57ce          CLR     A14
     819 00002e30     b3c8          MOVE    A14,*A8(ODT_GPOSSIRQ),L         ;RESET IRQ TIME OF POSSESSION
         00002e40     06e0  
     820                    
     821 00002e50     bb08          MOVE    *A8(OZVAL),*A8(ODT_GZPOSPOSS),L
         00002e60     0180  
         00002e70     0700  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   20

     822 00002e80     b706          MOVE    *A8(ODT_PBK),A6,L
         00002e90     0530  
     823 00002ea0     0d5f          CALLA   PUCK_FROZEN
         00002eb0 00000000! 
     824 00002ed0           ACSP_GETUP
     825 00002ed0     0d5f          CALLA   GETAFARG_LONG
         00002ee0 00000000! 
     826 00002f00     b208          MOVE    A0,*A8(ANIMFRM),L
         00002f10     0320  
     827                    
     828 00002f20     0960          RETS
     829                    
     830                    **************************************************************************
     831                    *                                                                        *
     832                    * A_FREEZE_PUCK                                                          *
     833                    *                                                                        *
     834                    * PASS:                                                                  *
     835                    * A8 = GOALIE OBJECT                                                     *
     836                    *                                                                        *
     837                    **************************************************************************
     838                    
     839 00002f30           A_FREEZE_PUCK
     840 00002f30     18c0          MOVK    GS_FROZEN,A0
     841 00002f40     0d5f          CALLA   GOALIE_SPEECH
         00002f50 00000000! 
     842                    
     843 00002f70     bb08          MOVE    *A8(OZVAL),*A8(ODT_GZPOSPOSS),L
         00002f80     0180  
         00002f90     0700  
     844 00002fa0     b706          MOVE    *A8(ODT_PBK),A6,L
         00002fb0     0530  
     845 00002fc0     c080          JAUC    PUCK_FROZEN
         00002fd0 00000000! 
     846                    
     847                    **************************************************************************
     848                    *                                                                        *
     849                    * A_NOPUCKCHECK                                                          *
     850                    * A_SETPUCKCHECK                                                         *
     851                    *                                                                        *
     852                    * PASS:                                                                  *
     853                    * A8 = GOALIE OBJECT                                                     *
     854                    *                                                                        *
     855                    **************************************************************************
     856                    
     857 00002ff0           A_NOPUCKCHECK
     858 00002ff0     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         00003000     0630  
     859 00003010     0b8e          ANDNI   M_PUCKCHECK,A14
         00003020 00000040  
     860 00003040     b1c8          MOVE    A14,*A8(ODT_GFLAGS)
         00003050     0630  
     861 00003060     0960          RETS
     862                    
     863 00003070           A_SETPUCKCHECK
     864 00003070     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   21

         00003080     0630  
     865 00003090     0bae          ORI     M_PUCKCHECK,A14
         000030a0 00000040  
     866 000030c0     b1c8          MOVE    A14,*A8(ODT_GFLAGS)
         000030d0     0630  
     867 000030e0     0960          RETS
     868                    
     869                    **************************************************************************
     870                    *                                                                        *
     871                    * A_GSCRIPT_DONE                                                         *
     872                    *                                                                        *
     873                    * PASS:                                                                  *
     874                    * A8 = GOALIE OBJECT                                                     *
     875                    *                                                                        *
     876                    **************************************************************************
     877                    
     878 000030f0           A_GSCRIPT_DONE
     879 000030f0     57ce          CLR     A14
     880 00003100     b1c8          MOVE    A14,*A8(ODT_GSAVETIME),W
         00003110     0640  
     881                    
     882 00003120     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         00003130     0630  
     883 00003140     0b8e          ANDNI   M_MISSSAVE|M_SAVEMADE|M_TMOVE|M_FREEZE,A14
         00003150 0000000f  
     884 00003170     0bae          ORI     M_PUCKCHECK,A14
         00003180 00000040  
     885 000031a0     b1c8          MOVE    A14,*A8(ODT_GFLAGS)
         000031b0     0630  
     886                    
     887 000031c0     b706          MOVE    *A8(ODT_PBK),A6,L                       ;PLAYER BLOCK
         000031d0     0530  
     888 000031e0     aec0          MOVB    *A6(POF_NUMBER),A0                      ;PLAYER NUMBER
         000031f0     0000  
     889 00003200     0d5f          CALLA   give_player_control
         00003210 00000000! 
     890                    
     891 00003230     b4ce          MOVE    *A6(POF_MODE),A14,W
         00003240     0210  
     892 00003250     0b4e          CMPI    PM_GHOLDING,A14
         00003260     fff0  
     893 00003270     ca03          JREQ    AGD_DONE                                ;BR=HOLDING THE PUCK
     894 00003280     5600          CLR     A0
     895 00003290     b006          MOVE    A0,*A6(POF_MODE),W
         000032a0     0210  
     896 000032b0           AGD_DONE
     897 000032b0     0960          RETS
     898                    
     899                    **************************************************************************
     900                    *                                                                        *
     901                    * A_CHECK_DEFLECT                                                        *
     902                    *                                                                        *
     903                    * PASS:                                                                  *
     904                    * A8 = GOALIE OBJECT                                                     *
     905                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   22

     906                    **************************************************************************
     907                    
     908 000032c0           A_CHECK_DEFLECT
     909 000032c0     05a4          MOVE    @PUCK_CONTROL,A4,W
         000032d0 00000000! 
     910                    ;       JANZ    A_GSCRIPT_DONE
     911                    ;       JRNZ    ACD_POKE
     912 000032f0     ca65          JRZ     ACD_P_ABORT                             ;BR=NOBODY HAS PUCK
     913                    
     914                    ;       MOVE    @PUCK_OBJECT,A9,L
     915                    ;       MOVE    *A9(ODT_VEL),A4,L
     916                    ;       CMPI    GSLOW_PUCK,A4
     917                    ;       JALE    A_GSCRIPT_DONE
     918                    ;
     919                    ;       CALLA   get_players_puck_point_o
     920                    ;       MOVE    A0,A2
     921                    ;       MOVE    A1,A3
     922                    ;;      MOVE    *A8(OXVEL),A14,L
     923                    ;;      ADD     A14,A2
     924                    ;;      MOVE    *A8(OZVEL),A14,L
     925                    ;;      ADD     A14,A3
     926                    ;
     927                    ;       MOVE    *A9(OXVAL),A0,L
     928                    ;       MOVE    *A9(OXVEL),A14,L
     929                    ;       ADD     A14,A0
     930                    ;       MOVE    *A9(OZVAL),A1,L
     931                    ;       MOVE    *A9(OZVEL),A14,L
     932                    ;       ADD     A14,A1
     933                    ;
     934                    ;       CALLA   find_dir_to_point_18            ;FROM GOALIE TO PUCK
     935                    ;       MOVE    *A8(ODT_PBK),A6,L
     936                    ;       MOVB    *A6(POF_DIRECTION),A14
     937                    ;       SUB     A14,A0
     938                    ;       JRZ     ACD_STAY                        ;BR=SAME DIRECTION
     939                    ;       ABS     A0
     940                    ;       SUBK    1,A0
     941                    ;       JRZ     ACD_STAY                        ;BR=ADJACENT DIRECTION
     942                    ;       SUBK    6,A0
     943                    ;       JRZ     ACD_STAY                        ;BR=8 TO 1 CASE
     944                    ;
     945                    ;       ;CHECK PUCK VELOCITY
     946                    ;       ;IF SLOW ENOUGH CATCH ON STICK
     947                    ;       ;IF TOO FAST DEFLECT TO CLOSER PLAYER
     948                    ;
     949                    ;       CMPI    [12,0],A4
     950                    ;       JRGT    ACD_DEFLECT                     ;BR=GOING TOO FAST TO CONTROL
     951                    ;       CALLA   A_GSCRIPT_DONE
     952                    ;;      JAUC    cpip_control
     953                    ;
     954                    ;       MOVE    @WAVEIRQS,A14,L
     955                    ;       MOVE    A14,*A8(ODT_GPOSSIRQ),L         ;IRQ TIME OF POSSESSION
     956                    ;       MOVE    *A8(OZVAL),*A8(ODT_GZPOSPOSS),L ;Z POSITION
     957                    ;
     958                    ;       JAUC    GET_PUCK_CONTROL
     959                    ;ACD_DEFLECT
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   23

     960                    ;       MOVE    @PUCK_MODE,A14,W
     961                    ;       CMPI    PUM_SCORE,A14
     962                    ;       JRGE    A_GSCRIPT_DONE                  ;BR=DON'T FUCK WITH IT
     963                    ;
     964                    ;       CLR     A14                             ;PUM_OPEN
     965                    ;       calla   set_safe_puck_mode_a14
     966                    ;
     967                    ;       CALLA   FIND_PLAYER_CLOSER_TO_GOALIE
     968                    ;       GBLOCK  A0,A5
     969                    ;       MOVE    A8,A7
     970                    ;       MOVE    *A5(POF_OBJECT),A8,L
     971                    ;       CALLA   get_players_puck_point_o
     972                    ;       MOVE    A7,A8
     973                    ;       CLR     A2                              ;Y POSITION
     974                    ;
     975                    ;       MOVE    *A9(ODT_VEL),A7,L
     976                    ;       MOVE    *A6(POF_S_SHOT),A14,L
     977                    ;       MOVE    *A14(PS_SH_SHOT_CHANGE),A14,L
     978                    ;       MOVE    A14,B6
     979                    ;       MOVE    *A6(POF_S_SHOT),A10,L
     980                    ;       MOVE    *A10(PS_SH_MAX_YVEL),A10,L
     981                    ;       CALLA   wrist_shot_sound
     982                    ;       JAUC    send_puck_to_point_xyz
     983                    ;ACD_STAY
     984                    ;       MOVE    *A8(ANIMFRM),A14,L              ;STAY AT THIS FRAME
     985                    ;       SUBI    020H+010H+020H,A14
     986                    ;       MOVE    A14,*A8(ANIMFRM),L
     987                    ;       RETS
     988 00003300           ACD_POKE
     989 00003300     b706          MOVE    *A8(ODT_PBK),A6,L
         00003310     0530  
     990 00003320     aec0          MOVB    *A6(POF_NUMBER),A0
         00003330     0000  
     991 00003340     49c0          CMP     A14,A0
     992 00003350     ca80          JAEQ    A_GSCRIPT_DONE
         00003360 000030f0' 
     993                    
     994 00003380     0d5f          calla   get_players_puck_point_o
         00003390 00000000! 
     995 000033b0     07ae          MOVE    @PUCK_OBJECT,A14,L              ;GET PUCK LOCATION
         000033c0 00000000! 
     996 000033e0     b7c2          MOVE    *A14(OXVAL),A2,L
         000033f0     0140  
     997 00003400     b7c3          MOVE    *A14(OZVAL),A3,L
         00003410     0180  
     998 00003420     0d5f          CALLA   find_dsquared_to_point_whole_a1
         00003430 00000000! 
     999 00003450     0b41          CMPI    0640H,A1                        ;0300H
         00003460     f9bf  
    1000 00003470     c74d          JRGT    ACD_P_ABORT
    1001                    
    1002                    ;       MOVE    @PUCK_MODE,A14,W
    1003                    ;       CMPI    PUM_SCORE,A14
    1004                    ;       JRGE    A_GSCRIPT_DONE                  ;BR=DON'T FUCK WITH IT
    1005                    
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   24

    1006 00003480     57ce          CLR     A14                             ;PUM_OPEN
    1007 00003490     0d5f          calla   set_safe_puck_mode_a14
         000034a0 00000000! 
    1008 000034c0     05c0          MOVE    @PUCK_CONTROL,@PUCK_LAST_CONTROL,W
         000034d0 00000000! 
         000034f0 00000000! 
    1009 00003510     57ce          CLR     A14
    1010 00003520     058e          MOVE    A14,@PUCK_INTENDED,W
         00003530 00000000! 
    1011 00003550     058e          MOVE    A14,@PUCK_CONTROL,W
         00003560 00000000! 
    1012 00003580     0d5f          CALLA   new_puck_control
         00003590 00000000! 
    1013                    
    1014 000035b0                   GBLOCK  A4,A4
    1015 000035f0     09ce          MOVI    60,A14
         00003600     003c  
    1016 00003610     adc4          MOVB    A14,*A4(POF_IGNORE_PUCK)
         00003620     0598  
    1017                    
    1018 00003630     0d5f          CALLA   FIND_PLAYER_CLOSER_TO_GOALIE
         00003640 00000000! 
    1019 00003660                   GBLOCK  A0,A5
    1020 000036b0     4d07          MOVE    A8,A7
    1021 000036c0     b6a8          MOVE    *A5(POF_OBJECT),A8,L
         000036d0     0280  
    1022                    
    1023 000036e0     b70e          MOVE    *A8(OXVAL),A14,L
         000036f0     0140  
    1024 00003700     038e          ABS     A14
    1025 00003710     0b6e          CMPI    RGHT_GOALLINE_X,A14
         00003720 fd4fffff  
    1026 00003740     c609          JRLE    ACD_GET_POINT                   ;BR=IN FRONT OF GOAL LINE
    1027                    
    1028 00003750     09e0          MOVI    TOP_SIDEBOARD_Z-1,A0
         00003760 02a6ffff  
    1029 00003780     0d5f          CALLA   RANDU
         00003790 00000000! 
    1030 000037b0     4c01          MOVE    A0,A1                           ;Z POSITION
    1031 000037c0     5600          CLR     A0                              ;X POSITION
    1032 000037d0     c003          JRUC    ACD_HIT
    1033 000037e0           ACD_GET_POINT
    1034 000037e0     0d5f          CALLA   get_players_puck_point_o
         000037f0 00000000! 
    1035 00003810           ACD_HIT
    1036 00003810     4ce8          MOVE    A7,A8
    1037 00003820     5642          CLR     A2                              ;Y POSITION
    1038 00003830     09e7          MOVI    [10,0],A7
         00003840 000a0000  
    1039 00003860     b6ce          MOVE    *A6(POF_S_SHOT),A14,L
         00003870     0140  
    1040 00003880     b7ce          MOVE    *A14(PS_SH_SHOT_CHANGE),A14,L
         00003890     00b0  
    1041 000038a0     4fc6          MOVE    A14,B6
    1042 000038b0     b6ca          MOVE    *A6(POF_S_SHOT),A10,L
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   25

         000038c0     0140  
    1043 000038d0     b74a          MOVE    *A10(PS_SH_MAX_YVEL),A10,L
         000038e0     0080  
    1044 000038f0     0d5f          CALLA   wrist_shot_sound
         00003900 00000000! 
    1045 00003920     c080          JAUC    send_puck_to_point_xyz
         00003930 00000000! 
    1046                    
    1047 00003950           ACD_P_ABORT
    1048 00003950     0960          RETS
    1049                    
    1050                    **************************************************************************
    1051                    *                                                                        *
    1052                    * A_POKE                                                                 *
    1053                    *                                                                        *
    1054                    * PASS:                                                                  *
    1055                    * A8 = GOALIE OBJECT                                                     *
    1056                    *                                                                        *
    1057                    **************************************************************************
    1058                    
    1059 00003960           A_POKE
    1060                    ;       CALLA   GETAFARG_WORD
    1061                    ;       CMPI    040H,A0
    1062                    ;       JRLT    AP_DONE
    1063                    ;       MOVE    *A8(ANIMFRM),A14,L
    1064                    ;       SUBI    (020H+010H+020H+010H)+(020H+010H+020H+010H+020H+020H),A14
    1065                    ;       MOVE    A14,*A8(ANIMFRM),L
    1066                    ;       RETS
    1067                    
    1068 00003960     05a4          MOVE    @PUCK_CONTROL,A4,W
         00003970 00000000! 
    1069 00003990     ca00          JRZ     AP_DONE                         ;BR=NOBODY HAS CONTROL
         000039a0     00dc  
    1070                    
    1071 000039b0     b706          MOVE    *A8(ODT_PBK),A6,L
         000039c0     0530  
    1072 000039d0     aec0          MOVB    *A6(POF_NUMBER),A0
         000039e0     0000  
    1073 000039f0     4880          CMP     A4,A0
    1074 00003a00     ca00          JREQ    AP_DONE
         00003a10     00d5  
    1075                    
    1076                    ;       calla   get_players_puck_point_o
    1077                    ;       MOVE    A0,A2
    1078                    ;       MOVE    A1,A3
    1079                    
    1080 00003a20     b702          MOVE    *A8(OXVAL),A2,L
         00003a30     0140  
    1081 00003a40     b703          MOVE    *A8(OZVAL),A3,L
         00003a50     0180  
    1082                    
    1083 00003a60     07a9          MOVE    @PUCK_OBJECT,A9,L               ;GET PUCK LOCATION
         00003a70 00000000! 
    1084 00003a90     b720          MOVE    *A9(OXVAL),A0,L
         00003aa0     0140  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   26

    1085 00003ab0     b721          MOVE    *A9(OZVAL),A1,L
         00003ac0     0180  
    1086                    ;       CALLA   find_dsquared_to_point_whole_a1
    1087                    ;       CALLA   find_dirdis_to_point
    1088                    
    1089 00003ad0     0d5f          CALLA   find_dist_quick2
         00003ae0 00000000! 
    1090                    
    1091 00003b00     0d5f          CALLA   GETAFARG_WORD
         00003b10 00000000! 
    1092 00003b30     2600          SLL     16,A0
    1093 00003b40     4801          CMP     A0,A1
    1094 00003b50     c700          JRGT    AP_DONE
         00003b60     00c0  
    1095                    
    1096                    ;       CMPI    020H,A1                         ;020H^2=0400H
    1097                    ;       JRLE    AP_REJECT
    1098                    ;
    1099                    ;       CALLA   dir_to_18
    1100                    ;       SUBK    4,A0
    1101                    ;       JRP     AP_CHECK_DIR
    1102                    ;       ADDK    8,A0
    1103                    ;AP_CHECK_DIR
    1104                    ;       MOVB    *A6(POF_DIRECTION),A14
    1105                    ;       CMP     A14,A0
    1106                    ;       JRNE    AP_DONE
    1107                    
    1108 00003b70           AP_REJECT
    1109                    ;PUCK CONTROL IS NON-ZERO!
    1110                    ;       MOVE    @PUCK_MODE,A14,W
    1111                    ;       CMPI    PUM_SCORE,A14
    1112                    ;;      JRGE    AP_DONE                         ;BR=DON'T FUCK WITH IT
    1113                    ;       JREQ    AP_DONE                         ;BR=DON'T FUCK WITH IT
    1114                    
    1115 00003b70     1840          MOVK    GS_POKECHECK,A0
    1116 00003b80     0d5f          CALLA   GOALIE_SPEECH
         00003b90 00000000! 
    1117                    
    1118 00003bb0     57ce          CLR     A14                             ;PUM_OPEN
    1119 00003bc0     0d5f          calla   set_safe_puck_mode_a14
         00003bd0 00000000! 
    1120 00003bf0     05c0          MOVE    @PUCK_CONTROL,@PUCK_LAST_CONTROL,W
         00003c00 00000000! 
         00003c20 00000000! 
    1121 00003c40     57ce          CLR     A14
    1122 00003c50     058e          MOVE    A14,@PUCK_INTENDED,W
         00003c60 00000000! 
    1123 00003c80     058e          MOVE    A14,@PUCK_CONTROL,W
         00003c90 00000000! 
    1124 00003cb0     0d5f          CALLA   new_puck_control
         00003cc0 00000000! 
    1125                    
    1126                    ;       MOVI    TOP_SIDEBOARD_Z-1,A0
    1127                    ;       CALLA   RANDU
    1128                    ;       MOVE    A0,A1                           ;Z POSITION
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   27

    1129                    ;       CLR     A0                              ;X POSITION
    1130                    ;       CLR     A2                              ;Y POSITION
    1131                    
    1132                    ;       MOVI    [10,0],A7
    1133                    ;       MOVE    *A6(POF_S_SHOT),A14,L
    1134                    ;       MOVE    *A14(PS_SH_SHOT_CHANGE),A14,L
    1135                    ;       MOVE    A14,B6
    1136                    ;       MOVE    *A6(POF_S_SHOT),A10,L
    1137                    ;       MOVE    *A10(PS_SH_MAX_YVEL),A10,L
    1138 00003ce0     0d5f          CALLA   wrist_shot_sound
         00003cf0 00000000! 
    1139                    ;       JAUC    send_puck_to_point_xyz
    1140                    
    1141 00003d10                   GBLOCK  A4,A4
    1142 00003d50     09ce          MOVI    60,A14
         00003d60     003c  
    1143 00003d70     adc4          MOVB    A14,*A4(POF_IGNORE_PUCK)
         00003d80     0598  
    1144                    
    1145 00003d90     b72e          MOVE    *A9(ODT_VEL),A14,L
         00003da0     04d0  
    1146 00003db0     0b6e          CMPI    [7,0],A14
         00003dc0 fff8ffff  
    1147 00003de0     c461          JRLT    AP_REDIR                        ;BR=TOO SLOW, NO FLY!
    1148                    
    1149                    ;       JRUC    ATU_GO
    1150                    
    1151 00003df0     aec0          MOVB    *A6(POF_DIRECTION),A0
         00003e00     0390  
    1152 00003e10     0d5f          CALLA   dir_to_degrees
         00003e20 00000000! 
    1153 00003e40     4c01          MOVE    A0,A1
    1154 00003e50     0b20          ADDI    XD1800+XD0225,A0
         00003e60 00ca8000  
    1155 00003e80     0b21          ADDI    XD1800-XD0225,A1
         00003e90 009d8000  
    1156 00003eb0     0d5f          CALLA   RANGERND
         00003ec0 00000000! 
    1157 00003ee0     4c02          MOVE    A0,A2
    1158                    
    1159 00003ef0     09c0          MOVI    1024,A0                         ;DECIDE WHERE PUCK FLIES
         00003f00     0400  
    1160 00003f10     0d5f          CALLA   RAND0
         00003f20 00000000! 
    1161 00003f40     0b40          CMPI    410,A0                          ;60% FLY BEHIND NET
         00003f50     fe65  
    1162 00003f60     c718          JRGT    AP_FLY_BEHIND_NET               ;BR=FLY BEHIND NET
    1163 00003f70     4c03          MOVE    A0,A3
    1164                    
    1165 00003f80     09e0          MOVI    010000H,A0
         00003f90 00010000  
    1166 00003fb0     09e1          MOVI    08000H,A1
         00003fc0 00008000  
    1167 00003fe0     09e5          MOVI    -050000H,A5
         00003ff0 fffb0000  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   28

    1168 00004010     09e6          MOVI    -068000H,A6
         00004020 fff98000  
    1169                    
    1170 00004040     0d5f          CALLA   IS_A8_IN_CREASE
         00004050 00000000! 
    1171 00004070     c803          JRC     AP_FLY_IN_FRONT                 ;BR=INSIDE DA CREASE
    1172                    
    1173 00004080     0b43          CMPI    205,A3                          ;50% (OF 60%) FLY BEHIND GOALIE
         00004090     ff32  
    1174 000040a0     c710          JRGT    AP_CHOOSE_VEL                   ;BR=FLY BEHIND GOALIE
    1175 000040b0           AP_FLY_IN_FRONT
    1176 000040b0     0b22          ADDI    XD1800,A2                       ;FLY IN FRONT OF GOALIE
         000040c0 00b40000  
    1177 000040e0     c00c          JRUC    AP_CHOOSE_VEL
    1178                    
    1179 000040f0           AP_FLY_BEHIND_NET
    1180 000040f0     09e0          MOVI    060000H,A0
         00004100 00060000  
    1181 00004120     09e1          MOVI    050000H,A1
         00004130 00050000  
    1182 00004150     09e5          MOVI    -060000H,A5
         00004160 fffa0000  
    1183 00004180     09e6          MOVI    -070000H,A6
         00004190 fff90000  
    1184 000041b0           AP_CHOOSE_VEL
    1185 000041b0     0d5f          CALLA   RANGERND
         000041c0 00000000! 
    1186 000041e0     4c01          MOVE    A0,A1
    1187 000041f0                   THETA_N A2
    1188 000042d0     4c40          MOVE    A2,A0
    1189 000042e0     07a8          MOVE    @PUCK_OBJECT,A8,L
         000042f0 00000000! 
    1190 00004310     0d5f          CALLA   set_obj_to_polar
         00004320 00000000! 
    1191                    
    1192 00004340     4ca0          MOVE    A5,A0
    1193 00004350     4cc1          MOVE    A6,A1
    1194 00004360     0d5f          CALLA   RANGERND
         00004370 00000000! 
    1195 00004390     b208          MOVE    A0,*A8(OYVEL),L
         000043a0     0120  
    1196                    
    1197 000043b0     09ce          MOVI    NORM_GRAVITY,A14
         000043c0     3000  
    1198 000043d0     b1c8          MOVE    A14,*A8(OYACCEL),W
         000043e0     02f0  
    1199 000043f0     0960          RETS
    1200                    
    1201 00004400           AP_REDIR
    1202 00004400     aec0          MOVB    *A6(POF_DIRECTION),A0
         00004410     0390  
    1203 00004420     4c02          MOVE    A0,A2
    1204 00004430     0d5f          CALLA   dir_to_degrees
         00004440 00000000! 
    1205 00004460     4c01          MOVE    A0,A1
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   29

    1206                    
    1207 00004470     0b82          ANDI    3,A2
         00004480 fffffffc  
    1208 000044a0     1462          SUBK    3,A2
    1209 000044b0     ca10          JRZ     AP_DIR3_RANGE                   ;BR=DIRECTION 3 OR 7
    1210 000044c0     1022          INC     A2
    1211 000044d0     cb07          JRNZ    AP_DIR4_RANGE                   ;BR=DIRECTION 4 OR 8
    1212                    
    1213 000044e0     0b20          ADDI    XD0100,A0                       ;DIRECTION 2 OR 6
         000044f0 000a0000  
    1214 00004510     0d01          SUBI    XD0600,A1
         00004520 ffc3ffff  
    1215 00004540     c00d          JRUC    AP_GET_DIR
    1216 00004550           AP_DIR4_RANGE
    1217 00004550     0b20          ADDI    XD0600,A0
         00004560 003c0000  
    1218 00004580     0d01          SUBI    XD0100,A1
         00004590 fff5ffff  
    1219 000045b0     c006          JRUC    AP_GET_DIR
    1220 000045c0           AP_DIR3_RANGE
    1221 000045c0     0b20          ADDI    XD0350,A0
         000045d0 00230000  
    1222 000045f0     0d01          SUBI    XD0350,A1
         00004600 ffdcffff  
    1223 00004620           AP_GET_DIR
    1224 00004620     0d5f          CALLA   RANGERND
         00004630 00000000! 
    1225 00004650     4c02          MOVE    A0,A2
    1226                    
    1227 00004660     09e0          MOVI    [16,0],A0
         00004670 00100000  
    1228 00004690     09e1          MOVI    [12,0],A1
         000046a0 000c0000  
    1229 000046c0     0d5f          CALLA   RANGERND
         000046d0 00000000! 
    1230                    
    1231 000046f0     4c40          MOVE    A2,A0
    1232 00004700     4d28          MOVE    A9,A8
    1233 00004710     0d5f          CALLA   set_obj_to_polar
         00004720 00000000! 
    1234                    
    1235 00004740     c080          JAUC    puck_slide_sound
         00004750 00000000! 
    1236 00004770           AP_DONE
    1237 00004770     0960          RETS
    1238                    
    1239                    **************************************************************************
    1240                    *                                                                        *
    1241                    * COUNT_SAVE                                                             *
    1242                    *                                                                        *
    1243                    * PASS:                                                                  *
    1244                    * A2 = X IMPACT POINT WITH OFFSET                                        *
    1245                    * A3 = Z IMPACT POINT WITH OFFSET                                        *
    1246                    * A6 = PLAYER BLOCK                                                      *
    1247                    * A8 = GOALIE OBJECT                                                     *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   30

    1248                    * A9 = PUCK OBJECT                                                       *
    1249                    *                                                                        *
    1250                    **************************************************************************
    1251                    
    1252 00004780           COUNT_SAVE
    1253 00004780     098f          MMTM    SP,A1,A2,A3
         00004790     7000  
    1254                    
    1255 000047a0     b4ce          MOVE    *A6(POF_SAVES),A14,W
         000047b0     0840  
    1256 000047c0     102e          INC     A14
    1257 000047d0     b1c6          MOVE    A14,*A6(POF_SAVES),W
         000047e0     0840  
    1258                    
    1259 000047f0     05a0          MOVE    @GAME_STATE,A0,W
         00004800 00000000! 
    1260 00004820     0b40          CMPI    INAMODE,A0
         00004830     ffcf  
    1261 00004840     ca0b          JREQ    CS_FIRE                         ;BR=IN ATTRACT MODE
    1262 00004850     05a0          MOVE    @PUCK_MODE,A0,W
         00004860 00000000! 
    1263 00004880     0b40          CMPI    PUM_FACEOFF,A0
         00004890     ff9b  
    1264 000048a0     c905          JRHS    CS_FIRE                         ;BR=FACEOFF OR END OF PERIOD
    1265 000048b0     09c0          MOVI    AUD_GOALIE_SAVES,A0
         000048c0     0027  
    1266 000048d0     0d5f          CALLA   AUD1
         000048e0 00000000! 
    1267 00004900           CS_FIRE
    1268                    
    1269 00004900     05ae          MOVE    @show_puck_on_fire,A14,W
         00004910 00000000! 
    1270 00004930     ca5a          JRZ     CS_SPEECH                       ;BR=PUCK NOT ON FIRE
    1271                    
    1272 00004940     098f          MMTM    SP,A3,A4,A5,A7,A8,A10,A11
         00004950     1db0  
    1273                    
    1274 00004960     aec4          MOVB    *A6(POF_DIRECTION),A4
         00004970     0390  
    1275                    
    1276 00004980     b703          MOVE    *A8(OZVAL),A3,L
         00004990     0180  
    1277 000049a0     0be3          SUBI    01000H,A3
         000049b0     efff  
    1278                    
    1279 000049c0     b725          MOVE    *A9(OXVEL),A5,L
         000049d0     0100  
    1280 000049e0     0385          ABS     A5
    1281 000049f0     2f85          SRL     4,A5
    1282 00004a00     4ca7          MOVE    A5,A7
    1283 00004a10     03a7          NEG     A7
    1284                    
    1285 00004a20     b72a          MOVE    *A9(OZVEL),A10,L
         00004a30     00e0  
    1286 00004a40     038a          ABS     A10
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   31

    1287 00004a50     2f8a          SRL     4,A10
    1288 00004a60     4d4b          MOVE    A10,A11
    1289 00004a70     03ab          NEG     A11
    1290                    
    1291 00004a80     b521          MOVE    *A9(ODT_VEL+010H),A1,W
         00004a90     04e0  
    1292                    
    1293 00004aa0     0b41          CMPI    ROUGH_PUCK_MAX >> 16,A1
         00004ab0     ffdc  
    1294 00004ac0     c603          JRLE    CS_GET_FIRE_COUNT               ;BR=UNDER MAXIMUM SPEED
    1295 00004ad0     09c4          MOVI    15,A4                           ;MAXIMUM FIRE COUNT
         00004ae0     000f  
    1296 00004af0     c008          JRUC    CS_FIRE_LUPE
    1297                    
    1298 00004b00           CS_GET_FIRE_COUNT
    1299 00004b00     1864          MOVK    3,A4
    1300                    
    1301 00004b10     15c1          SUBK    0EH,A1
    1302 00004b20     ce05          JRN     CS_FIRE_LUPE                    ;BR=UNDER MINIMUM SPEED
    1303                    
    1304 00004b30     2481          SLL     4,A1
    1305 00004b40     0b21          ADDI    FIRE_COUNT_TABLE,A1
         00004b50 00005420' 
    1306 00004b70     8424          MOVE    *A1,A4,W
    1307                    
    1308 00004b80           CS_FIRE_LUPE
    1309 00004b80     09f0          MOVI    SAVE_FIRE_INIT,B0
         00004b90 00000000! 
    1310 00004bb0     0d5f          CALLA   EASYMAKE
         00004bc0 00000000! 
    1311 00004be0     ca2d          JRZ     CS_FIRE_DONE                    ;BR=CAN'T MAKE IT
    1312                    
    1313 00004bf0     bb28          MOVE    *A9(OYVAL),*A8(OYVAL),L
         00004c00     0160  
         00004c10     0160  
    1314                    
    1315 00004c20     b248          MOVE    A2,*A8(OXVAL),L
         00004c30     0140  
    1316                    ;       DEC     A3
    1317 00004c40     b268          MOVE    A3,*A8(OZVAL),L
         00004c50     0180  
    1318                    
    1319 00004c60     0b44          CMPI    1,A4
         00004c70     fffe  
    1320 00004c80     ca18          JREQ    CS_FIRE_ANIM
    1321                    
    1322 00004c90     4ca0          MOVE    A5,A0
    1323 00004ca0     4ce1          MOVE    A7,A1
    1324 00004cb0     0d5f          CALLA   RANGERND
         00004cc0 00000000! 
    1325 00004ce0     b208          MOVE    A0,*A8(OXVEL),L
         00004cf0     0100  
    1326                    
    1327 00004d00     09e0          MOVI    08000H,A0
         00004d10 00008000  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   32

    1328 00004d30     09c1          MOVI    -08000H,A1
         00004d40     8000  
    1329 00004d50     0d5f          CALLA   RANGERND
         00004d60 00000000! 
    1330 00004d80     b208          MOVE    A0,*A8(OYVEL),L
         00004d90     0120  
    1331                    
    1332 00004da0     4d40          MOVE    A10,A0
    1333 00004db0     4d61          MOVE    A11,A1
    1334 00004dc0     0d5f          CALLA   RANGERND
         00004dd0 00000000! 
    1335 00004df0     b208          MOVE    A0,*A8(OZVEL),L
         00004e00     00e0  
    1336                    
    1337 00004e10           CS_FIRE_ANIM
    1338 00004e10     09e1          MOVI    SAVE_FIRE_ANIM,A1
         00004e20 00000000! 
    1339 00004e40     0d5f          CALLA   STRT_ANIM
         00004e50 00000000! 
    1340                    
    1341 00004e70     0d5f          CALLA   INSERT_OBJ
         00004e80 00000000! 
    1342 00004ea0     0d84          DSJ     A4,CS_FIRE_LUPE
         00004eb0     ffcc  
    1343 00004ec0           CS_FIRE_DONE
    1344 00004ec0     09af          MMFM    SP,A3,A4,A5,A7,A8,A10,A11
         00004ed0     0db8  
    1345                    
    1346 00004ee0           CS_SPEECH
    1347 00004ee0     09e1          MOVI    SAVE_SPEECH_TABLE-020H-010H,A1
         00004ef0 00005550' 
    1348 00004f10     b702          MOVE    *A8(ODT_GSAVE),A2,L
         00004f20     0650  
    1349 00004f30           CS_NEXT
    1350 00004f30     0b01          ADDI    020H+010H,A1
         00004f40     0030  
    1351 00004f50     862e          MOVE    *A1,A14,L
    1352 00004f60     ca02          JRZ     CS_GET_SPEECH_INDEX             ;BR=SAVE NOT IN LIST
    1353 00004f70     484e          CMP     A2,A14
    1354 00004f80     cbfa          JRNE    CS_NEXT                         ;BR=NO MATCH
    1355 00004f90           CS_GET_SPEECH_INDEX
    1356 00004f90     b421          MOVE    *A1(020H),A1,W                  ;GET SPEECH TYPE INDEX
         00004fa0     0020  
    1357                    
    1358                            ;SPEECH TYPE INDEX READY IN A1
    1359                    
    1360 00004fb0     0d5f          calla   do_goalie_phrase
         00004fc0 00000000! 
    1361                    
    1362 00004fe0     0d5f          CALLA   record_puck_a6
         00004ff0 00000000! 
    1363 00005010     07c0          move    @WAVEIRQS,@PUCK_NEWDIR_TIME,L
         00005020 00000000! 
         00005040 00000000! 
    1364 00005060     57ce          CLR     A14                             ;PUM_OPEN
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   33

    1365 00005070     0d5f          calla   set_safe_puck_mode_a14
         00005080 00000000! 
    1366                    
    1367 000050a0     05a1          MOVE    @PUCK_CONTROL,A1,W
         000050b0 00000000! 
    1368 000050d0     ca16          JRZ     CS_GO                           ;BR=NOBODY CONTROLS
    1369                    
    1370 000050e0     4c22          MOVE    A1,A2
    1371 000050f0                   GBLOCK  A2,A2
    1372 00005130     09ce          MOVI    60,A14
         00005140     003c  
    1373 00005150     adc2          MOVB    A14,*A2(POF_IGNORE_PUCK)
         00005160     0598  
    1374                    
    1375 00005170     0581          MOVE    A1,@PUCK_LAST_CONTROL,W
         00005180 00000000! 
    1376 000051a0     57ce          CLR     A14
    1377 000051b0     058e          MOVE    A14,@PUCK_INTENDED,W
         000051c0 00000000! 
    1378 000051e0     058e          MOVE    A14,@PUCK_CONTROL,W
         000051f0 00000000! 
    1379 00005210     0d5f          CALLA   new_puck_control
         00005220 00000000! 
    1380 00005240           CS_GO
    1381 00005240     b50e          MOVE    *A8(ODT_GFLAGS),A14,W           ;FLAG SAVE SUCCESSFUL
         00005250     0630  
    1382 00005260     0bae          ORI     M_SAVEMADE,A14
         00005270 00000004  
    1383 00005290     b1c8          MOVE    A14,*A8(ODT_GFLAGS),W
         000052a0     0630  
    1384                    
    1385 000052b0     b70e          MOVE    *A8(ODT_GLASTSIRQ),A14,L
         000052c0     06b0  
    1386 000052d0     07a1          MOVE    @WAVEIRQS,A1,L
         000052e0 00000000! 
    1387                    
    1388 00005300     b502          MOVE    *A8(ODT_GTSAVES),A2,W
         00005310     06d0  
    1389 00005320     ca04          JRZ     CS_COUNT
    1390                    
    1391 00005330     442e          SUB     A1,A14
    1392 00005340     0b4e          CMPI    -MAX_SAVE_TTIME,A14
         00005350     0077  
    1393 00005360     c408          JRLT    CS_DONE
    1394 00005370           CS_COUNT
    1395 00005370     b228          MOVE    A1,*A8(ODT_GLASTSIRQ),L
         00005380     06b0  
    1396                    
    1397 00005390     0b42          CMPI    4,A2
         000053a0     fffb  
    1398 000053b0     c503          JRGE    CS_DONE                         ;BR=DON'T GO OVER
    1399                    
    1400 000053c0     1022          INC     A2
    1401 000053d0     b048          MOVE    A2,*A8(ODT_GTSAVES),W
         000053e0     06d0  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   34

    1402 000053f0           CS_DONE
    1403 000053f0     09af          MMFM    SP,A1,A2,A3
         00005400     000e  
    1404 00005410     0960          RETS
    1405                    
    1406 00005420           FIRE_COUNT_TABLE
    1407                            ;       14  15  16  17  18  19  20  21  22  23  24
    1408 00005420     0003          .WORD    3,  3,  5,  5,  5,  7,  7,  7,  9,  9,  9
    1409                            ;
    1410                            ;       25  26  27  28  29  30  31  32  33  34  35
    1411 000054d0     000b          .WORD   11, 11, 11, 13, 13, 13, 15, 15, 15, 15, 15
    1412                    
    1413                    
    1414 00005580           SAVE_SPEECH_TABLE
    1415 00005580                   LW      SET_GFULLBUTT_SCRIPT,GS_BUTTERFLY
    1416 000055b0                   LW      SET_GBUTTERFLY_SCRIPT,GS_BUTTERFLY
    1417 000055e0                   LW      SET_GLPADST_SCRIPT,GS_PADSTACK
    1418 00005610                   LW      SET_GQLPADST_SCRIPT,GS_PADSTACK
    1419 00005640                   LW      SET_GRPADST_SCRIPT,GS_PADSTACK
    1420 00005670                   LW      SET_GQRPADST_SCRIPT,GS_PADSTACK
    1421 000056a0                   LW      SET_GGLOVE_SCRIPT,GS_GLOVE
    1422 000056d0                   LW      SET_GQGLOVE_SCRIPT,GS_GLOVE
    1423 00005700                   LW      SET_GQHGLOVE_SCRIPT,GS_GLOVE
    1424 00005730                   LW      SET_GHGLOVE_SCRIPT,GS_GLOVE
    1425 00005760                   LW      SET_GBLOCKER_SCRIPT,GS_BLOCKER
    1426 00005790                   LW      SET_GQBLOCKER_SCRIPT,GS_BLOCKER
    1427 000057c0                   LW      SET_GQHBLOCKER_SCRIPT,GS_BLOCKER
    1428 000057f0                   LW      SET_GBODY_SCRIPT,GS_STOMACH
    1429 00005820                   LW      SET_GSTICK_SCRIPT,GS_STICK
    1430 00005850                   LW      SET_GSSKATE_SCRIPT,GS_SKATE
    1431 00005880                   LW      SET_GQSSKATE_SCRIPT,GS_SKATE
    1432 000058b0                   LW      SET_GGSKATE_SCRIPT,GS_SKATE
    1433 000058e0                   LW      SET_GQGSKATE_SCRIPT,GS_SKATE
    1434 00005910                   LW      0,GS_SAVE
    1435                    
    1436                    **************************************************************************
    1437                    *                                                                        *
    1438                    * CHECK_PUCK_IMPACT                                                      *
    1439                    *                                                                        *
    1440                    * PASS:                                                                  *
    1441                    * A0 = X IMPACT OFFSET                                                   *
    1442                    * A1 = Z IMPACT OFFSET                                                   *
    1443                    * A6 = PLAYER BLOCK                                                      *
    1444                    * A8 = GOALIE OBJECT                                                     *
    1445                    * A9 = PUCK OBJECT                                                       *
    1446                    *                                                                        *
    1447                    * RETURN:                                                                *
    1448                    * Z = NO IMPACT, NZ = IMPACT                                             *
    1449                    * A2 = X IMPACT POINT WITH OFFSET                                        *
    1450                    * A3 = Z IMPACT POINT WITH OFFSET                                        *
    1451                    * TRASHES: A0, A1, A2, A4, A5                                            *
    1452                    *                                                                        *
    1453                    **************************************************************************
    1454                    
    1455 00005940           CHECK_PUCK_IMPACT
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   35

    1456 00005940     aec5          MOVB    *A6(POF_DIRECTION),A5
         00005950     0390  
    1457 00005960     0b85          ANDI    3,A5                    ;DIRS: 010B=2(6), 011B=3(7), 0B=4(8)
         00005970 fffffffc  
    1458                    
    1459 00005990     b702          MOVE    *A8(ODT_GXIMPACT),A2,L
         000059a0     0690  
    1460 000059b0     ce06          JRN     CPI_ADDXOFF                     ;BR=ON THE LEFT
    1461 000059c0     03a0          NEG     A0
    1462 000059d0     1fe5          BTST    0,A5
    1463 000059e0     cb03          JRNZ    CPI_ADDXOFF                     ;BR=DIR 3 OR 7
    1464 000059f0     0bc5          XORI    2,A5                            ;SWAP DIRS 6 AND 8
         00005a00 00000002  
    1465 00005a20           CPI_ADDXOFF
    1466 00005a20     4002          ADD     A0,A2
    1467 00005a30     4c44          MOVE    A2,A4
    1468                    
    1469 00005a40     b720          MOVE    *A9(OXVAL),A0,L
         00005a50     0140  
    1470 00005a60     b72e          MOVE    *A9(OXVEL),A14,L
         00005a70     0100  
    1471 00005a80     41c0          ADD     A14,A0
    1472                    
    1473 00005a90     b703          MOVE    *A8(ODT_GZIMPACT),A3,L
         00005aa0     0670  
    1474                    
    1475 00005ab0     1465          SUBK    3,A5                    ;NEW DIRS: 011B=2(8), 0B=3(7), 01B=4(6)
    1476 00005ac0     ca03          JRZ     CPI_ADDZOFF                     ;BR=DIR 3 OR 7
    1477 00005ad0     1fc5          BTST    1,A5
    1478 00005ae0     cb01          JRNZ    CPI_ADDZOFF                     ;BR=DIR 2 OR 8
    1479 00005af0     03a1          NEG     A1                              ;DIR 4 OR 6
    1480 00005b00           CPI_ADDZOFF
    1481 00005b00     4423          SUB     A1,A3
    1482                    
    1483 00005b10     4fc1          MOVE    A14,B1
    1484 00005b20     0391          ABS     B1
    1485 00005b30     4f29          MOVE    A9,B9
    1486 00005b40     b730          MOVE    *B9(OZVEL),B0,L
         00005b50     00e0  
    1487 00005b60     0390          ABS     B0
    1488 00005b70     4830          CMP     B1,B0
    1489 00005b80     c70a          JRGT    CPI_CHECK_Z                     ;BR=Z VELOCITY GREATER THAN X
    1490                    
    1491 00005b90     4dce          MOVE    A14,A14
    1492                    ;       JRZ     CPI_CHECK_Z                     ;BR=AIN'T MOVIN' IN X
    1493 00005ba0     ce04          JRN     CPI_GOIN_LEFT                   ;BR=PUCK HEADIN' TO THE LEFT
    1494                    
    1495 00005bb0     4840          CMP     A2,A0
    1496 00005bc0     c515          JRGE    CPI_IMPACT                      ;BR=IMPACT ON X
    1497 00005bd0     57ce          CLR     A14                             ;FLAG NO IMPACT
    1498 00005be0     0960          RETS
    1499 00005bf0           CPI_GOIN_LEFT
    1500 00005bf0     4840          CMP     A2,A0
    1501 00005c00     c611          JRLE    CPI_IMPACT                      ;BR=IMPACT ON X
    1502 00005c10     57ce          CLR     A14                             ;FLAG NO IMPACT
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   36

    1503 00005c20     0960          RETS
    1504                    
    1505 00005c30           CPI_CHECK_Z
    1506 00005c30     b720          MOVE    *A9(OZVAL),A0,L
         00005c40     0180  
    1507 00005c50     b72e          MOVE    *A9(OZVEL),A14,L
         00005c60     00e0  
    1508 00005c70     41c0          ADD     A14,A0
    1509                    
    1510                    ;       BTST    1,A5
    1511                    ;       JRNZ    CPI_2OR8                        ;BR=DIR 2 OR 8
    1512                    
    1513 00005c80     4dce          MOVE    A14,A14
    1514 00005c90     cf04          JRNN    CPI_GOIN_AWAY                   ;BR=PUCK HEADIN' AWAY
    1515                    
    1516 00005ca0     4860          CMP     A3,A0
    1517 00005cb0     c606          JRLE    CPI_IMPACT                      ;BR=IMPACT ON Z
    1518 00005cc0     57ce          CLR     A14                             ;FLAG NO IMPACT
    1519 00005cd0     0960          RETS
    1520                    ;CPI_2OR8
    1521 00005ce0           CPI_GOIN_AWAY
    1522 00005ce0     4860          CMP     A3,A0
    1523 00005cf0     c502          JRGE    CPI_IMPACT                      ;BR=IMPACT ON Z
    1524 00005d00           CPI_NOPACT
    1525 00005d00     57ce          CLR     A14                             ;FLAG NO IMPACT
    1526 00005d10     0960          RETS
    1527 00005d20           CPI_IMPACT
    1528 00005d20     4c82          MOVE    A4,A2                           ;ALSO CLRS Z (FLAG IMPACT)
    1529 00005d30     0960          RETS
    1530                    
    1531                    **************************************************************************
    1532                    *                                                                        *
    1533                    * A_CHECK_BUTTERFLY                                                      *
    1534                    *                                                                        *
    1535                    * PASS:                                                                  *
    1536                    * A8 = GOALIE OBJECT                                                     *
    1537                    *                                                                        *
    1538                    **************************************************************************
    1539                    
    1540 00005d40           A_CHECK_BUTTERFLY
    1541 00005d40     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         00005d50     0630  
    1542 00005d60     0b8e          ANDI    M_SAVEMADE|M_MISSSAVE,A14
         00005d70 fffffff3  
    1543 00005d90     cb29          JRNZ    ACBF_DONE                       ;BR=DON'T SAVE
    1544                    
    1545 00005da0     05a0          MOVE    @PUCK_CONTROL,A0,W
         00005db0 00000000! 
    1546                    ;       JRNZ    ACBF_DONE                       ;BR=SOMEONE GOT THE PUCK
    1547 00005dd0     ca09          JRZ     ACBF_CHECK_MODE                 ;BR=NOBODY HAS CONTROL
    1548                    
    1549 00005de0                   GBLOCK  A0,A0
    1550 00005e20     b40e          MOVE    *A0(POF_MODE),A14,W
         00005e30     0210  
    1551 00005e40     15ae          SUBK    PM_ONETIME,A14
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   37

    1552 00005e50     cb1d          JRNZ    ACBF_DONE                       ;BR=NOT THE ONE TIMER CASE
    1553 00005e60     c006          JRUC    ACBF_GO
    1554 00005e70           ACBF_CHECK_MODE
    1555 00005e70     05ae          MOVE    @PUCK_MODE,A14,W
         00005e80 00000000! 
    1556 00005ea0     0b4e          CMPI    PUM_SCORE,A14
         00005eb0     ff9c  
    1557                    ;       JRGE    ACBF_DONE                       ;BR=GOAL JUST GET UP
    1558 00005ec0     ca16          JREQ    ACBF_DONE                       ;BR=GOAL JUST GET UP
    1559 00005ed0           ACBF_GO
    1560 00005ed0     07a9          MOVE    @PUCK_OBJECT,A9,L
         00005ee0 00000000! 
    1561 00005f00     b72e          MOVE    *A9(ODT_VEL),A14,L
         00005f10     04d0  
    1562 00005f20     ca10          JRZ     ACBF_DONE                       ;BR=PUCK STOPPED
    1563                    
    1564 00005f30     b720          MOVE    *A9(OXVEL),A0,L
         00005f40     0100  
    1565 00005f50     b706          MOVE    *A8(ODT_PBK),A6,L
         00005f60     0530  
    1566 00005f70     aece          MOVB    *A6(POF_NUMBER),A14
         00005f80     0000  
    1567 00005f90     148e          SUBK    4,A14
    1568 00005fa0     ca01          JRZ     ACBF_CHECK_PUD                  ;BR=PUCK X DIRECTION OKAY
    1569 00005fb0     03a0          NEG     A0
    1570 00005fc0           ACBF_CHECK_PUD
    1571 00005fc0     4c00          MOVE    A0,A0
    1572 00005fd0     c105          JRP     ACBF_DONE                       ;BR=PUCK GOING AWAY FROM GOAL
    1573                    
    1574                            .if     1
    1575                    
    1576                    ;       MOVI    0200000H,A0
    1577                    ;       CLR     A1
    1578                    
    1579                    ;       MOVI    016A09EH,A0
    1580                    ;       MOVE    A0,A1
    1581                    
    1582 00005fe0     5600          CLR     A0
    1583 00005ff0     4c01          MOVE    A0,A1
    1584 00006000     0d3f          CALLR   CHECK_PUCK_IMPACT
         00006010     ff92  
    1585 00006020     cb6a          JRNZ    ACGU_SAVE                       ;BR=PUCK COLLISION
    1586                    
    1587                            .else
    1588                    
    1589                            MOVB    *A6(POF_DIRECTION),A5
    1590                    
    1591                    ;       MOVE    *A8(OXVAL),A2,L
    1592                    ;       MOVE    *A8(OZVAL),A3,L
    1593                    
    1594                            MOVE    *A8(ODT_GXIMPACT),A2,L          ;PUCK AT IMPACT POINT
    1595                            MOVE    *A8(ODT_GZIMPACT),A3,L
    1596                    
    1597                            MOVE    *A9(OXVAL),A0,L
    1598                            MOVE    *A9(OXVEL),A14,L
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   38

    1599                            ADD     A14,A0
    1600                            MOVE    *A9(OZVAL),A1,L
    1601                            MOVE    *A9(OZVEL),A14,L
    1602                            ADD     A14,A1
    1603                            CALLA   find_dir_to_point_18            ;FROM GOALIE TO PUCK
    1604                            SUB     A5,A0
    1605                            JRZ     ACBF_DONE                       ;BR=SAME DIRECTION
    1606                            ABS     A0
    1607                            SUBK    1,A0
    1608                            JRZ     ACBF_DONE                       ;BR=ADJACENT DIRECTION
    1609                            SUBK    6,A0
    1610                            JRZ     ACBF_DONE                       ;BR=8 TO 1 CASE
    1611                    
    1612                            JRUC    ACGU_SAVE
    1613                    
    1614                            .endif
    1615                    
    1616 00006030           ACBF_DONE
    1617 00006030     0960          RETS
    1618                    
    1619                    **************************************************************************
    1620                    *                                                                        *
    1621                    * A_CHECK_GETUP                                                          *
    1622                    *                                                                        *
    1623                    * PASS:                                                                  *
    1624                    * A8 = GOALIE OBJECT                                                     *
    1625                    *                                                                        *
    1626                    **************************************************************************
    1627                    
    1628 00006040           A_CHECK_GETUP
    1629 00006040     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         00006050     0630  
    1630 00006060     1fae          BTST    B_SAVEMADE,A14
    1631 00006070     cb00          JRNZ    ACGU_GETUP                      ;BR=ALREADY SAVED
         00006080     00c5  
    1632                    
    1633 00006090     1f8e          BTST    B_MISSSAVE,A14
    1634 000060a0     ca23          JRZ     ACGU_CHECK_CTRL                 ;BR=SAVE
    1635                    
    1636 000060b0     05ae          MOVE    @PUCK_CONTROL,A14,W
         000060c0 00000000! 
    1637 000060e0     cb00          JRNZ    ACGU_GETUP                      ;BR=SOMEBODY GOT DA PUCK
         000060f0     00be  
    1638                    
    1639 00006100     b700          MOVE    *A8(ODT_GCOMPTIME),A0,L         ;TIME OF ANIMATION START
         00006110     0720  
    1640 00006120     07ae          MOVE    @WAVEIRQS,A14,L
         00006130 00000000! 
    1641 00006150     440e          SUB     A0,A14
    1642 00006160     0bee          SUBI    30,A14
         00006170     ffe1  
    1643 00006180     cf00          JRNN    ACGU_GETUP                      ;BR=TIME OUT!
         00006190     00b4  
    1644                    
    1645 000061a0     05ae          MOVE    @PUCK_MODE,A14,W
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   39

         000061b0 00000000! 
    1646 000061d0     0b4e          CMPI    PUM_SCORE,A14
         000061e0     ff9c  
    1647 000061f0     c400          JRLT    ACGU_STAY                       ;BR=NO SCORE YET
         00006200     00a6  
    1648 00006210     0b4e          CMPI    PUM_SCORE,A14
         00006220     ff9c  
    1649 00006230     cb00          JRNE    ACGU_STAY                       ;BR=SCORE OVER
         00006240     00a2  
    1650                    
    1651 00006250     af0e          MOVB    *A8(ANIMLOOP),A14
         00006260     0370  
    1652 00006270     ca00          JRZ     ACGU_GETUP                      ;BR=HOLD FINISHED
         00006280     00a5  
    1653 00006290     142e          DEC     A14
    1654 000062a0     adc8          MOVB    A14,*A8(ANIMLOOP)
         000062b0     0370  
    1655 000062c0     c000          JRUC    ACGU_STAY
         000062d0     0099  
    1656                    
    1657 000062e0           ACGU_CHECK_CTRL
    1658 000062e0     05a0          MOVE    @PUCK_CONTROL,A0,W
         000062f0 00000000! 
    1659                    ;       JRNZ    ACGU_GETUP                      ;BR=SOMEONE GOT THE PUCK
    1660 00006310     ca0a          JRZ     ACGU_CHECK_STUFF                ;BR=NOBODY HAS CONTROL
    1661                    
    1662 00006320                   GBLOCK  A0,A0
    1663 00006360     b40e          MOVE    *A0(POF_MODE),A14,W
         00006370     0210  
    1664 00006380     15ae          SUBK    PM_ONETIME,A14
    1665 00006390     cb00          JRNZ    ACGU_GETUP                      ;BR=NOT THE ONE TIMER CASE
         000063a0     0093  
    1666 000063b0     c01b          JRUC    ACGU_GO
    1667 000063c0           ACGU_CHECK_STUFF
    1668 000063c0     05ae          MOVE    @PUCK_MODE,A14,W
         000063d0 00000000! 
    1669 000063f0     0b4e          CMPI    PUM_SCORE,A14
         00006400     ff9c  
    1670                    ;       JRGE    ACGU_GETUP                      ;BR=GOAL JUST GET UP
    1671 00006410     ca00          JREQ    ACGU_GETUP                      ;BR=GOAL JUST GET UP
         00006420     008b  
    1672                    
    1673 00006430     07ae          MOVE    @PUCK_OBJECT,A14,L
         00006440 00000000! 
    1674 00006460     b7ce          MOVE    *A14(ODT_VEL),A14,L
         00006470     04d0  
    1675 00006480     ca00          JRZ     ACGU_GETUP                      ;BR=PUCK STOPPED
         00006490     0084  
    1676                    
    1677                    ;       MOVE    *A8(OZVAL),*A8(ODT_GZPOSPOSS),L
    1678                    ;       MOVE    *A8(ODT_PBK),A6,L
    1679                    ;       CALLA   PUCK_FROZEN
    1680                    ;ACGU_CHECK_TIME
    1681                    
    1682 000064a0     b700          MOVE    *A8(ODT_GCOMPTIME),A0,L         ;TIME OF ANIMATION START
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   40

         000064b0     0720  
    1683 000064c0     07ae          MOVE    @PUCK_NEWDIR_TIME,A14,L
         000064d0 00000000! 
    1684 000064f0     480e          CMP     A0,A14
    1685 00006500     c77d          JRGT    ACGU_GETUP                      ;BR=NEW PUCK DIRECTION
    1686                    
    1687 00006510     07ae          MOVE    @WAVEIRQS,A14,L
         00006520 00000000! 
    1688 00006540     440e          SUB     A0,A14
    1689 00006550     17ce          SUBK    30,A14
    1690 00006560     cf77          JRNN    ACGU_GETUP                      ;BR=TIME OUT!
    1691 00006570           ACGU_GO
    1692 00006570     07a9          MOVE    @PUCK_OBJECT,A9,L
         00006580 00000000! 
    1693 000065a0     b72e          MOVE    *A9(ODT_VEL),A14,L
         000065b0     04d0  
    1694 000065c0     ca71          JRZ     ACGU_GETUP                      ;BR=PUCK STOPPED
    1695                    
    1696 000065d0     b720          MOVE    *A9(OXVEL),A0,L
         000065e0     0100  
    1697 000065f0     b706          MOVE    *A8(ODT_PBK),A6,L
         00006600     0530  
    1698 00006610     aece          MOVB    *A6(POF_NUMBER),A14
         00006620     0000  
    1699 00006630     148e          SUBK    4,A14
    1700 00006640     ca01          JRZ     ACGU_CHECK_PUD                  ;BR=PUCK X DIRECTION OKAY
    1701 00006650     03a0          NEG     A0
    1702 00006660           ACGU_CHECK_PUD
    1703 00006660     4c00          MOVE    A0,A0
    1704 00006670     c166          JRP     ACGU_GETUP                      ;BR=PUCK GOING AWAY FROM GOAL
    1705                    
    1706                            .if     1
    1707                    
    1708                    ;       MOVI    0200000H,A0
    1709                    ;       CLR     A1
    1710                    
    1711                    ;;      MOVI    016A09EH,A0
    1712                    ;       MOVI    0100000H,A0
    1713                    ;       MOVE    A0,A1
    1714                    
    1715 00006680     5600          CLR     A0
    1716 00006690     4c01          MOVE    A0,A1
    1717 000066a0     0d3f          CALLR   CHECK_PUCK_IMPACT
         000066b0     ff28  
    1718 000066c0     ca5a          JRZ     ACGU_STAY                       ;BR=NO PUCK COLLISION
    1719                    
    1720                            .else
    1721                    
    1722                            MOVB    *A6(POF_DIRECTION),A5
    1723                    ;       MOVE    A5,A0                           ;WILL THE PUCK CHANGE DIR?
    1724                    ;       CALLA   dir_to_degrees
    1725                    ;
    1726                    ;       MOVE    *A9(ODT_DIR),A14,L
    1727                    ;       THETA_N A14
    1728                    ;       SUB     A14,A0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   41

    1729                    ;       ABS     A0
    1730                    ;       CMPI    XD1800,A0
    1731                    ;       JRLE    ACGU_ANGLE_OKAY
    1732                    ;       SUBI    XD3600,A0
    1733                    ;       NEG     A0
    1734                    ;ACGU_ANGLE_OKAY
    1735                    ;       CMPI    XD0900,A0
    1736                    ;       JRLT    ACGU_GETUP                      ;BR=PUCK IS GOING AWAY
    1737                    
    1738                    ;       calla   get_players_puck_point_o
    1739                    ;       MOVE    A0,A2                           ;X POSITION
    1740                    ;       MOVE    A1,A3                           ;Z POSITION
    1741                    
    1742                            MOVE    *A8(ODT_GXIMPACT),A2,L          ;PUCK AT IMPACT POINT
    1743                            MOVE    *A8(ODT_GZIMPACT),A3,L
    1744                    
    1745                    ;       MOVE    A5,A14
    1746                    ;       ANDI    3,A14
    1747                    ;       CMPI    3,A14
    1748                    ;       JRNE    ACGU_GO                         ;BR=NOT DIRECTION 3 OR 7
    1749                    ;
    1750                    ;       MOVE    *A9(OYPOS),A14,W
    1751                    ;       JRZ     ACGU_GO                         ;BR=NOT ON GROUND
    1752                    ;       ABS     A2
    1753                    ;       GETST   A14
    1754                    ;       ADDI    0100000H,A2
    1755                    ;       BTST    31,A14
    1756                    ;       JRNZ    ACGU_GO                         ;BR=WASN'T NEGATIVE
    1757                    ;       NEG     A2
    1758                    ;ACGU_GO
    1759                            MOVE    *A9(OXVAL),A0,L
    1760                            MOVE    *A9(OXVEL),A14,L
    1761                            ADD     A14,A0
    1762                            MOVE    *A9(OZVAL),A1,L
    1763                            MOVE    *A9(OZVEL),A14,L
    1764                            ADD     A14,A1
    1765                            CALLA   find_dir_to_point_18            ;FROM GOALIE TO PUCK
    1766                            SUB     A5,A0
    1767                            JRZ     ACGU_STAY                       ;BR=SAME DIRECTION
    1768                            ABS     A0
    1769                            SUBK    1,A0
    1770                            JRZ     ACGU_STAY                       ;BR=ADJACENT DIRECTION
    1771                            SUBK    6,A0
    1772                            JRZ     ACGU_STAY                       ;BR=8 TO 1 CASE
    1773                    
    1774                            .endif
    1775                    
    1776 000066d0           ACGU_SAVE
    1777 000066d0     0d3f          CALLR   COUNT_SAVE
         000066e0     fe09  
    1778                    
    1779 000066f0     b249          MOVE    A2,*A9(OXVAL),L                 ;JUST PUT IT AT PUCK POINT
         00006700     0140  
    1780 00006710     b269          MOVE    A3,*A9(OZVAL),L                 ; FOR NOW
         00006720     0180  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   42

    1781                    
    1782                    ;       MOVE    *A8(ODT_GXIMPACT),*A9(OXVAL),L  ;PUCK PUCK AT IMPACT POINT
    1783                    ;       MOVE    *A8(ODT_GZIMPACT),*A9(OZVAL),L
    1784                    
    1785 00006730     b52e          MOVE    *A9(OFLAGS),A14,W
         00006740     0420  
    1786 00006750     0bae          ORI     M_FVELADD,A14
         00006760 00000004  
    1787 00006780     b1c9          MOVE    A14,*A9(OFLAGS),W
         00006790     0420  
    1788                    
    1789 000067a0     09c4          MOVI    s_goalie_stick_4,A4
         000067b0     0016  
    1790 000067c0     b52e          MOVE    *A9(OYPOS),A14,W
         000067d0     0170  
    1791 000067e0     ca02          JRZ     ACGU_REBOUND                    ;BR=NOT ON GROUND
    1792 000067f0     09c4          MOVI    s_goalie_pad_1,A4
         00006800     000b  
    1793 00006810           ACGU_REBOUND
    1794 00006810     0d5f          CALLA   do_sound
         00006820 00000000! 
    1795                    
    1796 00006840     b702          MOVE    *A8(ODT_GSAVE),A2,L
         00006850     0650  
    1797 00006860     0b62          CMPI    SET_GBSPLIT_SCRIPT,A2
         00006870 ffffffff! 
    1798 00006890     ca04          JREQ    ACGU_SPLIT                      ;BR=BLOCKER SPLIT
    1799 000068a0     0b62          CMPI    SET_GGSPLIT_SCRIPT,A2
         000068b0 ffffffff! 
    1800 000068d0     cb32          JRNE    ACGU_PUT_OTHER                  ;BR=NOT GLOVE SPLIT
    1801 000068e0           ACGU_SPLIT
    1802 000068e0     4d28          MOVE    A9,A8
    1803 000068f0     09ce          MOVI    NORM_GRAVITY,A14
         00006900     3000  
    1804 00006910     b1c9          MOVE    A14,*A9(OYACCEL),W
         00006920     02f0  
    1805                    
    1806 00006930     b720          MOVE    *A9(ODT_VEL),A0,L
         00006940     04d0  
    1807 00006950     4c01          MOVE    A0,A1
    1808 00006960     2be1          SRA     1,A1
    1809 00006970     0d5f          CALLA   RANGERND
         00006980 00000000! 
    1810                    ;       CMPI    MAX_SAVE_PUCK_SPEED,A0
    1811                    ;       JRLE    ACGU_SPEED_SET                  ;BR=UNDER OR AT SPEED LIMIT
    1812                    ;       MOVI    MAX_SAVE_PUCK_SPEED,A0
    1813                    ;ACGU_SPEED_SET
    1814 000069a0     4c03          MOVE    A0,A3
    1815                    
    1816 000069b0     09e1          MOVI    XD0600,A1                       ;LEFT BLOCKER SPLIT PARAMETERS
         000069c0 003c0000  
    1817 000069e0     09e0          MOVI    XD0900,A0
         000069f0 005a0000  
    1818 00006a10     0b62          CMPI    SET_GGSPLIT_SCRIPT,A2
         00006a20 ffffffff! 
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   43

    1819 00006a40     cb02          JRNE    ACGU_GET_DIR                    ;BR=NOT GLOVE SPLIT
    1820 00006a50     03a1          NEG     A1                              ;LEFT GLOVE SPLIT PARAMETERS
    1821 00006a60     03a0          NEG     A0
    1822 00006a70           ACGU_GET_DIR
    1823 00006a70     b722          MOVE    *A9(ODT_DIR),A2,L
         00006a80     04b0  
    1824 00006a90     0b22          ADDI    XD1800,A2
         00006aa0 00b40000  
    1825                    
    1826 00006ac0     aece          MOVB    *A6(POF_NUMBER),A14
         00006ad0     0000  
    1827 00006ae0     148e          SUBK    4,A14
    1828 00006af0     ca02          JRZ     ACGU_CHOOSE_ANGLE               ;BR=LEFT GOALIE
    1829 00006b00     03a1          NEG     A1                              ;RIGHT PARAMETERS
    1830 00006b10     03a0          NEG     A0
    1831 00006b20           ACGU_CHOOSE_ANGLE
    1832 00006b20     0d5f          CALLA   RANGERND
         00006b30 00000000! 
    1833 00006b50     4040          ADD     A2,A0
    1834                    
    1835 00006b60     4c61          MOVE    A3,A1
    1836 00006b70     0d5f          CALLA   set_obj_to_polar
         00006b80 00000000! 
    1837                    
    1838 00006ba0     b52e          MOVE    *A9(OYPOS),A14,W
         00006bb0     0170  
    1839 00006bc0     ca80          JAZ     puck_slide_sound
         00006bd0 00000000! 
    1840 00006bf0     0960          RETS
    1841                    
    1842 00006c00           ACGU_PUT_OTHER
    1843 00006c00     4d28          MOVE    A9,A8
    1844 00006c10     b701          MOVE    *A8(ODT_VEL),A1,L
         00006c20     04d0  
    1845 00006c30     2ba1          SRA     3,A1
    1846 00006c40     c080          JAUC    put_puck_in_other_direction
         00006c50 00000000! 
    1847 00006c70           ACGU_STAY
    1848 00006c70     b70e          MOVE    *A8(ANIMFRM),A14,L              ;STAY AT THIS FRAME
         00006c80     0320  
    1849 00006c90     0bee          SUBI    020H+010H+020H,A14
         00006ca0     ffaf  
    1850 00006cb0     b3c8          MOVE    A14,*A8(ANIMFRM),L
         00006cc0     0320  
    1851 00006cd0     0960          RETS
    1852 00006ce0           ACGU_GETUP
    1853                    ;       .if     BILL
    1854                    ;       MOVE    *A8(ANIMFRM),A14,L              ;STAY AT THIS FRAME
    1855                    ;       SUBI    020H+010H+020H,A14
    1856                    ;       MOVE    A14,*A8(ANIMFRM),L
    1857                    ;       .endif
    1858 00006ce0     0960          RETS
    1859                    
    1860                    **************************************************************************
    1861                    *                                                                        *
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   44

    1862                    * A_CHECK_STICKBLOCK                                                     *
    1863                    *                                                                        *
    1864                    * PASS:                                                                  *
    1865                    * A8 = GOALIE OBJECT                                                     *
    1866                    *                                                                        *
    1867                    **************************************************************************
    1868                    
    1869 00006cf0           A_CHECK_STICKBLOCK
    1870 00006cf0     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         00006d00     0630  
    1871 00006d10     0b8e          ANDI    M_SAVEMADE|M_MISSSAVE,A14
         00006d20 fffffff3  
    1872 00006d40     cb23          JRNZ    ACSTB_DONE                      ;BR=DON'T SAVE
    1873                    
    1874 00006d50     07a9          MOVE    @PUCK_OBJECT,A9,L
         00006d60 00000000! 
    1875                    
    1876 00006d80     b706          MOVE    *A8(ODT_PBK),A6,L
         00006d90     0530  
    1877                    
    1878 00006da0     5600          CLR     A0
    1879 00006db0     4c01          MOVE    A0,A1
    1880 00006dc0     0d3f          CALLR   CHECK_PUCK_IMPACT
         00006dd0     feb6  
    1881 00006de0     ca19          JRZ     ACSTB_DONE                      ;BR=NO PUCK COLLISION
    1882                    
    1883 00006df0     0d3f          CALLR   COUNT_SAVE
         00006e00     fd97  
    1884                    
    1885 00006e10     b249          MOVE    A2,*A9(OXVAL),L                 ;JUST PUT IT AT PUCK POINT
         00006e20     0140  
    1886 00006e30     b269          MOVE    A3,*A9(OZVAL),L                 ; FOR NOW
         00006e40     0180  
    1887                    
    1888                    ;       MOVE    *A8(ODT_GXIMPACT),*A9(OXVAL),L  ;PUCK PUCK AT IMPACT POINT
    1889                    ;       MOVE    *A8(ODT_GZIMPACT),*A9(OZVAL),L
    1890                    
    1891 00006e50     b52e          MOVE    *A9(OFLAGS),A14,W
         00006e60     0420  
    1892 00006e70     0bae          ORI     M_FVELADD,A14
         00006e80 00000004  
    1893 00006ea0     b1c9          MOVE    A14,*A9(OFLAGS),W
         00006eb0     0420  
    1894                    
    1895 00006ec0     09c4          MOVI    s_goalie_stick_4,A4
         00006ed0     0016  
    1896 00006ee0     0d5f          CALLA   do_sound
         00006ef0 00000000! 
    1897                    
    1898 00006f10     4d28          MOVE    A9,A8
    1899 00006f20     b701          MOVE    *A8(ODT_VEL),A1,L
         00006f30     04d0  
    1900 00006f40     2bc1          SRA     2,A1
    1901 00006f50     c080          JAUC    put_puck_in_other_direction
         00006f60 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   45

    1902 00006f80           ACSTB_DONE
    1903 00006f80     0960          RETS
    1904                    
    1905                    **************************************************************************
    1906                    *                                                                        *
    1907                    * A_CHECK_HIBLOCK                                                        *
    1908                    *                                                                        *
    1909                    * PASS:                                                                  *
    1910                    * A8 = GOALIE OBJECT                                                     *
    1911                    *                                                                        *
    1912                    **************************************************************************
    1913                    
    1914              0670  ODT_GLOVE       .EQU    ODT_GZIMPACT            ;UHW GLOVE EVENT CHOOSER
    1915                    
    1916                    ;GL_CATCH_PUCK  .EQU    614                     ;60% OF 1024
    1917                    ;GL_KEEP_PUCK   .EQU    614-368                 ;HIGH 60% OF CATCH_PUCK
    1918                    ;GL_HOOK_PUCK   .EQU    25                      ;LOW 10% OF CATCH PUCK
    1919                    
    1920              0300  GL_CATCH_PUCK   .EQU    768                     ;75% OF 1024
    1921              0133  GL_KEEP_PUCK    .EQU    768-461                 ;HIGH 60% OF CATCH_PUCK
    1922              001f  GL_HOOK_PUCK    .EQU    31                      ;LOW 10% OF CATCH PUCK
    1923                    
    1924                    ;BL_CORNER      .EQU    205                     ;20% OF 1024
    1925                    ;BL_POPUP       .EQU    102                     ;10% OF 1024
    1926                    ;BL_POPUP_BEHIND.EQU    51                      ;50% OF BL_POPUP
    1927                    
    1928              0133  BL_CORNER       .EQU    307                     ;30% OF 1024
    1929              0066  BL_POPUP        .EQU    102                     ;LOW 10% OF 1024
    1930              0033  BL_POPUP_BEHIND .EQU    51                      ;50% OF BL_POPUP
    1931                    
    1932 00006f90           A_CHECK_HIBLOCK
    1933 00006f90     b50a          MOVE    *A8(ODT_GFLAGS),A10,W
         00006fa0     0630  
    1934 00006fb0     4d4e          MOVE    A10,A14
    1935 00006fc0     0b8e          ANDI    M_SAVEMADE|M_MISSSAVE,A14
         00006fd0 fffffff3  
    1936 00006ff0     cb00          JRNZ    ACHB_DONE                       ;BR=DON'T SAVE
         00007000     00fe  
    1937                    
    1938 00007010     07a9          MOVE    @PUCK_OBJECT,A9,L
         00007020 00000000! 
    1939                    
    1940 00007040     b706          MOVE    *A8(ODT_PBK),A6,L
         00007050     0530  
    1941                    
    1942 00007060     5600          CLR     A0
    1943 00007070     4c01          MOVE    A0,A1
    1944 00007080     0d3f          CALLR   CHECK_PUCK_IMPACT
         00007090     fe8a  
    1945 000070a0     ca00          JRZ     ACHB_DONE                       ;BR=NO PUCK COLLISION
         000070b0     00f3  
    1946                    
    1947                    ;       MOVB    *A6(POF_DIRECTION),A5
    1948                    ;
    1949                    ;;      MOVE    *A8(OXVAL),A2,L
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   46

    1950                    ;;      MOVE    *A8(OZVAL),A3,L
    1951                    ;
    1952                    ;       MOVE    *A8(ODT_GXIMPACT),A2,L          ;PUCK AT IMPACT POINT
    1953                    ;       MOVE    *A8(ODT_GZIMPACT),A3,L
    1954                    ;
    1955                    ;       MOVE    *A9(OXVAL),A0,L
    1956                    ;       MOVE    *A9(OXVEL),A14,L
    1957                    ;       ADD     A14,A0
    1958                    ;       MOVE    *A9(OZVAL),A1,L
    1959                    ;       MOVE    *A9(OZVEL),A14,L
    1960                    ;       ADD     A14,A1
    1961                    ;       CALLA   find_dir_to_point_18            ;FROM GOALIE TO PUCK
    1962                    ;       SUB     A5,A0
    1963                    ;       JRZ     ACHB_DONE                       ;BR=SAME DIRECTION
    1964                    ;       ABS     A0
    1965                    ;       SUBK    1,A0
    1966                    ;       JRZ     ACHB_DONE                       ;BR=ADJACENT DIRECTION
    1967                    ;       SUBK    6,A0
    1968                    ;       JRZ     ACHB_DONE                       ;BR=8 TO 1 CASE
    1969                    
    1970 000070c0     0d3f          CALLR   COUNT_SAVE
         000070d0     fd6a  
    1971                    
    1972 000070e0     09c0          MOVI    1024,A0                         ;DECIDE IF GOALIE CATCHES PUCK
         000070f0     0400  
    1973 00007100     0d5f          CALLA   RAND0
         00007110 00000000! 
    1974 00007130     0b40          CMPI    GL_CATCH_PUCK,A0
         00007140     fcff  
    1975 00007150     c739          JRGT    ACHB_NOCATCH                    ;BR=DON'T CATCH IT!
    1976                    
    1977 00007160     b70e          MOVE    *A8(ODT_GSAVE),A14,L
         00007170     0650  
    1978 00007180     0b6e          CMPI    SET_GGLOVE_SCRIPT,A14
         00007190 ffffffff! 
    1979 000071b0     ca0c          JREQ    ACHB_CATCH
    1980 000071c0     0b6e          CMPI    SET_GQGLOVE_SCRIPT,A14
         000071d0 ffffffff! 
    1981 000071f0     ca08          JREQ    ACHB_CATCH
    1982 00007200     0b6e          CMPI    SET_GQHGLOVE_SCRIPT,A14
         00007210 ffffffff! 
    1983 00007230     ca04          JREQ    ACHB_CATCH
    1984 00007240     0b6e          CMPI    SET_GHGLOVE_SCRIPT,A14
         00007250 ffffffff! 
    1985 00007270     cb27          JRNE    ACHB_NOCATCH
    1986 00007280           ACHB_CATCH
    1987 00007280     09c4          MOVI    s_goalie_mitt_5,A4
         00007290     0009  
    1988 000072a0     0d5f          CALLA   do_sound
         000072b0 00000000! 
    1989                    
    1990 000072d0     b208          MOVE    A0,*A8(ODT_GLOVE),L
         000072e0     0670  
    1991                    
    1992 000072f0     19ee          MOVK    PM_GHOLDING,A14
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   47

    1993 00007300     b1c6          MOVE    A14,*A6(POF_MODE),W
         00007310     0210  
    1994                    
    1995 00007320     57ce          CLR     A14
    1996 00007330     b3c8          MOVE    A14,*A8(ODT_VEL),L
         00007340     04d0  
    1997 00007350     b3c8          MOVE    A14,*A8(OXVEL),L
         00007360     0100  
    1998 00007370     b3c8          MOVE    A14,*A8(OZVEL),L
         00007380     00e0  
    1999                    
    2000 00007390     07ae          MOVE    @WAVEIRQS,A14,L
         000073a0 00000000! 
    2001 000073c0     b3c8          MOVE    A14,*A8(ODT_GPOSSIRQ),L         ;IRQ TIME OF POSSESSION
         000073d0     06e0  
    2002 000073e0     bb08          MOVE    *A8(OZVAL),*A8(ODT_GZPOSPOSS),L ;Z POSITION
         000073f0     0180  
         00007400     0700  
    2003                    
    2004 00007410     0d5f          CALLA   GET_PUCK_CONTROL
         00007420 00000000! 
    2005                    
    2006 00007440     07a9          MOVE    @PUCK_OBJECT,A9,L
         00007450 00000000! 
    2007 00007470     b52e          MOVE    *A9(ODT_PFLAGS),A14,W
         00007480     0590  
    2008 00007490     0bae          ORI     M_INBACK,A14
         000074a0 00000002  
    2009                    ;       ORI     M_INFRONT,A14
    2010 000074c0     b1c9          MOVE    A14,*A9(ODT_PFLAGS),W
         000074d0     0590  
    2011                    
    2012 000074e0     0960          RETS
    2013 000074f0           ACHB_NOCATCH
    2014 000074f0     09c4          MOVI    s_goalie_pad_2,A4
         00007500     000c  
    2015 00007510     0d5f          CALLA   do_sound
         00007520 00000000! 
    2016                    
    2017 00007540     b249          MOVE    A2,*A9(OXVAL),L                 ;JUST PUT IT AT PUCK POINT
         00007550     0140  
    2018 00007560     b269          MOVE    A3,*A9(OZVAL),L                 ; FOR NOW
         00007570     0180  
    2019                    
    2020                    ;       MOVE    *A8(ODT_GXIMPACT),*A9(OXVAL),L  ;PUCK PUCK AT IMPACT POINT
    2021                    ;       MOVE    *A8(ODT_GZIMPACT),*A9(OZVAL),L
    2022                    
    2023 00007580     b52e          MOVE    *A9(OFLAGS),A14,W
         00007590     0420  
    2024 000075a0     0bae          ORI     M_FVELADD,A14
         000075b0 00000004  
    2025 000075d0     b1c9          MOVE    A14,*A9(OFLAGS),W
         000075e0     0420  
    2026                    
    2027 000075f0     b721          MOVE    *A9(OYVEL),A1,L
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   48

         00007600     0120  
    2028                    
    2029 00007610     b70e          MOVE    *A8(ODT_GSAVE),A14,L
         00007620     0650  
    2030 00007630     0b6e          CMPI    SET_GBHOP_SCRIPT,A14
         00007640 ffffffff! 
    2031 00007660     ca10          JREQ    ACHB_FLY_HIGH                   ;BR=A QUICK HOP SAVE
    2032 00007670     0b6e          CMPI    SET_GGHOP_SCRIPT,A14
         00007680 ffffffff! 
    2033 000076a0     ca0c          JREQ    ACHB_FLY_HIGH                   ;BR=A QUICK HOP SAVE
    2034 000076b0     0b6e          CMPI    SET_GKO_SCRIPT,A14
         000076c0 ffffffff! 
    2035 000076e0     ca08          JREQ    ACHB_FLY_HIGH                   ;BR=A KO SAVE
    2036 000076f0     0b6e          CMPI    SET_GQBLOCKER_SCRIPT,A14
         00007700 ffffffff! 
    2037 00007720     ca04          JREQ    ACHB_FLY_HIGH                   ;BR=A QUICK BLOCKER SAVE
    2038 00007730     0b6e          CMPI    SET_GQHBLOCKER_SCRIPT,A14
         00007740 ffffffff! 
    2039 00007760     cb54          JRNE    ACHB_FLY_NORM                   ;BR=NOT A HIGH QUICK BLOCKER
    2040 00007770           ACHB_FLY_HIGH
    2041 00007770     09c0          MOVI    1024,A0                         ;DECIDE WHERE PUCK FLIES
         00007780     0400  
    2042 00007790     0d5f          CALLA   RAND0
         000077a0 00000000! 
    2043 000077c0     4c04          MOVE    A0,A4
    2044                    
    2045 000077d0     4c20          MOVE    A1,A0
    2046 000077e0     0b20          ADDI    018000H,A0
         000077f0 00018000  
    2047 00007810     0d01          SUBI    048000H,A1
         00007820 fffb7fff  
    2048                    
    2049 00007840     09e2          MOVI    XD1350,A2
         00007850 00870000  
    2050 00007870     09e3          MOVI    -(XD1350-XD0450),A3
         00007880 ffa60000  
    2051                    
    2052 000078a0     0b44          CMPI    BL_CORNER,A4
         000078b0     fecc  
    2053 000078c0     c709          JRGT    ACHB_CHECK_LEFT                 ;BR=FLY BEHIND GOALIE
    2054                    
    2055 000078d0     0b44          CMPI    BL_POPUP,A4
         000078e0     ff99  
    2056 000078f0     c412          JRLT    ACHB_POP_FLY                    ;BR=POP UP
    2057                    
    2058 00007900     09e2          MOVI    XD0900,A2                       ;FLY IN FRONT OF GOALIE
         00007910 005a0000  
    2059 00007930     09e3          MOVI    -(XD0900-XD0450),A3
         00007940 ffd30000  
    2060 00007960           ACHB_CHECK_LEFT
    2061 00007960     aece          MOVB    *A6(POF_NUMBER),A14
         00007970     0000  
    2062 00007980     148e          SUBK    4,A14
    2063                    ;       JRZ     ACHB_CHOOSE_YVEL                ;BR=LEFT GOALIE
    2064 00007990     cb03          JRNZ    ACHB_CHECK_RIGHT                ;BR=RIGHT GOALIE
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   49

    2065                    
    2066 000079a0     1f4a          BTST    B_GLOVESIDE,A10
    2067 000079b0     cb03          JRNZ    ACHB_OTHER_SIDE                 ;BR=ON GLOVE SIDE
    2068 000079c0     c039          JRUC    ACHB_CHOOSE_YVEL
    2069                            
    2070 000079d0           ACHB_CHECK_RIGHT
    2071 000079d0     1f4a          BTST    B_GLOVESIDE,A10
    2072 000079e0     cb37          JRNZ    ACHB_CHOOSE_YVEL                ;BR=ON GLOVE SIDE
    2073 000079f0           ACHB_OTHER_SIDE
    2074 000079f0     03a2          NEG     A2                              ;RIGHT GOALIE BLOCKER ANGLE OFFS
    2075 00007a00     03a3          NEG     A3
    2076 00007a10     c034          JRUC    ACHB_CHOOSE_YVEL
    2077                    
    2078 00007a20           ACHB_POP_FLY
    2079 00007a20     aec0          MOVB    *A6(POF_DIRECTION),A0
         00007a30     0390  
    2080 00007a40     0d5f          CALLA   dir_to_degrees
         00007a50 00000000! 
    2081 00007a70     4c01          MOVE    A0,A1
    2082 00007a80     0b20          ADDI    XD1800+XD0225,A0
         00007a90 00ca8000  
    2083 00007ab0     0b21          ADDI    XD1800-XD0225,A1
         00007ac0 009d8000  
    2084 00007ae0     0d5f          CALLA   RANGERND
         00007af0 00000000! 
    2085 00007b10     4c02          MOVE    A0,A2
    2086                    
    2087 00007b20     09e0          MOVI    010000H,A0
         00007b30 00010000  
    2088 00007b50     09e1          MOVI    08000H,A1
         00007b60 00008000  
    2089 00007b80     09e5          MOVI    -050000H,A5
         00007b90 fffb0000  
    2090 00007bb0     09e6          MOVI    -058000H,A6
         00007bc0 fffa8000  
    2091                    
    2092 00007be0     0d5f          CALLA   IS_A8_IN_CREASE
         00007bf0 00000000! 
    2093 00007c10     c804          JRC     ACHB_POP_IN_FRONT               ;BR=INSIDE DA CREASE
    2094                    
    2095 00007c20     0b44          CMPI    BL_POPUP_BEHIND,A4
         00007c30     ffcc  
    2096 00007c40     c700          JRGT    ATU_CHOOSE_VEL                  ;BR=POP UP BEHIND GOALIE
         00007c50     00bb  
    2097 00007c60           ACHB_POP_IN_FRONT
    2098 00007c60     0b22          ADDI    XD1800,A2                       ;POP UP IN FRONT OF GOALIE
         00007c70 00b40000  
    2099 00007c90     c000          JRUC    ATU_CHOOSE_VEL
         00007ca0     00b6  
    2100                    
    2101 00007cb0           ACHB_FLY_NORM
    2102 00007cb0     09e2          MOVI    XD0225,A2
         00007cc0 00168000  
    2103 00007ce0     4c43          MOVE    A2,A3
    2104 00007cf0     4c20          MOVE    A1,A0
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   50

    2105 00007d00     0b20          ADDI    018000H,A0
         00007d10 00018000  
    2106 00007d30     0d01          SUBI    018000H,A1
         00007d40 fffe7fff  
    2107 00007d60           ACHB_CHOOSE_YVEL
    2108 00007d60     0d5f          CALLA   RANGERND
         00007d70 00000000! 
    2109 00007d90     b209          MOVE    A0,*A9(OYVEL),L
         00007da0     0120  
    2110                    
    2111 00007db0     09ce          MOVI    NORM_GRAVITY,A14
         00007dc0     3000  
    2112 00007dd0     b1c9          MOVE    A14,*A9(OYACCEL),W
         00007de0     02f0  
    2113                    
    2114 00007df0     aec0          MOVB    *A6(POF_DIRECTION),A0
         00007e00     0390  
    2115 00007e10     0d5f          CALLA   dir_to_degrees
         00007e20 00000000! 
    2116 00007e40     4c01          MOVE    A0,A1
    2117 00007e50     4040          ADD     A2,A0
    2118 00007e60     4461          SUB     A3,A1
    2119 00007e70     0d5f          CALLA   RANGERND
         00007e80 00000000! 
    2120 00007ea0                   THETA_N A0
    2121                    
    2122 00007f80     b721          MOVE    *A9(ODT_VEL),A1,L
         00007f90     04d0  
    2123 00007fa0     2bc1          SRA     2,A1
    2124                    
    2125 00007fb0     4d28          MOVE    A9,A8
    2126 00007fc0     c080          JAUC    set_obj_to_polar
         00007fd0 00000000! 
    2127                    
    2128                    ;       MOVE    A9,A8
    2129                    ;       MOVE    *A8(ODT_VEL),A1,L
    2130                    ;       SRA     2,A1
    2131                    ;       JAUC    put_puck_in_other_direction
    2132 00007ff0           ACHB_DONE
    2133 00007ff0     0960          RETS
    2134                    
    2135                    **************************************************************************
    2136                    *                                                                        *
    2137                    * A_THROW_UP                                                             *
    2138                    *                                                                        *
    2139                    * PASS:                                                                  *
    2140                    * A8 = GOALIE OBJECT                                                     *
    2141                    *                                                                        *
    2142                    **************************************************************************
    2143                    
    2144 00008000           A_THROW_UP
    2145 00008000     b70e          MOVE    *A8(ODT_GLOVE),A14,L
         00008010     0670  
    2146 00008020     0b4e          CMPI    GL_KEEP_PUCK,A14
         00008030     fecc  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   51

    2147 00008040     c700          JRGT    ATU_DONE                        ;BR=KEEP PUCK
         00008050     009f  
    2148 00008060     0b4e          CMPI    GL_HOOK_PUCK,A14
         00008070     ffe0  
    2149 00008080     c400          JRLT    ATU_DONE                        ;BR=HOOK PUCK
         00008090     009b  
    2150                    
    2151 000080a0     05ae          MOVE    @PUCK_CONTROL,A14,W
         000080b0 00000000! 
    2152 000080d0     ca00          JRZ     ATU_DONE                        ;BR=NOBODY HAS CONTROL
         000080e0     0096  
    2153 000080f0     b706          MOVE    *A8(ODT_PBK),A6,L
         00008100     0530  
    2154 00008110     aec0          MOVB    *A6(POF_NUMBER),A0
         00008120     0000  
    2155 00008130     480e          CMP     A0,A14
    2156 00008140     cb00          JRNE    ATU_DONE                        ;BR=GOALIE DOESN'T HAVE CONTROL
         00008150     008f  
    2157                    
    2158 00008160     57ce          CLR     A14                             ;PUM_OPEN
    2159 00008170     0d5f          calla   set_safe_puck_mode_a14
         00008180 00000000! 
    2160 000081a0     05c0          MOVE    @PUCK_CONTROL,@PUCK_LAST_CONTROL,W
         000081b0 00000000! 
         000081d0 00000000! 
    2161 000081f0     57ce          CLR     A14
    2162 00008200     058e          MOVE    A14,@PUCK_INTENDED,W
         00008210 00000000! 
    2163 00008230     058e          MOVE    A14,@PUCK_CONTROL,W
         00008240 00000000! 
    2164 00008260     0d5f          CALLA   new_puck_control
         00008270 00000000! 
    2165 00008290           ATU_GO
    2166 00008290     aec0          MOVB    *A6(POF_DIRECTION),A0
         000082a0     0390  
    2167                    
    2168 000082b0     b707          MOVE    *A8(OIMG),A7,L
         000082c0     02c0  
    2169 000082d0     0b67          CMPI    GSK12F06,A7
         000082e0 ffffffff! 
    2170 00008300     cb0f          JRNE    ATU_NO_KLUDGE                   ;BR=DON'T KLUDGE THIS ANIMATION
    2171                    
    2172 00008310     0b40          CMPI    2,A0
         00008320     fffd  
    2173 00008330     ca05          JREQ    ATU_2_KLUDGE                    ;BR=DO THE LEFT KLUDGE
    2174 00008340     09e0          MOVI    XD0450,A0                       ;RIGHT KLUDGE
         00008350 002d0000  
    2175 00008370     5621          CLR     A1
    2176 00008380     c011          JRUC    ATU_CHOOSE_DIR
    2177 00008390           ATU_2_KLUDGE
    2178 00008390     09e0          MOVI    XD1800,A0                       ;LEFT KLUDGE
         000083a0 00b40000  
    2179 000083c0     09e1          MOVI    XD1800-XD0450,A1
         000083d0 00870000  
    2180 000083f0     c00a          JRUC    ATU_CHOOSE_DIR
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   52

    2181                    
    2182 00008400           ATU_NO_KLUDGE
    2183 00008400     0d5f          CALLA   dir_to_degrees
         00008410 00000000! 
    2184 00008430     4c01          MOVE    A0,A1
    2185 00008440     0b20          ADDI    XD1800+XD0225,A0
         00008450 00ca8000  
    2186 00008470     0b21          ADDI    XD1800-XD0225,A1
         00008480 009d8000  
    2187 000084a0           ATU_CHOOSE_DIR
    2188 000084a0     0d5f          CALLA   RANGERND
         000084b0 00000000! 
    2189 000084d0     4c02          MOVE    A0,A2
    2190                    
    2191 000084e0     09c0          MOVI    1024,A0                         ;DECIDE WHERE PUCK FLIES
         000084f0     0400  
    2192 00008500     0d5f          CALLA   RAND0
         00008510 00000000! 
    2193 00008530     0b40          CMPI    410,A0                          ;60% FLY BEHIND NET
         00008540     fe65  
    2194 00008550     c718          JRGT    ATU_FLY_BEHIND_NET              ;BR=FLY BEHIND NET
    2195 00008560     4c03          MOVE    A0,A3
    2196                    
    2197 00008570     09e0          MOVI    010000H,A0
         00008580 00010000  
    2198 000085a0     09e1          MOVI    08000H,A1
         000085b0 00008000  
    2199 000085d0     09e5          MOVI    -050000H,A5
         000085e0 fffb0000  
    2200 00008600     09e6          MOVI    -058000H,A6
         00008610 fffa8000  
    2201                    
    2202 00008630     0d5f          CALLA   IS_A8_IN_CREASE
         00008640 00000000! 
    2203 00008660     c803          JRC     ATU_FLY_IN_FRONT                ;BR=INSIDE DA CREASE
    2204                    
    2205 00008670     0b43          CMPI    205,A3                          ;50% (OF 60%) FLY BEHIND GOALIE
         00008680     ff32  
    2206 00008690     c717          JRGT    ATU_CHOOSE_VEL                  ;BR=FLY BEHIND GOALIE
    2207 000086a0           ATU_FLY_IN_FRONT
    2208 000086a0     0b22          ADDI    XD1800,A2                       ;FLY IN FRONT OF GOALIE
         000086b0 00b40000  
    2209 000086d0     c013          JRUC    ATU_CHOOSE_VEL
    2210                    
    2211 000086e0           ATU_FLY_BEHIND_NET
    2212 000086e0     09e0          MOVI    040000H,A0
         000086f0 00040000  
    2213 00008710     09e1          MOVI    028000H,A1
         00008720 00028000  
    2214 00008740     09e5          MOVI    -040000H,A5
         00008750 fffc0000  
    2215 00008770     09e6          MOVI    -058000H,A6
         00008780 fffa8000  
    2216 000087a0     0b67          CMPI    GSK14F05,A7
         000087b0 ffffffff! 
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   53

    2217 000087d0     cb03          JRNE    ATU_CHOOSE_VEL                  ;BR=MINIMUM VELOCITY OKAY
    2218 000087e0     09e1          MOVI    038000H,A1
         000087f0 00038000  
    2219 00008810           ATU_CHOOSE_VEL
    2220 00008810     0d5f          CALLA   RANGERND
         00008820 00000000! 
    2221 00008840     4c01          MOVE    A0,A1
    2222 00008850                   THETA_N A2
    2223 00008930     4c40          MOVE    A2,A0
    2224 00008940     07a8          MOVE    @PUCK_OBJECT,A8,L
         00008950 00000000! 
    2225 00008970     0d5f          CALLA   set_obj_to_polar
         00008980 00000000! 
    2226                    
    2227 000089a0     4ca0          MOVE    A5,A0
    2228 000089b0     4cc1          MOVE    A6,A1
    2229 000089c0     0d5f          CALLA   RANGERND
         000089d0 00000000! 
    2230 000089f0     b208          MOVE    A0,*A8(OYVEL),L
         00008a00     0120  
    2231                    
    2232 00008a10     09ce          MOVI    NORM_GRAVITY,A14
         00008a20     3000  
    2233 00008a30     b1c8          MOVE    A14,*A8(OYACCEL),W
         00008a40     02f0  
    2234 00008a50           ATU_DONE
    2235 00008a50     0960          RETS
    2236                    
    2237                    **************************************************************************
    2238                    *                                                                        *
    2239                    * A_HOOK_DOWN                                                            *
    2240                    *                                                                        *
    2241                    * PASS:                                                                  *
    2242                    * A8 = GOALIE OBJECT                                                     *
    2243                    *                                                                        *
    2244                    **************************************************************************
    2245                    
    2246 00008a60           A_HOOK_DOWN
    2247 00008a60     b70e          MOVE    *A8(ODT_GLOVE),A14,L
         00008a70     0670  
    2248 00008a80     0b4e          CMPI    GL_KEEP_PUCK,A14
         00008a90     fecc  
    2249 00008aa0     c76d          JRGT    AHD_DONE                        ;BR=KEEP PUCK
    2250                    
    2251 00008ab0     05ae          MOVE    @PUCK_CONTROL,A14,W
         00008ac0 00000000! 
    2252 00008ae0     ca69          JRZ     AHD_DONE                        ;BR=NOBODY HAS CONTROL
    2253 00008af0     b706          MOVE    *A8(ODT_PBK),A6,L
         00008b00     0530  
    2254 00008b10     aec0          MOVB    *A6(POF_NUMBER),A0
         00008b20     0000  
    2255 00008b30     480e          CMP     A0,A14
    2256 00008b40     cb63          JRNE    AHD_DONE                        ;BR=GOALIE DOESN'T HAVE CONTROL
    2257                    
    2258 00008b50     57ce          CLR     A14                             ;PUM_OPEN
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   54

    2259 00008b60     0d5f          calla   set_safe_puck_mode_a14
         00008b70 00000000! 
    2260 00008b90     05c0          MOVE    @PUCK_CONTROL,@PUCK_LAST_CONTROL,W
         00008ba0 00000000! 
         00008bc0 00000000! 
    2261 00008be0     57ce          CLR     A14
    2262 00008bf0     058e          MOVE    A14,@PUCK_INTENDED,W
         00008c00 00000000! 
    2263 00008c20     058e          MOVE    A14,@PUCK_CONTROL,W
         00008c30 00000000! 
    2264 00008c50     0d5f          CALLA   new_puck_control
         00008c60 00000000! 
    2265                    
    2266 00008c80     5621          CLR     A1                              ;DIRECTION 3(7) OFFSET
    2267 00008c90     b70e          MOVE    *A8(OIMG),A14,L
         00008ca0     02c0  
    2268 00008cb0     0b6e          CMPI    GSK23F08,A14
         00008cc0 ffffffff! 
    2269 00008ce0     ca0d          JREQ    AHD_GET_ANGLE                   ;BR=DIRECTION 3(7)
    2270 00008cf0     09e1          MOVI    XD0450,A1                       ;DIRECTION 4(6) OFFSET
         00008d00 002d0000  
    2271 00008d20     0b6e          CMPI    GSK14F08,A14
         00008d30 ffffffff! 
    2272 00008d50     ca03          JREQ    AHD_CHECK_SIDE                  ;BR=DIRECTION 4(6)
    2273 00008d60     09e1          MOVI    XD0900,A1                       ;DIRECTION 2(8) OFFSET
         00008d70 005a0000  
    2274 00008d90           AHD_CHECK_SIDE
    2275 00008d90     1480          SUBK    4,A0
    2276 00008da0     ca01          JRZ     AHD_GET_ANGLE                   ;BR=LEFT GOALIE
    2277 00008db0     03a1          NEG     A1
    2278 00008dc0           AHD_GET_ANGLE
    2279 00008dc0     aec0          MOVB    *A6(POF_DIRECTION),A0
         00008dd0     0390  
    2280 00008de0     0d5f          CALLA   dir_to_degrees
         00008df0 00000000! 
    2281 00008e10     4020          ADD     A1,A0
    2282 00008e20     4c01          MOVE    A0,A1
    2283 00008e30     0b20          ADDI    XD0450,A0
         00008e40 002d0000  
    2284 00008e60     0d5f          CALLA   RANGERND
         00008e70 00000000! 
    2285 00008e90                   THETA_N A0
    2286 00008f70     4c02          MOVE    A0,A2
    2287                    
    2288 00008f80     07a8          MOVE    @PUCK_OBJECT,A8,L
         00008f90 00000000! 
    2289 00008fb0     09e0          MOVI    060000H,A0
         00008fc0 00060000  
    2290 00008fe0     09e1          MOVI    050000H,A1
         00008ff0 00050000  
    2291 00009010     0d5f          CALLA   RANGERND
         00009020 00000000! 
    2292 00009040     b208          MOVE    A0,*A8(OYVEL),L
         00009050     0120  
    2293                    
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   55

    2294 00009060     09ce          MOVI    NORM_GRAVITY,A14
         00009070     3000  
    2295 00009080     b1c8          MOVE    A14,*A8(OYACCEL),W
         00009090     02f0  
    2296                    
    2297 000090a0     09e0          MOVI    030000H,A0
         000090b0 00030000  
    2298 000090d0     09e1          MOVI    010000H,A1
         000090e0 00010000  
    2299 00009100     0d5f          CALLA   RANGERND
         00009110 00000000! 
    2300 00009130     4c01          MOVE    A0,A1
    2301 00009140     4c40          MOVE    A2,A0
    2302 00009150     0d5f          CALLA   set_obj_to_polar
         00009160 00000000! 
    2303 00009180           AHD_DONE
    2304 00009180     0960          RETS
    2305                    
    2306                    **************************************************************************
    2307                    *                                                                        *
    2308                    * A_CHECK_SKATEBLOCK                                                     *
    2309                    *                                                                        *
    2310                    * PASS:                                                                  *
    2311                    * A8 = GOALIE OBJECT                                                     *
    2312                    *                                                                        *
    2313                    **************************************************************************
    2314                    
    2315 00009190           A_CHECK_SKATEBLOCK
    2316 00009190     b50e          MOVE    *A8(ODT_GFLAGS),A14,W
         000091a0     0630  
    2317 000091b0     0b8e          ANDI    M_SAVEMADE|M_MISSSAVE,A14
         000091c0 fffffff3  
    2318 000091e0     cb65          JRNZ    ACSB_DONE                       ;BR=DON'T SAVE
    2319                    
    2320 000091f0     07a9          MOVE    @PUCK_OBJECT,A9,L
         00009200 00000000! 
    2321                    
    2322 00009220     b706          MOVE    *A8(ODT_PBK),A6,L
         00009230     0530  
    2323                    
    2324 00009240     5600          CLR     A0
    2325 00009250     4c01          MOVE    A0,A1
    2326 00009260     0d3f          CALLR   CHECK_PUCK_IMPACT
         00009270     fc6c  
    2327 00009280     ca5b          JRZ     ACSB_DONE                       ;BR=NO PUCK COLLISION
    2328                    
    2329                    ;       MOVB    *A6(POF_DIRECTION),A5
    2330                    ;
    2331                    ;;      calla   get_players_puck_point_o
    2332                    ;;      MOVE    A0,A2                           ;X POSITION
    2333                    ;;      MOVE    A1,A3                           ;Z POSITION
    2334                    ;
    2335                    ;;      MOVE    *A8(OXVAL),A2,L
    2336                    ;;      MOVE    *A8(OZVAL),A3,L
    2337                    ;
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   56

    2338                    ;       MOVE    *A8(ODT_GXIMPACT),A2,L          ;PUCK AT IMPACT POINT
    2339                    ;       MOVE    *A8(ODT_GZIMPACT),A3,L
    2340                    ;
    2341                    ;       MOVE    *A9(OXVAL),A0,L
    2342                    ;       MOVE    *A9(OXVEL),A14,L
    2343                    ;       ADD     A14,A0
    2344                    ;       MOVE    *A9(OZVAL),A1,L
    2345                    ;       MOVE    *A9(OZVEL),A14,L
    2346                    ;       ADD     A14,A1
    2347                    ;       CALLA   find_dir_to_point_18            ;FROM GOALIE TO PUCK
    2348                    ;       SUB     A5,A0
    2349                    ;       JRZ     ACSB_DONE                       ;BR=SAME DIRECTION
    2350                    ;       ABS     A0
    2351                    ;       SUBK    1,A0
    2352                    ;       JRZ     ACSB_DONE                       ;BR=ADJACENT DIRECTION
    2353                    ;       SUBK    6,A0
    2354                    ;       JRZ     ACSB_DONE                       ;BR=8 TO 1 CASE
    2355                    
    2356 00009290     0d3f          CALLR   COUNT_SAVE
         000092a0     fb4d  
    2357                    
    2358 000092b0     b249          MOVE    A2,*A9(OXVAL),L                 ;JUST PUT IT AT PUCK POINT
         000092c0     0140  
    2359 000092d0     b269          MOVE    A3,*A9(OZVAL),L                 ; FOR NOW
         000092e0     0180  
    2360                    
    2361                    ;       MOVE    *A8(ODT_GXIMPACT),*A9(OXVAL),L  ;PUCK PUCK AT IMPACT POINT
    2362                    ;       MOVE    *A8(ODT_GZIMPACT),*A9(OZVAL),L
    2363                    
    2364 000092f0     b52e          MOVE    *A9(OFLAGS),A14,W
         00009300     0420  
    2365 00009310     0bae          ORI     M_FVELADD,A14
         00009320 00000004  
    2366 00009340     b1c9          MOVE    A14,*A9(OFLAGS),W
         00009350     0420  
    2367                    
    2368 00009360     09c4          MOVI    s_goalie_stick_1,A4
         00009370     0013  
    2369 00009380     0d5f          CALLA   do_sound
         00009390 00000000! 
    2370                    
    2371 000093b0     09e0          MOVI    XD0150,A0
         000093c0 000f0000  
    2372 000093e0     5621          CLR     A1
    2373 000093f0     aece          MOVB    *A6(POF_DIRECTION),A14
         00009400     0390  
    2374 00009410     0b8e          ANDI    3,A14
         00009420 fffffffc  
    2375 00009440     146e          SUBK    3,A14
    2376 00009450     cb03          JRNZ    ACSB_NO37                       ;BR=NOT DIRECTION 3 OR 7
    2377 00009460     09e1          MOVI    -XD0300,A1
         00009470 ffe20000  
    2378 00009490           ACSB_NO37
    2379 00009490     09e2          MOVI    XD0900,A2
         000094a0 005a0000  
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   57

    2380 000094c0     b70e          MOVE    *A8(ODT_GSAVE),A14,L
         000094d0     0650  
    2381 000094e0     0b6e          CMPI    SET_GGSKATE_SCRIPT,A14
         000094f0 ffffffff! 
    2382 00009510     ca07          JREQ    ACSB_CHECK_FLIP                 ;BR=GLOVE SIDE
    2383 00009520     0b6e          CMPI    SET_GQGSKATE_SCRIPT,A14
         00009530 ffffffff! 
    2384 00009550     ca03          JREQ    ACSB_CHECK_FLIP                 ;BR=GLOVE SIDE
    2385 00009560     03a0          NEG     A0
    2386 00009570     03a1          NEG     A1
    2387 00009580     03a2          NEG     A2                              ;STICK SIDE, ROTATE OTHER WAY
    2388 00009590           ACSB_CHECK_FLIP
    2389 00009590     aece          MOVB    *A6(POF_NUMBER),A14
         000095a0     0000  
    2390 000095b0     148e          SUBK    4,A14
    2391 000095c0     ca03          JRZ     ACSB_UPDATE_PUCK                ;BR=LEFT GOALIE
    2392 000095d0     03a0          NEG     A0
    2393 000095e0     03a1          NEG     A1
    2394 000095f0     03a2          NEG     A2                              ;RIGHT GOALIE, ROTATE OTHER WAY
    2395 00009600           ACSB_UPDATE_PUCK
    2396 00009600     0d5f          CALLA   RANGERND
         00009610 00000000! 
    2397 00009630     b721          MOVE    *A9(ODT_VEL),A1,L
         00009640     04d0  
    2398 00009650     4c23          MOVE    A1,A3
    2399 00009660     2ba3          SRA     3,A3
    2400                    
    2401 00009670     4c42          MOVE    A2,A2
    2402 00009680     ce03          JRN     ACSB_OTHER_MA_CHECK             ;BR=DO THE OTHER ONE
    2403 00009690     4c00          MOVE    A0,A0
    2404 000096a0     c107          JRP     ACSB_MODIFY_ANGLE               ;BR=NOT GOING BEHIND
    2405 000096b0     c002          JRUC    ACSB_QUICKER
    2406 000096c0           ACSB_OTHER_MA_CHECK
    2407 000096c0     4c00          MOVE    A0,A0
    2408 000096d0     ce04          JRN     ACSB_MODIFY_ANGLE               ;BR=NOT GOING BEHIND
    2409 000096e0           ACSB_QUICKER
    2410 000096e0     b52e          MOVE    *A9(OYPOS),A14,W
         000096f0     0170  
    2411 00009700     cb01          JRNZ    ACSB_MODIFY_ANGLE               ;BR=HIT THE PAD
    2412 00009710     2be3          SRA     1,A3
    2413 00009720           ACSB_MODIFY_ANGLE
    2414 00009720     4002          ADD     A0,A2
    2415                    
    2416 00009730     b720          MOVE    *A9(ODT_DIR),A0,L
         00009740     04b0  
    2417 00009750     4040          ADD     A2,A0
    2418 00009760     4461          SUB     A3,A1
    2419 00009770     4d28          MOVE    A9,A8
    2420                    
    2421 00009780     0b61          CMPI    MAX_SAVE_PUCK_SPEED,A1
         00009790 fff77fff  
    2422 000097b0     c680          JALE    SEND_PUCK_POLAR                 ;BR=UNDER OR AT THE SPEED LIM
         000097c0 00000000! 
    2423                    
    2424 000097e0     09e1          MOVI    MAX_SAVE_PUCK_SPEED,A1
TMS340 COFF Macro Assembler Version 6.10     Wed Apr 21 11:34:02 2021
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE   58

         000097f0 00088000  
    2425 00009810     c080          JAUC    SEND_PUCK_POLAR
         00009820 00000000! 
    2426 00009840           ACSB_DONE
    2427 00009840     0960          RETS
    2428                    
    2429                    **************************************************************************
    2430                    *                                                                        *
    2431                    * A_QPADST - QUICK PAD STACK SETUP                                       *
    2432                    *                                                                        *
    2433                    * PASS:                                                                  *
    2434                    * A8 = GOALIE OBJECT                                                     *
    2435                    *                                                                        *
    2436                    **************************************************************************
    2437                    
    2438 00009850           A_QPADST
    2439 00009850     0d3f          CALLR   A_NOPUCKCHECK
         00009860     f978  
    2440 00009870     0d5f          CALLA   A_SET_OXZVEL
         00009880 00000000! 
    2441 000098a0     0d3f          CALLR   A_SETFOCIS
         000098b0     f819  
    2442 000098c0     0d5f          CALLA   A_ANIMFRM
         000098d0 00000000! 
    2443 000098f0     c080          JAUC    A_CHECK_BUTTERFLY
         00009900 00005d40' 
    2444                    
    2445                    
    2446                    
    2447                    
    2448                            .end

 No Errors,  No Warnings
